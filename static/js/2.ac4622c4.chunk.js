(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(56)},function(e,t,n){var r=n(24)("wks"),i=n(19),o=n(3).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function o(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){var r=n(3),i=n(2),o=n(10),a=n(18),s=n(46),u=function e(t,n,u){var c,l,h,f,d=t&e.F,p=t&e.G,m=t&e.P,y=t&e.B,g=p?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,v=p?i:i[n]||(i[n]={}),b=v.prototype||(v.prototype={});for(c in p&&(u=n),u)h=((l=!d&&g&&void 0!==g[c])?g:u)[c],f=y&&l?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,g&&a(g,c,h,t&e.U),v[c]!=h&&o(v,c,f),m&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(14),i=n(23);e.exports=n(15)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(22),i=n(44),o=n(30),a=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(31),i=n(20);e.exports=function(e){return r(i(e))}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(3),i=n(10),o=n(12),a=n(19)("src"),s=n(69),u=(""+s).split("toString");n(2).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(49),i=n(36);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(2),i=n(3),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(25)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){t.f={}.propertyIsEnumerable},,function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(26);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(20);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(27),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(1)("unscopables"),i=Array.prototype;void 0==i[r]&&n(10)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){var r=n(24)("keys"),i=n(19);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(14).f,i=n(12),o=n(1)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(1)},function(e,t,n){var r=n(3),i=n(2),o=n(25),a=n(39),s=n(14).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){e.exports={}},function(e,t,n){"use strict";n(61);var r,i=(r=n(53))&&"object"===typeof r&&"default"in r?r.default:r;e.exports=i},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t,n){e.exports=!n(15)&&!n(17)(function(){return 7!=Object.defineProperty(n(45)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(11),i=n(3).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(70);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(46),i=n(31),o=n(32),a=n(33),s=n(71);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,h=6==e,f=5==e||h,d=t||s;return function(t,s,p){for(var m,y,g=o(t),v=i(g),b=r(s,p,3),w=a(v.length),E=0,S=n?d(t,w):u?d(t,0):void 0;w>E;E++)if((f||E in v)&&(y=b(m=v[E],E,g),e))if(n)S[E]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:S.push(m)}else if(l)return!1;return h?-1:c||l?l:S}}},function(e,t,n){var r=n(26);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(12),i=n(16),o=n(78)(!1),a=n(35)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(22),i=n(92),o=n(36),a=n(35)("IE_PROTO"),s=function(){},u=function(){var e,t=n(45)("iframe"),r=o.length;for(t.style.display="none",n(93).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(49),i=n(36).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(25),i=n(9),o=n(18),a=n(10),s=n(41),u=n(103),c=n(38),l=n(104),h=n(1)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,m,y,g){u(n,t,p);var v,b,w,E=function(e){if(!f&&e in I)return I[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",T="values"==m,C=!1,I=e.prototype,k=I[h]||I["@@iterator"]||m&&I[m],_=k||E(m),D=m?T?E("entries"):_:void 0,N="Array"==t&&I.entries||k;if(N&&(w=l(N.call(new e)))!==Object.prototype&&w.next&&(c(w,S,!0),r||"function"==typeof w[h]||a(w,h,d)),T&&k&&"values"!==k.name&&(C=!0,_=function(){return k.call(this)}),r&&!g||!f&&!C&&I[h]||a(I,h,_),s[t]=_,s[S]=d,m)if(v={values:T?_:E("values"),keys:y?_:E("keys"),entries:D},g)for(b in v)b in I||o(I,b,v[b]);else i(i.P+i.F*(f||C),t,v);return v}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(108),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o="[DEFAULT]",a=[],s=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){a.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){a=a.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach(function(n){Object.keys(e.services_[n]).forEach(function(r){t.push(e.services_[n][r])})}),Promise.all(t.map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=o),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==o?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;r.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(a.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),a=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&u("app-deleted",{name:this.name_})},e}();function u(e,t){throw c.create(e,t)}s.prototype.name&&s.prototype.options||s.prototype.delete||console.log("dc");var c=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),l=!1;try{l="[object process]"===Object.prototype.toString.call(e.process)}catch(f){}l&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n');var h=function e(){var t={},n={},a={},c={__esModule:!0,initializeApp:function(e,n){if(void 0===n&&(n={}),"object"!==typeof n||null===n){var r=n;n={name:r}}var a=n;void 0===a.name&&(a.name=o);var l=a.name;"string"===typeof l&&l||u("bad-app-name",{name:l+""}),i(t,l)&&u("duplicate-app",{name:l});var h=new s(e,a,c);return t[l]=h,f(h,"create"),h},app:l,apps:null,Promise:Promise,SDK_VERSION:"5.9.0",INTERNAL:{registerService:function(e,t,i,o,f){n[e]&&u("duplicate-service",{name:e}),n[e]=t,o&&(a[e]=o,h().forEach(function(e){o("create",e)}));var d=function(t){return void 0===t&&(t=l()),"function"!==typeof t[e]&&u("invalid-app-argument",{name:e}),t[e]()};return void 0!==i&&r.deepExtend(d,i),c[e]=d,s.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._getService.bind(this,e).apply(this,f?t:[])},d},createFirebaseNamespace:e,extendNamespace:function(e){r.deepExtend(c,e)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(e){f(t[e],"delete"),delete t[e]},factories:n,useAsService:d,Promise:Promise,deepExtend:r.deepExtend}};function l(e){return i(t,e=e||o)||u("no-app",{name:e}),t[e]}function h(){return Object.keys(t).map(function(e){return t[e]})}function f(e,t){Object.keys(n).forEach(function(n){var r=d(e,n);null!==r&&a[r]&&a[r](t,e)})}function d(e,t){if("serverAuth"===t)return null;var n=t;return e.options,n}return r.patchProperty(c,"default",c),Object.defineProperty(c,"apps",{get:h}),r.patchProperty(l,"App",s),c}();t.firebase=h,t.default=h}).call(this,n(13))},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(57)},,function(e,t,n){"use strict";var r=n(43),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.concurrent_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function v(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function E(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}function S(){}function T(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}E.prototype.isReactComponent={},E.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&v("85"),this.updater.enqueueSetState(this,e,t,"setState")},E.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=E.prototype;var C=T.prototype=new S;C.constructor=T,r(C,E.prototype),C.isPureReactComponent=!0;var I={current:null},k={current:null},_=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!D.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:k.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var x=/\/+/g,P=[];function O(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function M(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+L(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+L(s=t[c],c);u+=e(s,l,r,i)}else if(l=null===t||"object"!==typeof t?null:"function"===typeof(l=g&&t[g]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+L(s,c++),r,i);else"object"===s&&v("31","[object Object]"===(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return u}(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function F(e,t){e.func.call(e.context,t,e.count++)}function U(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?q(e,r,n,function(e){return e}):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(x,"$&/")+"/")+n)),r.push(e))}function q(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(x,"$&/")+"/"),M(e,U,t=O(t,o,r,i)),R(t)}function B(){var e=I.current;return null===e&&v("307"),e}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return q(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;M(e,F,t=O(null,null,t,n)),R(t)},count:function(e){return M(e,function(){return null},null)},toArray:function(e){var t=[];return q(e,t,null,function(e){return e}),t},only:function(e){return A(e)||v("143"),e}},createRef:function(){return{current:null}},Component:E,PureComponent:T,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return B().useCallback(e,t)},useContext:function(e,t){return B().useContext(e,t)},useEffect:function(e,t){return B().useEffect(e,t)},useImperativeHandle:function(e,t,n){return B().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return B().useLayoutEffect(e,t)},useMemo:function(e,t){return B().useMemo(e,t)},useReducer:function(e,t,n){return B().useReducer(e,t,n)},useRef:function(e){return B().useRef(e)},useState:function(e){return B().useState(e)},Fragment:s,StrictMode:u,Suspense:p,createElement:N,cloneElement:function(e,t,n){(null===e||void 0===e)&&v("267",e);var i=void 0,a=r({},e.props),s=e.key,u=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,c=k.current),void 0!==t.key&&(s=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)_.call(t,i)&&!D.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){l=Array(i);for(var h=0;h<i;h++)l[h]=arguments[h+2];a.children=l}return{$$typeof:o,type:e.type,key:s,ref:u,props:a,_owner:c}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.8.4",unstable_ConcurrentMode:f,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:I,ReactCurrentOwner:k,assign:r}},j={default:V},z=j&&V||j;e.exports=z.default||z},function(e,t,n){"use strict";var r=n(0),i=n(43),o=n(58);function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,a,s){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(e=Error(t.replace(/%s/g,function(){return u[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var s=!1,u=null,c=!1,l=null,h={onError:function(e){s=!0,u=e}};function f(e,t,n,r,i,o,a,c,l){s=!1,u=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(h,arguments)}var d=null,p={};function m(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||a("96",e),!g[n])for(var r in t.extractEvents||a("97",e),g[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,u=r;v.hasOwnProperty(u)&&a("99",u),v[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&y(c[i],s,u);i=!0}else o.registrationName?(y(o.registrationName,s,u),i=!0):i=!1;i||a("98",r,e)}}}function y(e,t,n){b[e]&&a("100",e),b[e]=t,w[e]=t.eventTypes[n].dependencies}var g=[],v={},b={},w={},E=null,S=null,T=null;function C(e,t,n){var r=e.type||"unknown-event";e.currentTarget=T(n),function(e,t,n,r,i,o,h,d,p){if(f.apply(this,arguments),s){if(s){var m=u;s=!1,u=null}else a("198"),m=void 0;c||(c=!0,l=m)}}(r,t,void 0,e),e.currentTarget=null}function I(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function k(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var _=null;function D(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)C(e,t[r],n[r]);else t&&C(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var N={injectEventPluginOrder:function(e){d&&a("101"),d=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&a("102",t),p[t]=r,n=!0)}n&&m()}};function A(e,t){var n=e.stateNode;if(!n)return null;var r=E(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&a("231",t,typeof n),n)}function x(e){if(null!==e&&(_=I(_,e)),e=_,_=null,e&&(k(e,D),_&&a("95"),c))throw e=l,c=!1,l=null,e}var P=Math.random().toString(36).slice(2),O="__reactInternalInstance$"+P,R="__reactEventHandlers$"+P;function M(e){if(e[O])return e[O];for(;!e[O];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[O]).tag||6===e.tag?e:null}function L(e){return!(e=e[O])||5!==e.tag&&6!==e.tag?null:e}function F(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function U(e){return e[R]||null}function q(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function B(e,t,n){(t=A(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function V(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=q(t);for(t=n.length;0<t--;)B(n[t],"captured",e);for(t=0;t<n.length;t++)B(n[t],"bubbled",e)}}function j(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=A(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=I(n._dispatchListeners,t),n._dispatchInstances=I(n._dispatchInstances,e))}function z(e){e&&e.dispatchConfig.registrationName&&j(e._targetInst,null,e)}function Q(e){k(e,V)}var W=!("undefined"===typeof window||!window.document||!window.document.createElement);function K(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var G={animationend:K("Animation","AnimationEnd"),animationiteration:K("Animation","AnimationIteration"),animationstart:K("Animation","AnimationStart"),transitionend:K("Transition","TransitionEnd")},H={},Y={};function X(e){if(H[e])return H[e];if(!G[e])return e;var t,n=G[e];for(t in n)if(n.hasOwnProperty(t)&&t in Y)return H[e]=n[t];return e}W&&(Y=document.createElement("div").style,"AnimationEvent"in window||(delete G.animationend.animation,delete G.animationiteration.animation,delete G.animationstart.animation),"TransitionEvent"in window||delete G.transitionend.transition);var $=X("animationend"),J=X("animationiteration"),Z=X("animationstart"),ee=X("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function oe(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function ae(){return!0}function se(){return!1}function ue(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:se,this.isPropagationStopped=se,this}function ce(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function le(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function he(e){e.eventPool=[],e.getPooled=ce,e.release=le}i(ue.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:se,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=se,this._dispatchInstances=this._dispatchListeners=null}}),ue.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ue.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,he(n),n},he(ue);var fe=ue.extend({data:null}),de=ue.extend({data:null}),pe=[9,13,27,32],me=W&&"CompositionEvent"in window,ye=null;W&&"documentMode"in document&&(ye=document.documentMode);var ge=W&&"TextEvent"in window&&!ye,ve=W&&(!me||ye&&8<ye&&11>=ye),be=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Ee=!1;function Se(e,t){switch(e){case"keyup":return-1!==pe.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Te(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ce=!1;var Ie={eventTypes:we,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(me)e:{switch(e){case"compositionstart":i=we.compositionStart;break e;case"compositionend":i=we.compositionEnd;break e;case"compositionupdate":i=we.compositionUpdate;break e}i=void 0}else Ce?Se(e,n)&&(i=we.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=we.compositionStart);return i?(ve&&"ko"!==n.locale&&(Ce||i!==we.compositionStart?i===we.compositionEnd&&Ce&&(o=oe()):(re="value"in(ne=r)?ne.value:ne.textContent,Ce=!0)),i=fe.getPooled(i,t,n,r),o?i.data=o:null!==(o=Te(n))&&(i.data=o),Q(i),o=i):o=null,(e=ge?function(e,t){switch(e){case"compositionend":return Te(t);case"keypress":return 32!==t.which?null:(Ee=!0,be);case"textInput":return(e=t.data)===be&&Ee?null:e;default:return null}}(e,n):function(e,t){if(Ce)return"compositionend"===e||!me&&Se(e,t)?(e=oe(),ie=re=ne=null,Ce=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ve&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=de.getPooled(we.beforeInput,t,n,r)).data=e,Q(t)):t=null,null===o?t:null===t?o:[o,t]}},ke=null,_e=null,De=null;function Ne(e){if(e=S(e)){"function"!==typeof ke&&a("280");var t=E(e.stateNode);ke(e.stateNode,e.type,t)}}function Ae(e){_e?De?De.push(e):De=[e]:_e=e}function xe(){if(_e){var e=_e,t=De;if(De=_e=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n){return e(t,n)}function Re(){}var Me=!1;function Le(e,t){if(Me)return e(t);Me=!0;try{return Pe(e,t)}finally{Me=!1,(null!==_e||null!==De)&&(Re(),xe())}}var Fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Fe[e.type]:"textarea"===t}function qe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Be(e){if(!W)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function je(e){e._valueTracker||(e._valueTracker=function(e){var t=Ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ze(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Qe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Qe.hasOwnProperty("ReactCurrentDispatcher")||(Qe.ReactCurrentDispatcher={current:null});var We=/^(.*)[\\\/]/,Ke="function"===typeof Symbol&&Symbol.for,Ge=Ke?Symbol.for("react.element"):60103,He=Ke?Symbol.for("react.portal"):60106,Ye=Ke?Symbol.for("react.fragment"):60107,Xe=Ke?Symbol.for("react.strict_mode"):60108,$e=Ke?Symbol.for("react.profiler"):60114,Je=Ke?Symbol.for("react.provider"):60109,Ze=Ke?Symbol.for("react.context"):60110,et=Ke?Symbol.for("react.concurrent_mode"):60111,tt=Ke?Symbol.for("react.forward_ref"):60112,nt=Ke?Symbol.for("react.suspense"):60113,rt=Ke?Symbol.for("react.memo"):60115,it=Ke?Symbol.for("react.lazy"):60116,ot="function"===typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function st(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ye:return"Fragment";case He:return"Portal";case $e:return"Profiler";case Xe:return"StrictMode";case nt:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case Ze:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return st(e.type);case it:if(e=1===e._status?e._result:null)return st(e)}return null}function ut(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=st(e.type);n=null,r&&(n=st(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(We,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lt=Object.prototype.hasOwnProperty,ht={},ft={};function dt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function yt(e){return e[1].toUpperCase()}function gt(e,t,n,r){var i=pt.hasOwnProperty(t)?pt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!lt.call(ft,e)||!lt.call(ht,e)&&(ct.test(e)?ft[e]=!0:(ht[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function vt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function wt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=vt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Et(e,t){null!=(t=t.checked)&&gt(e,"checked",t,!1)}function St(e,t){Et(e,t);var n=vt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ct(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ct(e,t.type,vt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Tt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ct(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,yt);pt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,yt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,yt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){pt[e]=new dt(e,1,!1,e.toLowerCase(),null)});var It={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function kt(e,t,n){return(e=ue.getPooled(It.change,e,t,n)).type="change",Ae(n),Q(e),e}var _t=null,Dt=null;function Nt(e){x(e)}function At(e){if(ze(F(e)))return e}function xt(e,t){if("change"===e)return t}var Pt=!1;function Ot(){_t&&(_t.detachEvent("onpropertychange",Rt),Dt=_t=null)}function Rt(e){"value"===e.propertyName&&At(Dt)&&Le(Nt,e=kt(Dt,e,qe(e)))}function Mt(e,t,n){"focus"===e?(Ot(),Dt=n,(_t=t).attachEvent("onpropertychange",Rt)):"blur"===e&&Ot()}function Lt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return At(Dt)}function Ft(e,t){if("click"===e)return At(t)}function Ut(e,t){if("input"===e||"change"===e)return At(t)}W&&(Pt=Be("input")&&(!document.documentMode||9<document.documentMode));var qt={eventTypes:It,_isInputEventSupported:Pt,extractEvents:function(e,t,n,r){var i=t?F(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=xt:Ue(i)?Pt?o=Ut:(o=Lt,a=Mt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Ft),o&&(o=o(e,t)))return kt(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ct(i,"number",i.value)}},Bt=ue.extend({view:null,detail:null}),Vt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Vt[e])&&!!t[e]}function zt(){return jt}var Qt=0,Wt=0,Kt=!1,Gt=!1,Ht=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:zt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Qt;return Qt=e.screenX,Kt?"mousemove"===e.type?e.screenX-t:0:(Kt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Wt;return Wt=e.screenY,Gt?"mousemove"===e.type?e.screenY-t:0:(Gt=!0,0)}}),Yt=Ht.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},$t={eventTypes:Xt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?M(t):null):o=null,o===t)return null;var a=void 0,s=void 0,u=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Ht,s=Xt.mouseLeave,u=Xt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Yt,s=Xt.pointerLeave,u=Xt.pointerEnter,c="pointer");var l=null==o?i:F(o);if(i=null==t?i:F(t),(e=a.getPooled(s,o,n,r)).type=c+"leave",e.target=l,e.relatedTarget=i,(n=a.getPooled(u,t,n,r)).type=c+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(i=r,c=0,a=t=o;a;a=q(a))c++;for(a=0,u=i;u;u=q(u))a++;for(;0<c-a;)t=q(t),c--;for(;0<a-c;)i=q(i),a--;for(;c--;){if(t===i||t===i.alternate)break e;t=q(t),i=q(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(c=o.alternate)||c!==i);)t.push(o),o=q(o);for(o=[];r&&r!==i&&(null===(c=r.alternate)||c!==i);)o.push(r),r=q(r);for(r=0;r<t.length;r++)j(t[r],"bubbled",e);for(r=o.length;0<r--;)j(o[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Zt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var s=i.child;s;){if(s===n)return nn(i),e;if(s===r)return nn(i),t;s=s.sibling}a("188")}if(n.return!==r.return)n=i,r=o;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}s||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=ue.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=ue.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sn=Bt.extend({relatedTarget:null});function un(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn=Bt.extend({key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=un(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:zt,charCode:function(e){return"keypress"===e.type?un(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?un(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),fn=Ht.extend({dataTransfer:null}),dn=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:zt}),pn=ue.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Ht.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),yn=[["abort","abort"],[$,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},vn={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},gn[e]=t,vn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),yn.forEach(function(e){bn(e,!1)});var wn={eventTypes:gn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=vn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=vn[e];if(!i)return null;switch(e){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":e=hn;break;case"blur":case"focus":e=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case $:case J:case Z:e=on;break;case ee:e=pn;break;case"scroll":e=Bt;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Yt;break;default:e=ue}return Q(t=e.getPooled(i,t,n,r)),t}},En=wn.isInteractiveTopLevelEventType,Sn=[];function Tn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=M(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=qe(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=null,s=0;s<g.length;s++){var u=g[s];u&&(u=u.extractEvents(r,t,o,i))&&(a=I(a,u))}x(a)}}var Cn=!0;function In(e,t){if(!t)return null;var n=(En(e)?_n:Dn).bind(null,e);t.addEventListener(e,n,!1)}function kn(e,t){if(!t)return null;var n=(En(e)?_n:Dn).bind(null,e);t.addEventListener(e,n,!0)}function _n(e,t){Oe(Dn,e,t)}function Dn(e,t){if(Cn){var n=qe(t);if(null===(n=M(n))||"number"!==typeof n.tag||2===tn(n)||(n=null),Sn.length){var r=Sn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Le(Tn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Sn.length&&Sn.push(e)}}}var Nn={},An=0,xn="_reactListenersID"+(""+Math.random()).slice(2);function Pn(e){return Object.prototype.hasOwnProperty.call(e,xn)||(e[xn]=An++,Nn[e[xn]]={}),Nn[e[xn]]}function On(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Rn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mn(e,t){var n,r=Rn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rn(r)}}function Ln(){for(var e=window,t=On();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(n){break}t=On(e.document)}return t}function Fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Un(e){var t=Ln(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Fn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Mn(n,o);var a=Mn(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qn=W&&"documentMode"in document&&11>=document.documentMode,Bn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Vn=null,jn=null,zn=null,Qn=!1;function Wn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Qn||null==Vn||Vn!==On(n)?null:("selectionStart"in(n=Vn)&&Fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},zn&&en(zn,n)?null:(zn=n,(e=ue.getPooled(Bn.select,jn,e,t)).type="select",e.target=Vn,Q(e),e))}var Kn={eventTypes:Bn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Pn(o),i=w.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?F(t):window,e){case"focus":(Ue(o)||"true"===o.contentEditable)&&(Vn=o,jn=t,zn=null);break;case"blur":zn=jn=Vn=null;break;case"mousedown":Qn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Qn=!1,Wn(n,r);case"selectionchange":if(qn)break;case"keydown":case"keyup":return Wn(n,r)}return null}};function Gn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Hn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Yn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:vt(n)}}function $n(e,t){var n=vt(t.value),r=vt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}N.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),E=U,S=L,T=F,N.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:$t,ChangeEventPlugin:qt,SelectEventPlugin:Kn,BeforeInputEventPlugin:Ie});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Zn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sr=["Webkit","ms","Moz","O"];function ur(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function cr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ur(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ar).forEach(function(e){sr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});var lr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(e,t){t&&(lr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!==typeof t.style&&a("62",""))}function fr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dr(e,t){var n=Pn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":kn("scroll",e);break;case"focus":case"blur":kn("focus",e),kn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Be(i)&&kn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&In(i,e)}n[i]=!0}}}function pr(){}var mr=null,yr=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,wr="function"===typeof clearTimeout?clearTimeout:void 0,Er=o.unstable_scheduleCallback,Sr=o.unstable_cancelCallback;function Tr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Cr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Ir=[],kr=-1;function _r(e){0>kr||(e.current=Ir[kr],Ir[kr]=null,kr--)}function Dr(e,t){Ir[++kr]=e.current,e.current=t}var Nr={},Ar={current:Nr},xr={current:!1},Pr=Nr;function Or(e,t){var n=e.type.contextTypes;if(!n)return Nr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Rr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(e){_r(xr),_r(Ar)}function Lr(e){_r(xr),_r(Ar)}function Fr(e,t,n){Ar.current!==Nr&&a("168"),Dr(Ar,t),Dr(xr,n)}function Ur(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||a("108",st(t)||"Unknown",o);return i({},n,r)}function qr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Nr,Pr=Ar.current,Dr(Ar,t),Dr(xr,xr.current),!0}function Br(e,t,n){var r=e.stateNode;r||a("169"),n?(t=Ur(e,t,Pr),r.__reactInternalMemoizedMergedChildContext=t,_r(xr),_r(Ar),Dr(Ar,t)):_r(xr),Dr(xr,n)}var Vr=null,jr=null;function zr(e){return function(t){try{return e(t)}catch(n){}}}function Qr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Wr(e,t,n,r){return new Qr(e,t,n,r)}function Kr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gr(e,t){var n=e.alternate;return null===n?((n=Wr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hr(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Kr(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case Ye:return Yr(n.children,i,o,t);case et:return Xr(n,3|i,o,t);case Xe:return Xr(n,2|i,o,t);case $e:return(e=Wr(12,n,t,4|i)).elementType=$e,e.type=$e,e.expirationTime=o,e;case nt:return(e=Wr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Je:s=10;break e;case Ze:s=9;break e;case tt:s=11;break e;case rt:s=14;break e;case it:s=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=Wr(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Yr(e,t,n,r){return(e=Wr(7,e,r,t)).expirationTime=n,e}function Xr(e,t,n,r){return e=Wr(8,e,r,t),t=0===(1&t)?Xe:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function $r(e,t,n){return(e=Wr(6,e,null,t)).expirationTime=n,e}function Jr(e,t,n){return(t=Wr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function oi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ai={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Ss(),i=Xo(r=Ya(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),za(),Jo(e,i),Ja(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Ss(),i=Xo(r=Ya(r,e));i.tag=Qo,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),za(),Jo(e,i),Ja(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Ss(),r=Xo(n=Ya(n,e));r.tag=Wo,void 0!==t&&null!==t&&(r.callback=t),za(),Jo(e,r),Ja(e,n)}};function si(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,o))}function ui(e,t,n){var r=!1,i=Nr,o=t.contextType;return"object"===typeof o&&null!==o?o=jo(o):(i=Rr(t)?Pr:Ar.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Or(e,i):Nr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ci(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var o=t.contextType;"object"===typeof o&&null!==o?i.context=jo(o):(o=Rr(t)?Pr:Ar.current,i.context=Or(e,o)),null!==(o=e.updateQueue)&&(na(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(oi(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ai.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(na(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var hi=Array.isArray;function fi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!==typeof e&&a("284"),n._owner||a("290",e)}return e}function di(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function pi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Gr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$r(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=fi(e,t,n),r.return=e,r):((r=Hr(n.type,n.key,n.props,null,e.mode,r)).ref=fi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Yr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$r(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Ge:return(n=Hr(t.type,t.key,t.props,null,e.mode,n)).ref=fi(e,null,t),n.return=e,n;case He:return(t=Jr(t,e.mode,n)).return=e,t}if(hi(t)||at(t))return(t=Yr(t,e.mode,n,null)).return=e,t;di(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Ge:return n.key===i?n.type===Ye?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case He:return n.key===i?l(e,t,n,r):null}if(hi(n)||at(n))return null!==i?null:h(e,t,n,r,null);di(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Ge:return e=e.get(null===r.key?n:r.key)||null,r.type===Ye?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case He:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(hi(r)||at(r))return h(t,e=e.get(n)||null,r,i,null);di(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,y=null;null!==h&&m<s.length;m++){h.index>m?(y=h,h=null):y=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=y);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=y}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)(y=p(h,i,m,s[m],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),a=o(y,a,m),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach(function(e){return t(i,e)}),c}function y(i,s,u,c){var l=at(u);"function"!==typeof l&&a("150"),null==(u=l.call(u))&&a("151");for(var h=l=null,m=s,y=s=0,g=null,v=u.next();null!==m&&!v.done;y++,v=u.next()){m.index>y?(g=m,m=null):g=m.sibling;var b=d(i,m,v.value,c);if(null===b){m||(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,m=g}if(v.done)return n(i,m),l;if(null===m){for(;!v.done;y++,v=u.next())null!==(v=f(i,v.value,c))&&(s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return l}for(m=r(i,m);!v.done;y++,v=u.next())null!==(v=p(m,i,y,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?y:v.key),s=o(v,s,y),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===Ye&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case Ge:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===Ye:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===Ye?o.props.children:o.props)).ref=fi(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===Ye?((r=Yr(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Hr(o.type,o.key,o.props,null,e.mode,u)).ref=fi(e,r,o),u.return=e,e=u)}return s(e);case He:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jr(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=$r(o,e.mode,u)).return=e,e=r),s(e);if(hi(o))return m(e,r,o,u);if(at(o))return y(e,r,o,u);if(l&&di(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:a("152",(u=e.type).displayName||u.name||"Component")}return n(e,r)}}var mi=pi(!0),yi=pi(!1),gi={},vi={current:gi},bi={current:gi},wi={current:gi};function Ei(e){return e===gi&&a("174"),e}function Si(e,t){Dr(wi,t),Dr(bi,e),Dr(vi,gi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}_r(vi),Dr(vi,t)}function Ti(e){_r(vi),_r(bi),_r(wi)}function Ci(e){Ei(wi.current);var t=Ei(vi.current),n=tr(t,e.type);t!==n&&(Dr(bi,e),Dr(vi,n))}function Ii(e){bi.current===e&&(_r(vi),_r(bi))}var ki=0,_i=2,Di=4,Ni=8,Ai=16,xi=32,Pi=64,Oi=128,Ri=Qe.ReactCurrentDispatcher,Mi=0,Li=null,Fi=null,Ui=null,qi=null,Bi=null,Vi=null,ji=0,zi=null,Qi=0,Wi=!1,Ki=null,Gi=0;function Hi(){a("307")}function Yi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Xi(e,t,n,r,i,o){if(Mi=o,Li=t,Ui=null!==e?e.memoizedState:null,Ri.current=null===Ui?co:lo,t=n(r,i),Wi){do{Wi=!1,Gi+=1,Ui=null!==e?e.memoizedState:null,Vi=qi,zi=Bi=Fi=null,Ri.current=lo,t=n(r,i)}while(Wi);Ki=null,Gi=0}return Ri.current=uo,(e=Li).memoizedState=qi,e.expirationTime=ji,e.updateQueue=zi,e.effectTag|=Qi,e=null!==Fi&&null!==Fi.next,Mi=0,Vi=Bi=qi=Ui=Fi=Li=null,ji=0,zi=null,Qi=0,e&&a("300"),t}function $i(){Ri.current=uo,Mi=0,Vi=Bi=qi=Ui=Fi=Li=null,ji=0,zi=null,Qi=0,Wi=!1,Ki=null,Gi=0}function Ji(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===Bi?qi=Bi=e:Bi=Bi.next=e,Bi}function Zi(){if(null!==Vi)Vi=(Bi=Vi).next,Ui=null!==(Fi=Ui)?Fi.next:null;else{null===Ui&&a("310");var e={memoizedState:(Fi=Ui).memoizedState,baseState:Fi.baseState,queue:Fi.queue,baseUpdate:Fi.baseUpdate,next:null};Bi=null===Bi?qi=e:Bi.next=e,Ui=Fi.next}return Bi}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Zi(),n=t.queue;if(null===n&&a("311"),0<Gi){var r=n.dispatch;if(null!==Ki){var i=Ki.get(n);if(void 0!==i){Ki.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Jt(o,t.memoizedState)||(So=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.eagerReducer=e,n.eagerState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Mi?(l||(l=!0,u=s,i=o),h>ji&&(ji=h)):o=c.eagerReducer===e?c.eagerState:e(o,c.action),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),Jt(o,t.memoizedState)||(So=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.eagerReducer=e,n.eagerState=o}return[t.memoizedState,n.dispatch]}function no(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===zi?(zi={lastEffect:null}).lastEffect=e.next=e:null===(t=zi.lastEffect)?zi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,zi.lastEffect=e),e}function ro(e,t,n,r){var i=Ji();Qi|=e,i.memoizedState=no(t,n,void 0,void 0===r?null:r)}function io(e,t,n,r){var i=Zi();r=void 0===r?null:r;var o=void 0;if(null!==Fi){var a=Fi.memoizedState;if(o=a.destroy,null!==r&&Yi(r,a.deps))return void no(ki,n,o,r)}Qi|=e,i.memoizedState=no(t,n,o,r)}function oo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ao(){}function so(e,t,n){25>Gi||a("301");var r=e.alternate;if(e===Li||null!==r&&r===Li)if(Wi=!0,e={expirationTime:Mi,action:n,eagerReducer:null,eagerState:null,next:null},null===Ki&&(Ki=new Map),void 0===(n=Ki.get(t)))Ki.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{za();var i=Ss(),o={expirationTime:i=Ya(i,e),action:n,eagerReducer:null,eagerState:null,next:null},s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.eagerReducer))try{var c=t.eagerState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Jt(l,c))return}catch(h){}Ja(e,i)}}var uo={readContext:jo,useCallback:Hi,useContext:Hi,useEffect:Hi,useImperativeHandle:Hi,useLayoutEffect:Hi,useMemo:Hi,useReducer:Hi,useRef:Hi,useState:Hi,useDebugValue:Hi},co={readContext:jo,useCallback:function(e,t){return Ji().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:function(e,t){return ro(516,Oi|Pi,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ro(4,Di|xi,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ro(4,Di|xi,e,t)},useMemo:function(e,t){var n=Ji();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,eagerReducer:e,eagerState:t}).dispatch=so.bind(null,Li,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ji().memoizedState=e},useState:function(e){var t=Ji();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,eagerReducer:eo,eagerState:e}).dispatch=so.bind(null,Li,e),[t.memoizedState,e]},useDebugValue:ao},lo={readContext:jo,useCallback:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:jo,useEffect:function(e,t){return io(516,Oi|Pi,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,io(4,Di|xi,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4,Di|xi,e,t)},useMemo:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:to,useRef:function(){return Zi().memoizedState},useState:function(e){return to(eo)},useDebugValue:ao},ho=null,fo=null,po=!1;function mo(e,t){var n=Wr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function yo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function go(e){if(po){var t=fo;if(t){var n=t;if(!yo(e,t)){if(!(t=Tr(n))||!yo(e,t))return e.effectTag|=2,po=!1,void(ho=e);mo(ho,n)}ho=e,fo=Cr(t)}else e.effectTag|=2,po=!1,ho=e}}function vo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;ho=e}function bo(e){if(e!==ho)return!1;if(!po)return vo(e),po=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vr(t,e.memoizedProps))for(t=fo;t;)mo(e,t),t=Tr(t);return vo(e),fo=ho?Tr(e.stateNode):null,!0}function wo(){fo=ho=null,po=!1}var Eo=Qe.ReactCurrentOwner,So=!1;function To(e,t,n,r){t.child=null===e?yi(t,null,n,r):mi(t,e.child,n,r)}function Co(e,t,n,r,i){n=n.render;var o=t.ref;return Vo(t,i),r=Xi(e,t,n,r,o,i),null===e||So?(t.effectTag|=1,To(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oo(e,t,i))}function Io(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Kr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ko(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Oo(e,t,o):(t.effectTag|=1,(e=Gr(a,r)).ref=t.ref,e.return=t,t.child=e)}function ko(e,t,n,r,i,o){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(So=!1,i<o)?Oo(e,t,o):Do(e,t,n,r,o)}function _o(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Do(e,t,n,r,i){var o=Rr(n)?Pr:Ar.current;return o=Or(t,o),Vo(t,i),n=Xi(e,t,n,r,o,i),null===e||So?(t.effectTag|=1,To(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oo(e,t,i))}function No(e,t,n,r,i){if(Rr(n)){var o=!0;qr(t)}else o=!1;if(Vo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ui(t,n,r),li(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=jo(c):c=Or(t,c=Rr(n)?Pr:Ar.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&ci(t,a,r,c),Go=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(na(t,d,r,a,i),u=t.memoizedState),s!==r||f!==u||xr.current||Go?("function"===typeof l&&(oi(t,n,l,r),u=t.memoizedState),(s=Go||si(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:ri(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=jo(c):c=Or(t,c=Rr(n)?Pr:Ar.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&ci(t,a,r,c),Go=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(na(t,d,r,a,i),f=t.memoizedState),s!==r||u!==f||xr.current||Go?("function"===typeof l&&(oi(t,n,l,r),f=t.memoizedState),(l=Go||si(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Ao(e,t,n,r,o,i)}function Ao(e,t,n,r,i,o){_o(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&Br(t,n,!1),Oo(e,t,o);r=t.stateNode,Eo.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=mi(t,e.child,null,o),t.child=mi(t,null,s,o)):To(e,t,s,o),t.memoizedState=r.state,i&&Br(t,n,!0),t.child}function xo(e){var t=e.stateNode;t.pendingContext?Fr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fr(0,t.context,!1),Si(e,t.containerInfo)}function Po(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0===(64&t.effectTag)){o=null;var a=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var s=i.fallback;e=Yr(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Yr(s,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=yi(t,null,i.children,n);else null!==e.memoizedState?(s=(r=e.child).sibling,a?(n=i.fallback,i=Gr(r,r.pendingProps),0===(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=a)),r=i.sibling=Gr(s,n,s.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=mi(t,r.child,i.children,n)):(s=e.child,a?(a=i.fallback,(i=Yr(null,r,0,null)).child=s,0===(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Yr(a,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=mi(t,s,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Oo(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=Gr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Ro(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||xr.current)So=!0;else if(r<n){switch(So=!1,t.tag){case 3:xo(t),wo();break;case 5:Ci(t);break;case 1:Rr(t.type)&&qr(t);break;case 4:Si(t,t.stateNode.containerInfo);break;case 10:qo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Po(e,t,n):null!==(t=Oo(e,t,n))?t.sibling:null}return Oo(e,t,n)}}else So=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Or(t,Ar.current);if(Vo(t,n),i=Xi(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,$i(),Rr(r)){var o=!0;qr(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&oi(t,r,s,e),i.updater=ai,t.stateNode=i,i._reactInternalFiber=t,li(t,r,e,n),t=Ao(null,t,r,!0,o,n)}else t.tag=0,To(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"===typeof e)return Kr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),o=ri(e,o),s=void 0,i){case 0:s=Do(null,t,e,o,n);break;case 1:s=No(null,t,e,o,n);break;case 11:s=Co(null,t,e,o,n);break;case 14:s=Io(null,t,e,ri(e.type,o),r,n);break;default:a("306",e,"")}return s;case 0:return r=t.type,i=t.pendingProps,Do(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return xo(t),null===(r=t.updateQueue)&&a("282"),i=null!==(i=t.memoizedState)?i.element:null,na(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(wo(),t=Oo(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(fo=Cr(t.stateNode.containerInfo),ho=t,i=po=!0),i?(t.effectTag|=2,t.child=yi(t,null,r,n)):(To(e,t,r,n),wo()),t=t.child),t;case 5:return Ci(t),null===e&&go(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,vr(r,i)?s=null:null!==o&&vr(r,o)&&(t.effectTag|=16),_o(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(To(e,t,s,n),t=t.child),t;case 6:return null===e&&go(t),null;case 13:return Po(e,t,n);case 4:return Si(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):To(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,qo(t,o=i.value),null!==s){var u=s.value;if(0===(o=Jt(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!xr.current){t=Oo(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.contextDependencies;if(null!==c){s=u.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=Xo(n)).tag=Wo,Jo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var h=u.return;null!==h;){var f=h.alternate;if(h.childExpirationTime<l)h.childExpirationTime=l,null!==f&&f.childExpirationTime<l&&(f.childExpirationTime=l);else{if(!(null!==f&&f.childExpirationTime<l))break;f.childExpirationTime=l}h=h.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}To(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Vo(t,n),r=r(i=jo(i,o.unstable_observedBits)),t.effectTag|=1,To(e,t,r,n),t.child;case 14:return o=ri(i=t.type,t.pendingProps),Io(e,t,i,o=ri(i.type,o),r,n);case 15:return ko(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rr(r)?(e=!0,qr(t)):e=!1,Vo(t,n),ui(t,r,i),li(t,r,i,n),Ao(null,t,r,!0,e,n)}a("156")}var Mo={current:null},Lo=null,Fo=null,Uo=null;function qo(e,t){var n=e.type._context;Dr(Mo,n._currentValue),n._currentValue=t}function Bo(e){var t=Mo.current;_r(Mo),e.type._context._currentValue=t}function Vo(e,t){Lo=e,Uo=Fo=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(So=!0),e.contextDependencies=null}function jo(e,t){return Uo!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(Uo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Fo?(null===Lo&&a("308"),Fo=t,Lo.contextDependencies={first:t,expirationTime:0}):Fo=Fo.next=t),e._currentValue}var zo=0,Qo=1,Wo=2,Ko=3,Go=!1;function Ho(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xo(e){return{expirationTime:e,tag:zo,payload:null,callback:null,next:null,nextEffect:null}}function $o(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Jo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Ho(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Ho(e.memoizedState),i=n.updateQueue=Ho(n.memoizedState)):r=e.updateQueue=Yo(i):null===i&&(i=n.updateQueue=Yo(r));null===i||r===i?$o(r,t):null===r.lastUpdate||null===i.lastUpdate?($o(r,t),$o(i,t)):($o(r,t),i.lastUpdate=t)}function Zo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Ho(e.memoizedState):ea(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ea(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Yo(t)),t}function ta(e,t,n,r,o,a){switch(n.tag){case Qo:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case Ko:e.effectTag=-2049&e.effectTag|64;case zo:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case Wo:Go=!0}return r}function na(e,t,n,r,i){Go=!1;for(var o=(t=ea(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(c=ta(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=ta(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=s,e.memoizedState=c}function ra(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ia(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ia(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ia(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function oa(e,t){return{value:e,source:t,stack:ut(t)}}function aa(e){e.effectTag|=4}var sa=void 0,ua=void 0,ca=void 0,la=void 0;sa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ua=function(){},ca=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s=t.stateNode;switch(Ei(vi.current),e=null,n){case"input":a=bt(s,a),r=bt(s,r),e=[];break;case"option":a=Gn(s,a),r=Gn(s,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Yn(s,a),r=Yn(s,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(s.onclick=pr)}hr(n,r),s=n=void 0;var u=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var c=a[n];for(s in c)c.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(u||(u={}),u[s]=l[s])}else u||(e||(e=[]),e.push(n,u)),u=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(n,""+l)):"children"===n?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=l&&dr(o,n),e||c===l||(e=[])):(e=e||[]).push(n,l))}u&&(e=e||[]).push("style",u),o=e,(t.updateQueue=o)&&aa(t)}},la=function(e,t,n,r){n!==r&&aa(t)};var ha="function"===typeof WeakSet?WeakSet:Set;function fa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ut(n)),null!==n&&st(n.type),t=t.value,null!==e&&1===e.tag&&st(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function da(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Ha(e,n)}else t.current=null}function pa(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==ki){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==ki&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ma(e){switch("function"===typeof jr&&jr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(o){Ha(i,o)}}n=n.next}while(n!==t)}break;case 1:if(da(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Ha(e,o)}break;case 5:da(e);break;case 4:va(e)}}function ya(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ya(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(or(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ya(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,s=i.stateNode,u=n;8===o.nodeType?o.parentNode.insertBefore(s,u):o.insertBefore(s,u)}else t.insertBefore(i.stateNode,n);else r?(s=t,u=i.stateNode,8===s.nodeType?(o=s.parentNode).insertBefore(u,s):(o=s).appendChild(u),null!==(s=s._reactRootContainer)&&void 0!==s||null!==o.onclick||(o.onclick=pr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function va(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,s=o;;)if(ma(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===o)break;for(;null===s.sibling;){if(null===s.return||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(o=r,s=t.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(ma(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:pa(Di,Ni,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i){e[R]=i,"input"===n&&"radio"===i.type&&null!=i.name&&Et(e,i),fr(n,r),r=fr(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?cr(e,s):"dangerouslySetInnerHTML"===a?ir(e,s):"children"===a?or(e,s):gt(e,a,s,r)}switch(n){case"input":St(e,i);break;case"textarea":$n(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Hn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Hn(e,!!i.multiple,i.defaultValue,!0):Hn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,e,r)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Ss())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=ur("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var s=t.stateNode;null===s&&(s=t.stateNode=new ha),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Ya(t=Ss(),e),null!==(e=$a(e,t))&&(Zr(e,t),0!==(t=e.expirationTime)&&Ts(e,t))}.bind(null,t,e);s.has(e)||(s.add(e),e.then(n,n))})}break;case 17:break;default:a("163")}}var wa="function"===typeof WeakMap?WeakMap:Map;function Ea(e,t,n){(n=Xo(n)).tag=Ko,n.payload={element:null};var r=t.value;return n.callback=function(){Ps(r),fa(e,t)},n}function Sa(e,t,n){(n=Xo(n)).tag=Ko;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ua?Ua=new Set([this]):Ua.add(this));var n=t.value,i=t.stack;fa(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function Ta(e){switch(e.tag){case 1:Rr(e.type)&&Mr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return Ti(),Lr(),0!==(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return Ii(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return Ti(),null;case 10:return Bo(e),null;default:return null}}var Ca=Qe.ReactCurrentDispatcher,Ia=Qe.ReactCurrentOwner,ka=1073741822,_a=!1,Da=null,Na=null,Aa=0,xa=-1,Pa=!1,Oa=null,Ra=!1,Ma=null,La=null,Fa=null,Ua=null;function qa(){if(null!==Da)for(var e=Da.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Mr();break;case 3:Ti(),Lr();break;case 5:Ii(t);break;case 4:Ti();break;case 10:Bo(t)}e=e.return}Na=null,Aa=0,xa=-1,Pa=!1,Da=null}function Ba(){for(;null!==Oa;){var e=Oa.effectTag;if(16&e&&or(Oa.stateNode,""),128&e){var t=Oa.alternate;null!==t&&(null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null))}switch(14&e){case 2:ga(Oa),Oa.effectTag&=-3;break;case 6:ga(Oa),Oa.effectTag&=-3,ba(Oa.alternate,Oa);break;case 4:ba(Oa.alternate,Oa);break;case 8:va(e=Oa),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Oa=Oa.nextEffect}}function Va(){for(;null!==Oa;){if(256&Oa.effectTag)e:{var e=Oa.alternate,t=Oa;switch(t.tag){case 0:case 11:case 15:pa(_i,ki,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Oa=Oa.nextEffect}}function ja(e,t){for(;null!==Oa;){var n=Oa.effectTag;if(36&n){var r=Oa.alternate,i=Oa,o=t;switch(i.tag){case 0:case 11:case 15:pa(Ai,xi,i);break;case 1:var s=i.stateNode;if(4&i.effectTag)if(null===r)s.componentDidMount();else{var u=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&ra(0,r,s);break;case 3:if(null!==(r=i.updateQueue)){if(s=null,null!==i.child)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}ra(0,r,s)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&gr(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(i=Oa.ref)&&(o=Oa.stateNode,"function"===typeof i?i(o):i.current=o)),512&n&&(Ma=e),Oa=Oa.nextEffect}}function za(){null!==La&&Sr(La),null!==Fa&&Fa()}function Qa(e,t){Ra=_a=!0,e.current===t&&a("177");var n=e.pendingCommitExpirationTime;0===n&&a("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Zr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,t)):t>n&&Zr(e,t)}ni(0,e)}(e,i>r?i:r),Ia.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,mr=Cn,yr=function(){var e=Ln();if(Fn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(d){t=null;break e}var o=0,a=-1,s=-1,u=0,c=0,l=e,h=null;t:for(;;){for(var f;l!==t||0!==r&&3!==l.nodeType||(a=o+r),l!==i||0!==n&&3!==l.nodeType||(s=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(f=l.firstChild);)h=l,l=f;for(;;){if(l===e)break t;if(h===t&&++u===r&&(a=o),h===i&&++c===n&&(s=o),null!==(f=l.nextSibling))break;h=(l=h).parentNode}l=f}t=-1===a||-1===s?null:{start:a,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Cn=!1,Oa=r;null!==Oa;){i=!1;var s=void 0;try{Va()}catch(c){i=!0,s=c}i&&(null===Oa&&a("178"),Ha(Oa,s),null!==Oa&&(Oa=Oa.nextEffect))}for(Oa=r;null!==Oa;){i=!1,s=void 0;try{Ba()}catch(c){i=!0,s=c}i&&(null===Oa&&a("178"),Ha(Oa,s),null!==Oa&&(Oa=Oa.nextEffect))}for(Un(yr),yr=null,Cn=!!mr,mr=null,e.current=t,Oa=r;null!==Oa;){i=!1,s=void 0;try{ja(e,n)}catch(c){i=!0,s=c}i&&(null===Oa&&a("178"),Ha(Oa,s),null!==Oa&&(Oa=Oa.nextEffect))}if(null!==r&&null!==Ma){var u=function(e,t){Fa=La=Ma=null;var n=is;is=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;pa(Oi,ki,o),pa(ki,Pi,o)}catch(u){r=!0,i=u}r&&Ha(t,i)}t=t.nextEffect}while(null!==t);is=n,0!==(n=e.expirationTime)&&Ts(e,n),ls||is||Ds(1073741823,!1)}.bind(null,e,r);La=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return Er(u)}),Fa=u}_a=Ra=!1,"function"===typeof Vr&&Vr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Ua=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Wa(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){Da=e;e:{var o=t,s=Aa,u=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rr(t.type)&&Mr();break;case 3:Ti(),Lr(),(u=t.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==o&&null!==o.child||(bo(t),t.effectTag&=-3),ua(t);break;case 5:Ii(t);var c=Ei(wi.current);if(s=t.type,null!==o&&null!=t.stateNode)ca(o,t,s,u,c),o.ref!==t.ref&&(t.effectTag|=128);else if(u){var l=Ei(vi.current);if(bo(t)){o=(u=t).stateNode;var h=u.type,f=u.memoizedProps,d=c;switch(o[O]=u,o[R]=f,s=void 0,c=h){case"iframe":case"object":In("load",o);break;case"video":case"audio":for(h=0;h<te.length;h++)In(te[h],o);break;case"source":In("error",o);break;case"img":case"image":case"link":In("error",o),In("load",o);break;case"form":In("reset",o),In("submit",o);break;case"details":In("toggle",o);break;case"input":wt(o,f),In("invalid",o),dr(d,"onChange");break;case"select":o._wrapperState={wasMultiple:!!f.multiple},In("invalid",o),dr(d,"onChange");break;case"textarea":Xn(o,f),In("invalid",o),dr(d,"onChange")}for(s in hr(c,f),h=null,f)f.hasOwnProperty(s)&&(l=f[s],"children"===s?"string"===typeof l?o.textContent!==l&&(h=["children",l]):"number"===typeof l&&o.textContent!==""+l&&(h=["children",""+l]):b.hasOwnProperty(s)&&null!=l&&dr(d,s));switch(c){case"input":je(o),Tt(o,f,!0);break;case"textarea":je(o),Jn(o);break;case"select":case"option":break;default:"function"===typeof f.onClick&&(o.onclick=pr)}s=h,u.updateQueue=s,(u=null!==s)&&aa(t)}else{f=t,o=s,d=u,h=9===c.nodeType?c:c.ownerDocument,l===Zn.html&&(l=er(o)),l===Zn.html?"script"===o?((o=h.createElement("div")).innerHTML="<script><\/script>",h=o.removeChild(o.firstChild)):"string"===typeof d.is?h=h.createElement(o,{is:d.is}):(h=h.createElement(o),"select"===o&&d.multiple&&(h.multiple=!0)):h=h.createElementNS(l,o),(o=h)[O]=f,o[R]=u,sa(o,t,!1,!1),d=o;var p=c,m=fr(h=s,f=u);switch(h){case"iframe":case"object":In("load",d),c=f;break;case"video":case"audio":for(c=0;c<te.length;c++)In(te[c],d);c=f;break;case"source":In("error",d),c=f;break;case"img":case"image":case"link":In("error",d),In("load",d),c=f;break;case"form":In("reset",d),In("submit",d),c=f;break;case"details":In("toggle",d),c=f;break;case"input":wt(d,f),c=bt(d,f),In("invalid",d),dr(p,"onChange");break;case"option":c=Gn(d,f);break;case"select":d._wrapperState={wasMultiple:!!f.multiple},c=i({},f,{value:void 0}),In("invalid",d),dr(p,"onChange");break;case"textarea":Xn(d,f),c=Yn(d,f),In("invalid",d),dr(p,"onChange");break;default:c=f}hr(h,c),l=void 0;var y=h,g=d,v=c;for(l in v)if(v.hasOwnProperty(l)){var w=v[l];"style"===l?cr(g,w):"dangerouslySetInnerHTML"===l?null!=(w=w?w.__html:void 0)&&ir(g,w):"children"===l?"string"===typeof w?("textarea"!==y||""!==w)&&or(g,w):"number"===typeof w&&or(g,""+w):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?null!=w&&dr(p,l):null!=w&&gt(g,l,w,m))}switch(h){case"input":je(d),Tt(d,f,!1);break;case"textarea":je(d),Jn(d);break;case"option":null!=f.value&&d.setAttribute("value",""+vt(f.value));break;case"select":(c=d).multiple=!!f.multiple,null!=(d=f.value)?Hn(c,!!f.multiple,d,!1):null!=f.defaultValue&&Hn(c,!!f.multiple,f.defaultValue,!0);break;default:"function"===typeof c.onClick&&(d.onclick=pr)}(u=gr(s,u))&&aa(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:o&&null!=t.stateNode?la(o,t,o.memoizedProps,u):("string"!==typeof u&&(null===t.stateNode&&a("166")),o=Ei(wi.current),Ei(vi.current),bo(t)?(s=(u=t).stateNode,o=u.memoizedProps,s[O]=u,(u=s.nodeValue!==o)&&aa(t)):(s=t,(u=(9===o.nodeType?o:o.ownerDocument).createTextNode(u))[O]=t,s.stateNode=u));break;case 11:break;case 13:if(u=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=s,Da=t;break e}u=null!==u,s=null!==o&&null!==o.memoizedState,null!==o&&!u&&s&&(null!==(o=o.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=o,o.nextEffect=c):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(u||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Ti(),ua(t);break;case 10:Bo(t);break;case 9:case 14:break;case 17:Rr(t.type)&&Mr();break;case 18:break;default:a("156")}Da=null}if(t=e,1===Aa||1!==t.childExpirationTime){for(u=0,s=t.child;null!==s;)(o=s.expirationTime)>u&&(u=o),(c=s.childExpirationTime)>u&&(u=c),s=s.sibling;t.childExpirationTime=u}if(null!==Da)return Da;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Ta(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ka(e){var t=Ro(e.alternate,e,Aa);return e.memoizedProps=e.pendingProps,null===t&&(t=Wa(e)),Ia.current=null,t}function Ga(e,t){_a&&a("243"),za(),_a=!0;var n=Ca.current;Ca.current=uo;var r=e.nextExpirationTimeToWorkOn;r===Aa&&e===Na&&null!==Da||(qa(),Aa=r,Da=Gr((Na=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Da&&!ks();)Da=Ka(Da);else for(;null!==Da;)Da=Ka(Da)}catch(g){if(Uo=Fo=Lo=null,$i(),null===Da)i=!0,Ps(g);else{null===Da&&a("271");var o=Da,s=o.return;if(null!==s){e:{var u=e,c=s,l=o,h=g;if(s=Aa,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==h&&"object"===typeof h&&"function"===typeof h.then){var f=h;h=c;var d=-1,p=-1;do{if(13===h.tag){var m=h.alternate;if(null!==m&&null!==(m=m.memoizedState)){p=10*(1073741822-m.timedOutAt);break}"number"===typeof(m=h.pendingProps.maxDuration)&&(0>=m?d=0:(-1===d||m<d)&&(d=m))}h=h.return}while(null!==h);h=c;do{if((m=13===h.tag)&&(m=void 0!==h.memoizedProps.fallback&&null===h.memoizedState),m){if(null===(c=h.updateQueue)?((c=new Set).add(f),h.updateQueue=c):c.add(f),0===(1&h.mode)){h.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((s=Xo(1073741823)).tag=Wo,Jo(l,s))),l.expirationTime=1073741823;break e}c=s;var y=(l=u).pingCache;null===y?(y=l.pingCache=new wa,m=new Set,y.set(f,m)):void 0===(m=y.get(f))&&(m=new Set,y.set(f,m)),m.has(c)||(m.add(c),l=Xa.bind(null,l,f,c),f.then(l,l)),-1===d?u=1073741823:(-1===p&&(p=10*(1073741822-ti(u,s))-5e3),u=p+d),0<=u&&xa<u&&(xa=u),h.effectTag|=2048,h.expirationTime=s;break e}h=h.return}while(null!==h);h=Error((st(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ut(l))}Pa=!0,h=oa(h,l),u=c;do{switch(u.tag){case 3:u.effectTag|=2048,u.expirationTime=s,Zo(u,s=Ea(u,h,s));break e;case 1:if(d=h,p=u.type,l=u.stateNode,0===(64&u.effectTag)&&("function"===typeof p.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===Ua||!Ua.has(l)))){u.effectTag|=2048,u.expirationTime=s,Zo(u,s=Sa(u,d,s));break e}}u=u.return}while(null!==u)}Da=Wa(o);continue}i=!0,Ps(g)}}break}if(_a=!1,Ca.current=n,Uo=Fo=Lo=null,$i(),i)Na=null,e.finishedWork=null;else if(null!==Da)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),Na=null,Pa){if(i=e.latestPendingTime,o=e.latestSuspendedTime,s=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==s&&s<r)return ei(e,r),void Es(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Es(e,n,r,t,-1)}t&&-1!==xa?(ei(e,r),(t=10*(1073741822-ti(e,r)))<xa&&(xa=t),t=10*(1073741822-Ss()),t=xa-t,Es(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Ha(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ua||!Ua.has(r)))return Jo(n,e=Sa(n,e=oa(t,e),1073741823)),void Ja(n,1073741823);break;case 3:return Jo(n,e=Ea(n,e=oa(t,e),1073741823)),void Ja(n,1073741823)}n=n.return}3===e.tag&&(Jo(e,n=Ea(e,n=oa(t,e),1073741823)),Ja(e,1073741823))}function Ya(e,t){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(_a&&!Ra)r=Aa;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:a("313")}null!==Na&&r===Aa&&--r}return n===o.unstable_UserBlockingPriority&&(0===ss||r<ss)&&(ss=r),r}function Xa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Na&&Aa===n?Na=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&Ts(e,n)))}function $a(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Ja(e,t){null!==(e=$a(e,t))&&(!_a&&0!==Aa&&t>Aa&&qa(),Zr(e,t),_a&&!Ra&&Na===e||Ts(e,e.expirationTime),gs>ys&&(gs=0,a("185")))}function Za(e,t,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var es=null,ts=null,ns=0,rs=void 0,is=!1,os=null,as=0,ss=0,us=!1,cs=null,ls=!1,hs=!1,fs=null,ds=o.unstable_now(),ps=1073741822-(ds/10|0),ms=ps,ys=50,gs=0,vs=null;function bs(){ps=1073741822-((o.unstable_now()-ds)/10|0)}function ws(e,t){if(0!==ns){if(t<ns)return;null!==rs&&o.unstable_cancelCallback(rs)}ns=t,e=o.unstable_now()-ds,rs=o.unstable_scheduleCallback(_s,{timeout:10*(1073741822-t)-e})}function Es(e,t,n,r,i){e.expirationTime=r,0!==i||ks()?0<i&&(e.timeoutHandle=br(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,bs(),ms=ps,Ns(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Ss(){return is?ms:(Cs(),0!==as&&1!==as||(bs(),ms=ps),ms)}function Ts(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ts?(es=ts=e,e.nextScheduledRoot=e):(ts=ts.nextScheduledRoot=e).nextScheduledRoot=es):t>e.expirationTime&&(e.expirationTime=t),is||(ls?hs&&(os=e,as=1073741823,As(e,1073741823,!1)):1073741823===t?Ds(1073741823,!1):ws(e,t))}function Cs(){var e=0,t=null;if(null!==ts)for(var n=ts,r=es;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ts)&&a("244"),r===r.nextScheduledRoot){es=ts=r.nextScheduledRoot=null;break}if(r===es)es=i=r.nextScheduledRoot,ts.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ts){(ts=n).nextScheduledRoot=es,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ts)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}os=t,as=e}var Is=!1;function ks(){return!!Is||!!o.unstable_shouldYield()&&(Is=!0)}function _s(){try{if(!ks()&&null!==es){bs();var e=es;do{var t=e.expirationTime;0!==t&&ps<=t&&(e.nextExpirationTimeToWorkOn=ps),e=e.nextScheduledRoot}while(e!==es)}Ds(0,!0)}finally{Is=!1}}function Ds(e,t){if(Cs(),t)for(bs(),ms=ps;null!==os&&0!==as&&e<=as&&!(Is&&ps>as);)As(os,as,ps>as),Cs(),bs(),ms=ps;else for(;null!==os&&0!==as&&e<=as;)As(os,as,!1),Cs();if(t&&(ns=0,rs=null),0!==as&&ws(os,as),gs=0,vs=null,null!==fs)for(e=fs,fs=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){us||(us=!0,cs=r)}}if(us)throw e=cs,cs=null,us=!1,e}function Ns(e,t){is&&a("253"),os=e,as=t,As(e,t,!1),Ds(1073741823,!1)}function As(e,t,n){if(is&&a("245"),is=!0,n){var r=e.finishedWork;null!==r?xs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,wr(r)),Ga(e,n),null!==(r=e.finishedWork)&&(ks()?e.finishedWork=r:xs(e,r,t)))}else null!==(r=e.finishedWork)?xs(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,wr(r)),Ga(e,n),null!==(r=e.finishedWork)&&xs(e,r,t));is=!1}function xs(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===fs?fs=[r]:fs.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===vs?gs++:(vs=e,gs=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Qa(e,t)})}function Ps(e){null===os&&a("246"),os.expirationTime=0,us||(us=!0,cs=e)}function Os(e,t){var n=ls;ls=!0;try{return e(t)}finally{(ls=n)||is||Ds(1073741823,!1)}}function Rs(e,t){if(ls&&!hs){hs=!0;try{return e(t)}finally{hs=!1}}return e(t)}function Ms(e,t,n){ls||is||0===ss||(Ds(ss,!1),ss=0);var r=ls;ls=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(ls=r)||is||Ds(1073741823,!1)}}function Ls(e,t,n,r,i){var o=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a("170");var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Rr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===n.tag){var u=n.type;if(Rr(u)){n=Ur(n,u,s);break e}}n=s}else n=Nr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Xo(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),za(),Jo(o,i),Ja(o,r),r}function Fs(e,t,n,r){var i=t.current;return Ls(e,t,n,i=Ya(Ss(),i),r)}function Us(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function qs(e){var t=1073741822-25*(1+((1073741822-Ss()+500)/25|0));t>=ka&&(t=ka-1),this._expirationTime=ka=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Vs(e,t,n){e={current:t=Wr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function js(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zs(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"===typeof i){var a=i;i=function(){var e=Us(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Vs(e,!1,t)}(n,r),"function"===typeof i){var s=i;i=function(){var e=Us(o._internalRoot);s.call(e)}}Rs(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Us(o._internalRoot)}function Qs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return js(t)||a("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:He,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ke=function(e,t,n){switch(t){case"input":if(St(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=U(r);i||a("90"),ze(r),St(r,i)}}}break;case"textarea":$n(e,n);break;case"select":null!=(t=n.value)&&Hn(e,!!n.multiple,t,!1)}},qs.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Bs;return Ls(e,t,null,n,r._onCommit),r},qs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},qs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&a("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Ns(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},qs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Bs.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Bs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&a("191",n),n()}}},Vs.prototype.render=function(e,t){var n=this._internalRoot,r=new Bs;return null!==(t=void 0===t?null:t)&&r.then(t),Fs(e,n,null,r._onCommit),r},Vs.prototype.unmount=function(e){var t=this._internalRoot,n=new Bs;return null!==(e=void 0===e?null:e)&&n.then(e),Fs(null,t,null,n._onCommit),n},Vs.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new Bs;return null!==(n=void 0===n?null:n)&&i.then(n),Fs(t,r,e,i._onCommit),i},Vs.prototype.createBatch=function(){var e=new qs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Pe=Os,Oe=Ms,Re=function(){is||0===ss||(Ds(ss,!1),ss=0)};var Ws={createPortal:Qs,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return js(t)||a("200"),zs(null,e,t,!0,n)},render:function(e,t,n){return js(t)||a("200"),zs(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return js(n)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),zs(e,t,n,!1,r)},unmountComponentAtNode:function(e){return js(e)||a("40"),!!e._reactRootContainer&&(Rs(function(){zs(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Qs.apply(void 0,arguments)},unstable_batchedUpdates:Os,unstable_interactiveUpdates:Ms,flushSync:function(e,t){is&&a("187");var n=ls;ls=!0;try{return Za(e,t)}finally{ls=n,Ds(1073741823,!1)}},unstable_createRoot:function(e,t){return js(e)||a("299","unstable_createRoot"),new Vs(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=ls;ls=!0;try{Za(e)}finally{(ls=t)||is||Ds(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[L,F,U,N.injectEventPluginsByName,v,Q,function(e){k(e,z)},Ae,xe,Dn,x]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Vr=zr(function(e){return t.onCommitFiberRoot(n,e)}),jr=zr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(i({},e,{overrideProps:null,currentDispatcherRef:Qe.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:M,bundleType:0,version:"16.8.4",rendererPackageName:"react-dom"});var Ks={default:Ws},Gs=Ks&&Ws||Ks;e.exports=Gs.default||Gs},function(e,t,n){"use strict";e.exports=n(59)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,a=-1,s=!1,u=!1;function c(){if(!s){var e=n.expirationTime;u?T():u=!0,S(f,e)}}function l(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,s=a;i=e,a=t;try{var u=r()}finally{i=o,a=s}if("function"===typeof u)if(u={callback:u,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=u.next=u.previous=u;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=u,c()),(t=r.previous).next=r.previous=u,u.next=r,u.previous=t}}function h(){if(-1===o&&null!==n&&1===n.priorityLevel){s=!0;try{do{l()}while(null!==n&&1===n.priorityLevel)}finally{s=!1,null!==n?c():u=!1}}}function f(e){s=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{l()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{l()}while(null!==n&&!C())}finally{s=!1,r=i,null!==n?c():u=!1,h()}}var d,p,m=Date,y="function"===typeof setTimeout?setTimeout:void 0,g="function"===typeof clearTimeout?clearTimeout:void 0,v="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function w(e){d=v(function(t){g(p),e(t)}),p=y(function(){b(d),e(t.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var E=performance;t.unstable_now=function(){return E.now()}}else t.unstable_now=function(){return m.now()};var S,T,C,I=null;if("undefined"!==typeof window?I=window:"undefined"!==typeof e&&(I=e),I&&I._schedMock){var k=I._schedMock;S=k[0],T=k[1],C=k[2],t.unstable_now=k[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var _=null,D=function(e){if(null!==_)try{_(e)}finally{_=null}};S=function(e){null!==_?setTimeout(S,0,e):(_=e,setTimeout(D,0,!1))},T=function(){_=null},C=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof v&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var N=null,A=!1,x=-1,P=!1,O=!1,R=0,M=33,L=33;C=function(){return R<=t.unstable_now()};var F=new MessageChannel,U=F.port2;F.port1.onmessage=function(){A=!1;var e=N,n=x;N=null,x=-1;var r=t.unstable_now(),i=!1;if(0>=R-r){if(!(-1!==n&&n<=r))return P||(P=!0,w(q)),N=e,void(x=n);i=!0}if(null!==e){O=!0;try{e(i)}finally{O=!1}}};var q=function e(t){if(null!==N){w(e);var n=t-R+L;n<L&&M<L?(8>n&&(n=8),L=n<M?M:n):M=n,R=t+L,A||(A=!0,U.postMessage(void 0))}else P=!1};S=function(e,t){N=e,x=t,O||0>t?U.postMessage(void 0):P||(P=!0,w(q))},T=function(){N=null,A=!1,x=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,a=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=a,h()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,a=o;i=n,o=t.unstable_now();try{return e()}finally{i=r,o=a,h()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==o?o:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=a+r.timeout;else switch(i){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{a=null;var s=n;do{if(s.expirationTime>r){a=s;break}s=s.next}while(s!==n);null===a?a=n:a===n&&(n=e,c()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,a=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=a,h()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||C())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(13))},,function(e,t,n){"use strict";n.r(t);n(62),n(63),n(67),n(73),n(75),n(80),n(85),n(88),n(100)},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=s(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=u(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),c(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];b.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=y,e.Response=b,e.fetch=function(e,n){return new Promise(function(r,i){var o=new y(e,n),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:v(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new b(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"===typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!==typeof e&&(e=String(e)),e}function c(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=f(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e,t){var n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return o.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function b(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";(function(e,t){function n(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var r=setTimeout;function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void u(t.promise,i)}s(t.promise,r)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===typeof t||"function"===typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"===typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(a){u(e,a)}var r,i}function u(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(r){if(n)return;n=!0,u(t,r)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new l(e,t,n)),n},o.prototype.finally=n,o.all=function(e){return new o(function(t,n){if(!e||"undefined"===typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"===typeof a||"function"===typeof a)){var s=a.then;if("function"===typeof s)return void s.call(a,function(t){o(e,t)},n)}r[e]=a,0===--i&&t(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)o(a,r[a])})},o.resolve=function(e){return e&&"object"===typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},o._immediateFn="function"===typeof e&&function(t){e(t)}||function(e){r(e,0)},o._unhandledRejectionFn=function(e){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var f=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();"Promise"in f?f.Promise.prototype.finally||(f.Promise.prototype.finally=n):f.Promise=o}).call(this,n(64).setImmediate,n(13))},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(65),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(13))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(13),n(66))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){n(68),e.exports=n(2).Array.find},function(e,t,n){"use strict";var r=n(9),i=n(47)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(34)("find")},function(e,t,n){e.exports=n(24)("native-function-to-string",Function.toString)},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(72);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(48),o=n(1)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){n(74),e.exports=n(2).Array.findIndex},function(e,t,n){"use strict";var r=n(9),i=n(47)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(34)(o)},function(e,t,n){n(76),e.exports=n(2).Object.assign},function(e,t,n){var r=n(9);r(r.S+r.F,"Object",{assign:n(77)})},function(e,t,n){"use strict";var r=n(21),i=n(37),o=n(28),a=n(32),s=n(31),u=Object.assign;e.exports=!u||n(17)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var f,d=s(arguments[c++]),p=l?r(d).concat(l(d)):r(d),m=p.length,y=0;m>y;)h.call(d,f=p[y++])&&(n[f]=d[f]);return n}:u},function(e,t,n){var r=n(16),i=n(33),o=n(79);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(27),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){n(81),e.exports=n(2).String.startsWith},function(e,t,n){"use strict";var r=n(9),i=n(33),o=n(82),a="".startsWith;r(r.P+r.F*n(84)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(83),i=n(20);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(11),i=n(26),o=n(1)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(1)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(i){}}return!0}},function(e,t,n){n(86),e.exports=n(2).String.repeat},function(e,t,n){var r=n(9);r(r.P,"String",{repeat:n(87)})},function(e,t,n){"use strict";var r=n(27),i=n(20);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){n(89),n(96),n(98),n(99),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(3),i=n(12),o=n(15),a=n(9),s=n(18),u=n(90).KEY,c=n(17),l=n(24),h=n(38),f=n(19),d=n(1),p=n(39),m=n(40),y=n(91),g=n(48),v=n(22),b=n(11),w=n(16),E=n(30),S=n(23),T=n(50),C=n(94),I=n(95),k=n(14),_=n(21),D=I.f,N=k.f,A=C.f,x=r.Symbol,P=r.JSON,O=P&&P.stringify,R=d("_hidden"),M=d("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),q=l("op-symbols"),B=Object.prototype,V="function"==typeof x,j=r.QObject,z=!j||!j.prototype||!j.prototype.findChild,Q=o&&c(function(){return 7!=T(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=D(B,t);r&&delete B[t],N(e,t,n),r&&e!==B&&N(B,t,r)}:N,W=function(e){var t=U[e]=T(x.prototype);return t._k=e,t},K=V&&"symbol"==typeof x.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof x},G=function(e,t,n){return e===B&&G(q,t,n),v(e),t=E(t,!0),v(n),i(U,t)?(n.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),n=T(n,{enumerable:S(0,!1)})):(i(e,R)||N(e,R,S(1,{})),e[R][t]=!0),Q(e,t,n)):N(e,t,n)},H=function(e,t){v(e);for(var n,r=y(t=w(t)),i=0,o=r.length;o>i;)G(e,n=r[i++],t[n]);return e},Y=function(e){var t=L.call(this,e=E(e,!0));return!(this===B&&i(U,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,R)&&this[R][e])||t)},X=function(e,t){if(e=w(e),t=E(t,!0),e!==B||!i(U,t)||i(q,t)){var n=D(e,t);return!n||!i(U,t)||i(e,R)&&e[R][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=A(w(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==R||t==u||r.push(t);return r},J=function(e){for(var t,n=e===B,r=A(n?q:w(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(B,t)||o.push(U[t]);return o};V||(s((x=function(){if(this instanceof x)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0);return o&&z&&Q(B,e,{configurable:!0,set:function t(n){this===B&&t.call(q,n),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),Q(this,e,S(1,n))}}),W(e)}).prototype,"toString",function(){return this._k}),I.f=X,k.f=G,n(51).f=C.f=$,n(28).f=Y,n(37).f=J,o&&!n(25)&&s(B,"propertyIsEnumerable",Y,!0),p.f=function(e){return W(d(e))}),a(a.G+a.W+a.F*!V,{Symbol:x});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=_(d.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!V,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=x(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!V,"Object",{create:function(e,t){return void 0===t?T(e):H(T(e),t)},defineProperty:G,defineProperties:H,getOwnPropertyDescriptor:X,getOwnPropertyNames:$,getOwnPropertySymbols:J}),P&&a(a.S+a.F*(!V||c(function(){var e=x();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,O.apply(P,r)}}),x.prototype[M]||n(10)(x.prototype,M,x.prototype.valueOf),h(x,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(19)("meta"),i=n(11),o=n(12),a=n(14).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(17)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){var r=n(21),i=n(37),o=n(28);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(14),i=n(22),o=n(21);e.exports=n(15)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(16),i=n(51).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(28),i=n(23),o=n(16),a=n(30),s=n(12),u=n(44),c=Object.getOwnPropertyDescriptor;t.f=n(15)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r=n(97),i={};i[n(1)("toStringTag")]="z",i+""!="[object z]"&&n(18)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(26),i=n(1)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){n(40)("asyncIterator")},function(e,t,n){n(40)("observable")},function(e,t,n){n(101),n(105),e.exports=n(39).f("iterator")},function(e,t,n){"use strict";var r=n(102)(!0);n(52)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(27),i=n(20);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(50),i=n(23),o=n(38),a={};n(10)(a,n(1)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(12),i=n(32),o=n(35)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){for(var r=n(106),i=n(21),o=n(18),a=n(3),s=n(10),u=n(41),c=n(1),l=c("iterator"),h=c("toStringTag"),f=u.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),m=0;m<p.length;m++){var y,g=p[m],v=d[g],b=a[g],w=b&&b.prototype;if(w&&(w[l]||s(w,l,f),w[h]||s(w,h,g),u[g]=f,v))for(y in r)w[y]||o(w,y,r[y],!0)}},function(e,t,n){"use strict";var r=n(34),i=n(107),o=n(41),a=n(16);e.exports=n(52)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(109),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!=s){var l=a<<4&240|s>>2;if(r.push(l),64!=u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}(),f=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""},d="FirebaseError",p=Error.captureStackTrace;var m=function(){return function(e,t){if(this.code=e,this.message=t,p)p(this,y.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name=d,Object.defineProperty(this,"stack",{get:function(){return n.stack}})}}}();m.prototype=Object.create(Error.prototype),m.prototype.constructor=m,m.prototype.name=d;var y=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new m(i,n);for(var a in t)t.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=t[a]);return o},e}();function g(e){return JSON.parse(e)}var v=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},b=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},w=function(e,t){return b(t,function(t,n){e[t]=n}),e},E=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},S=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return r.__extends(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},t}(function(){return function(){this.blockSize=-1}}());var T=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function C(){}function I(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.assert=o,t.assertionError=a,t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.CONSTANTS=i,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.patchProperty=function(e,t,n){e[t]=n},t.Deferred=h,t.getUA=f,t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.ErrorFactory=y,t.FirebaseError=m,t.patchCapture=function(e){var t=p;return p=e,t},t.jsonEval=g,t.stringify=function(e){return JSON.stringify(e)},t.decode=v,t.isAdmin=function(e){var t=v(e).claims;return"object"===typeof t&&!0===t.admin},t.issuedAtTime=function(e){var t=v(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t,n,r=v(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"===typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&i>=t&&i<=n},t.clone=function(e){return w({},e)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},t.extend=w,t.findKey=E,t.findValue=function(e,t,n){var r=E(e,t,n);return r&&e[r]},t.forEach=b,t.getAnyKey=function(e){for(var t in e)return t},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isNonNullObject=function(e){return"object"===typeof e&&null!==e},t.map=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.querystring=function(e){var t=[];return b(e,function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},t.Sha1=S,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.createSubscribe=function(e,t){var n=new T(e,t);return n.subscribe.bind(n)},t.errorPrefix=I,t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(I(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(I(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(I(e,t,r)+"must be a valid firebase namespace.")},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return d}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return y}),n.d(t,"__asyncGenerator",function(){return g}),n.d(t,"__asyncDelegator",function(){return v}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return w}),n.d(t,"__importStar",function(){return E}),n.d(t,"__importDefault",function(){return S});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function v(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){(function(e){!function(t){"use strict";try{(function(){var n,r;t=t&&t.hasOwnProperty("default")?t.default:t,(r=n||(n={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";var i=n.INFO,o=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case n.DEBUG:case n.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case n.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case n.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;case n.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},a=function(){function e(e){this.name=e,this._logLevel=i,this._logHandler=o}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in n))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,n.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,n.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,n.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,n.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,n.ERROR].concat(e))},e}(),s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function l(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var h,f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},d=d||{},p=f;function m(e){return"string"==typeof e}function y(e,t){e=e.split("."),t=t||p;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function g(){}function v(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function b(e){return"array"==v(e)}function w(e){var t=v(e);return"array"==t||"object"==t&&"number"==typeof e.length}function E(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var S="closure_uid_"+(1e9*Math.random()>>>0),T=0;function C(e,t,n){return e.call.apply(e.bind,arguments)}function I(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function k(e,t,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:I).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var D=Date.now||function(){return+new Date};function N(e,t){function n(){}n.prototype=t.prototype,e.S=t.prototype,e.prototype=new n,(e.prototype.constructor=e).re=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function A(){this.i=this.i,this.j=this.j}A.prototype.i=!1,A.prototype.La=function(){!this.i&&(this.i=!0,this.G(),0)&&(this[S]||(this[S]=++T))},A.prototype.G=function(){if(this.j)for(;this.j.length;)this.j.shift()()};var x=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(m(e))return m(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},P=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=m(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function O(e){return Array.prototype.concat.apply([],arguments)}function R(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function M(e){return/^[\s\xa0]*$/.test(e)}var L,F=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function U(e,t){return-1!=e.indexOf(t)}function q(e,t){return e<t?-1:t<e?1:0}e:{var B=p.navigator;if(B){var V=B.userAgent;if(V){L=V;break e}}L=""}function j(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function z(e){var t,n={};for(t in e)n[t]=e[t];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function K(e){return K[" "](e),e}K[" "]=g;var G,H,Y=U(L,"Opera"),X=U(L,"Trident")||U(L,"MSIE"),$=U(L,"Edge"),J=$||X,Z=U(L,"Gecko")&&!(U(L.toLowerCase(),"webkit")&&!U(L,"Edge"))&&!(U(L,"Trident")||U(L,"MSIE"))&&!U(L,"Edge"),ee=U(L.toLowerCase(),"webkit")&&!U(L,"Edge");function te(){var e=p.document;return e?e.documentMode:void 0}e:{var ne="",re=(H=L,Z?/rv:([^\);]+)(\)|;)/.exec(H):$?/Edge\/([\d\.]+)/.exec(H):X?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(H):ee?/WebKit\/(\S+)/.exec(H):Y?/(?:Version)[ \/]?(\S+)/.exec(H):void 0);if(re&&(ne=re?re[1]:""),X){var ie=te();if(null!=ie&&ie>parseFloat(ne)){G=String(ie);break e}}G=ne}var oe,ae={};function se(e){return t=e,n=function(){for(var t=0,n=F(String(G)).split("."),r=F(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=q(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||q(0==a[2].length,0==s[2].length)||q(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t},r=ae,Object.prototype.hasOwnProperty.call(r,t)?r[t]:r[t]=n();var t,n,r}var ue=p.document;oe=ue&&X?te()||("CSS1Compat"==ue.compatMode?parseInt(G,10):5):void 0;var ce=!X||9<=Number(oe),le=X&&!se("9"),he=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{p.addEventListener("test",g,t),p.removeEventListener("test",g,t)}catch(e){}return e}();function fe(e,t){this.type=e,this.a=this.target=t,this.b=!1,this.hc=!0}function de(e,t){fe.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.f=null,e&&this.g(e,t)}fe.prototype.c=function(){this.hc=!1},N(de,fe);var pe={2:"touch",3:"pen",4:"mouse"};de.prototype.g=function(e,t){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(Z){e:{try{K(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,this.screenY=r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=m(e.pointerType)?e.pointerType:pe[e.pointerType]||"",(this.f=e).defaultPrevented&&this.c()},de.prototype.c=function(){de.S.c.call(this);var e=this.f;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,le)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var me="closure_listenable_"+(1e6*Math.random()|0),ye=0;function ge(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ya=i,this.key=++ye,this.ja=this.oa=!1}function ve(e){this.src=e,this.a={},this.b=0}function be(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ja&&o.listener==t&&o.capture==!!n&&o.ya==r)return i}return-1}ge.prototype.a=function(){this.ja=!0,this.ya=this.src=this.proxy=this.listener=null},(h=ve.prototype).add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=be(e,t,r,i);return-1<a?(t=e[a],n||(t.oa=!1)):((t=new ge(t,this.src,o,!!r,i)).oa=n,e.push(t)),t},h.Sc=function(e,t,n,r){if((e=e.toString())in this.a){var i=this.a[e];-1<(t=be(i,t,n,r))&&(i[t].a(),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.a[e],this.b--))}},h.fc=function(e){var t=e.type;if(t in this.a){var n,r=this.a[t],i=x(r,e);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(e.a(),0==this.a[t].length&&(delete this.a[t],this.b--))}},h.Tc=function(){var e;for(e in this.a){for(var t=this.a[e],n=0;n<t.length;n++)t[n].a();delete this.a[e],this.b--}},h.Rc=function(e,t,n,r){var i=-1;return(e=this.a[e.toString()])&&(i=be(e,t,n,r)),-1<i?e[i]:null};var we="closure_lm_"+(1e6*Math.random()|0),Ee={};function Se(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(b(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Ae(r),t&&t[me]?t.Mb(n,r,E(i)?!!i.capture:!!i,o):Te(t,n,r,!0,i,o)}(e,t,n,r,i);if(b(t)){for(var o=0;o<t.length;o++)Se(e,t[o],n,r,i);return null}return n=Ae(n),e&&e[me]?e.Lb(t,n,E(r)?!!r.capture:!!r,i):Te(e,t,n,!1,r,i)}function Te(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=E(i)?!!i.capture:!!i;if(a&&!ce)return null;var s,u,c=De(e);if(c||(e[we]=c=new ve(e)),(n=c.add(t,n,r,a,o)).proxy)return n;if(s=_e,r=u=ce?function(e){return s.call(u.src,u.listener,e)}:function(e){if(!(e=s.call(u.src,u.listener,e)))return e},(n.proxy=r).src=e,r.listener=n,e.addEventListener)he||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ie(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ce(e){if("number"!=typeof e&&e&&!e.ja){var t=e.src;if(t&&t[me])t.nc(e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ie(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=De(t))?(n.fc(e),0==n.b&&(n.src=null,t[we]=null)):e.a()}}}function Ie(e){return e in Ee?Ee[e]:Ee[e]="on"+e}function ke(e,t){var n=e.listener,r=e.ya||e.src;return e.oa&&Ce(e),n.call(r,t)}function _e(e,t){return!!e.ja||ke(e,ce?new de(t,this):t=new de(t||y("window.event"),this))}function De(e){return(e=e[we])instanceof ve?e:null}var Ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(e){return"function"==v(e)?e:(e[Ne]||(e[Ne]=function(t){return e.handleEvent(t)}),e[Ne])}function xe(){A.call(this),this.c=new ve(this),(this.K=this).F=null}N(xe,A),xe.prototype[me]=!0,(h=xe.prototype).addEventListener=function(e,t,n,r){Se(this,e,t,n,r)},h.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(b(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=E(i)?!!i.capture:!!i,r=Ae(r),t&&t[me]?t.Qc(n,r,i,o):t&&(t=De(t))&&(n=t.Rc(n,r,i,o))&&Ce(n)}(this,e,t,n,r)},h.dispatchEvent=function(e){var t,n=this.F;if(n)for(t=[];n;n=n.F)t.push(n);n=this.K;var r=e.type||e;if(m(e))e=new fe(e,n);else if(e instanceof fe)e.target=e.target||n;else{var i=e;W(e=new fe(r,n),i)}if(i=!0,t)for(var o=t.length-1;!e.b&&0<=o;o--){var a=e.a=t[o];i=a.ua(r,!0,e)&&i}if(e.b||(i=(a=e.a=n).ua(r,!0,e)&&i,e.b||(i=a.ua(r,!1,e)&&i)),t)for(o=0;!e.b&&o<t.length;o++)i=(a=e.a=t[o]).ua(r,!1,e)&&i;return i},h.G=function(){xe.S.G.call(this),this.Id(),this.F=null},h.Lb=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},h.Mb=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)},h.Qc=function(e,t,n,r){this.c.Sc(String(e),t,n,r)},h.nc=function(e){this.c.fc(e)},h.Id=function(){this.c&&this.c.Tc()},h.ua=function(e,t,n){if(!(e=this.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ja&&o.capture==t){var a=o.listener,s=o.ya||o.src;o.oa&&this.nc(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.hc};var Pe=p.JSON.stringify;function Oe(e,t){this.g=100,this.c=e,this.h=t,this.b=0,this.a=null}function Re(){this.b=this.a=null}Oe.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Oe.prototype.f=function(e){this.h(e),this.b<this.g&&(this.b++,e.next=this.a,this.a=e)};var Me,Le=new Oe(function(){return new Fe},function(e){e.reset()});function Fe(){this.next=this.b=this.a=null}function Ue(e){p.setTimeout(function(){throw e},0)}Re.prototype.add=function(e,t){var n=this.c();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Re.prototype.f=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e},Re.prototype.g=function(e){Le.f(e)},Re.prototype.c=function(){return Le.get()},Fe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var qe=!(Fe.prototype.reset=function(){this.next=this.b=this.a=null}),Be=new Re;function Ve(){for(var e;e=Be.f();){try{e.a.call(e.b)}catch(e){Ue(e)}Be.g(e)}qe=!1}function je(e,t){xe.call(this),this.b=e||1,this.a=t||p,this.f=k(this.$d,this),this.g=D()}function ze(e,t,n){if("function"==v(e))n&&(e=k(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=k(e.handleEvent,e)}return 2147483647<Number(t)?-1:p.setTimeout(e,t||0)}function Qe(e,t,n){A.call(this),this.f=null!=n?k(e,n):e,this.c=t,this.b=k(this.Cd,this),this.a=[]}function We(e){A.call(this),this.b=e,this.a={}}N(je,xe),(h=je.prototype).wa=!1,h.P=null,h.$d=function(){if(this.wa){var e=D()-this.g;0<e&&e<.8*this.b?this.P=this.a.setTimeout(this.f,this.b-e):(this.P&&(this.a.clearTimeout(this.P),this.P=null),this.Gc(),this.wa&&(this.Na(),this.start()))}},h.Gc=function(){this.dispatchEvent("tick")},h.start=function(){this.wa=!0,this.P||(this.P=this.a.setTimeout(this.f,this.b),this.g=D())},h.Na=function(){this.wa=!1,this.P&&(this.a.clearTimeout(this.P),this.P=null)},h.G=function(){je.S.G.call(this),this.Na(),delete this.a},N(Qe,A),(h=Qe.prototype).Ca=!1,h.ec=0,h.ba=null,h.Hc=function(e){this.a=arguments,this.ba||this.ec?this.Ca=!0:this.yb()},h.Pc=function(){this.ba&&(p.clearTimeout(this.ba),this.ba=null,this.Ca=!1,this.a=[])},h.G=function(){Qe.S.G.call(this),this.Pc()},h.Cd=function(){this.ba=null,this.Ca&&!this.ec&&(this.Ca=!1,this.yb())},h.yb=function(){this.ba=ze(this.b,this.c),this.f.apply(null,this.a)},N(We,A);var Ke=[];function Ge(){}(h=We.prototype).Jb=function(e,t,n){this.wd(e,t,n)},h.wd=function(e,t,n){b(t)||(t&&(Ke[0]=t.toString()),t=Ke);for(var r=0;r<t.length;r++){var i=Se(e,t[r],n||this.handleEvent,!1,this.b||this);if(!i)break;this.a[i.key]=i}},h.Kb=function(){j(this.a,function(e,t){this.a.hasOwnProperty(t)&&Ce(e)},this),this.a={}},h.G=function(){We.S.G.call(this),this.Kb()},h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var He=new xe;function Ye(e){fe.call(this,"serverreachability",e)}function Xe(e){He.dispatchEvent(new Ye(He,e))}function $e(e){fe.call(this,"statevent",e)}function Je(e){He.dispatchEvent(new $e(He,e))}function Ze(e){fe.call(this,"timingevent",e)}function et(e,t){if("function"!=v(e))throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){e()},t)}N(Ye,fe),N($e,fe),N(Ze,fe);var tt={NO_ERROR:0,ae:1,he:2,ge:3,de:4,fe:5,ie:6,qc:7,TIMEOUT:8,le:9},nt={ce:"complete",pe:"success",rc:"error",qc:"abort",ne:"ready",oe:"readystatechange",TIMEOUT:"timeout",je:"incrementaldata",me:"progress",ee:"downloadprogress",qe:"uploadprogress"};function rt(){}function it(){}rt.prototype.a=null,rt.prototype.c=function(){return this.a||(this.a={})};var ot,at={OPEN:"a",be:"b",rc:"c",ke:"d"};function st(){fe.call(this,"d")}function ut(){fe.call(this,"c")}function ct(){}function lt(e,t,n){this.g=e,this.da=t,this.ca=n||1,this.I=new We(this),this.L=45e3,e=J?125:void 0,this.T=new je(e),this.J=null,this.b=!1,this.i=this.C=this.f=this.F=this.u=this.U=this.h=null,this.j=[],this.a=null,this.A=0,this.c=this.v=null,this.o=-1,this.l=!1,this.K=0,this.B=null,this.s=this.Y=this.H=!1}N(st,fe),N(ut,fe),N(ct,rt),ct.prototype.b=function(){return new XMLHttpRequest},ot=new ct;var ht={},ft={};function dt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(w(e)||m(e))P(e,t,void 0);else{if(e.O&&"function"==typeof e.O)var n=e.O();else if(e.D&&"function"==typeof e.D)n=void 0;else if(w(e)||m(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.D&&"function"==typeof e.D)return e.D();if(m(e))return e.split("");if(w(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function pt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else e&&this.fd(e)}function mt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(h=lt.prototype).ha=function(e){this.J=e},h.setTimeout=function(e){this.L=e},h.Xc=function(e){this.K=e},h.Qd=function(e){this.j=e},h.cb=function(e,t){this.F=1,this.f=e.N().za(),this.i=t,this.H=!0,this.ic(null)},h.bb=function(e,t,n){this.F=1,this.f=e.N().za(),this.i=null,this.H=t,this.ic(n)},h.ic=function(e){this.u=D(),this.fa(),this.C=this.f.N(),this.C.Aa("t",this.ca),this.A=0,this.a=this.g.sa(this.g.Da()?e:null),0<this.K&&(this.B=new Qe(k(this.oc,this,this.a),this.K)),this.I.Jb(this.a,"readystatechange",this.Hd),e=this.J?z(this.J):{},this.i?(this.v||(this.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",this.a.xa(this.C,this.v,this.i,e)):(this.v="GET",this.a.xa(this.C,this.v,null,e)),Xe(1)},h.Hd=function(e){e=e.target;var t=this.B;t&&3==e.W()?t.Hc():this.oc(e)},h.oc=function(e){try{e==this.a&&this.Ed()}catch(e){}},h.Ed=function(){var e=this.a.W(),t=this.a.Db(),n=this.a.aa();if(!(e<3||3==e&&!J&&!this.a.va()))if(this.l||4!=e||7==t||Xe(8==t||n<=0?3:2),this.pa(),this.o=n=this.a.aa(),t=this.a.va(),this.b=200==n){if(this.Td()){if(!(n=this.Kc()))return this.b=!1,this.c=3,Je(12),this.Z(),void this.ta();this.s=!0,this.Wa(n)}this.H?(this.vb(e,t),J&&this.b&&3==e&&this.Yd()):this.Wa(t),4==e&&this.Z(),this.b&&!this.l&&(4==e?this.g.Va(this):(this.b=!1,this.fa()))}else 400==n&&0<t.indexOf("Unknown SID")?(this.c=3,Je(12)):(this.c=0,Je(13)),this.Z(),this.ta()},h.Td=function(){return this.Y&&!this.s},h.Kc=function(){if(this.a){var e=this.a.ga("X-HTTP-Initial-Response");if(e&&!M(e))return e}return null},h.Md=function(){this.Y=!0},h.vb=function(e,t){for(var n=!0;!this.l&&this.A<t.length;){var r=this.Lc(t);if(r==ft){4==e&&(this.c=4,Je(14),n=!1);break}if(r==ht){this.c=4,Je(15),n=!1;break}this.Wa(r)}4==e&&0==t.length&&(this.c=1,Je(16),n=!1),this.b=this.b&&n,n||(this.Z(),this.ta())},h.Gd=function(){if(this.a){var e=this.a.W(),t=this.a.va();this.A<t.length&&(this.pa(),this.vb(e,t),this.b&&4!=e&&this.fa())}},h.Yd=function(){this.I.Jb(this.T,"tick",this.Gd),this.T.start()},h.Lc=function(e){var t=this.A,n=e.indexOf("\n",t);return-1==n?ft:(t=Number(e.substring(t,n)),isNaN(t)?ht:(n+=1)+t>e.length?ft:(e=e.substr(n,t),this.A=n+t,e))},h.Ld=function(e){this.F=2,this.f=e.N().za(),e=!1,p.navigator&&p.navigator.sendBeacon&&(e=p.navigator.sendBeacon(this.f.toString(),"")),!e&&p.Image&&((new Image).src=this.f,e=!0),e||(this.a=this.g.sa(null),this.a.xa(this.f)),this.u=D(),this.fa()},h.cancel=function(){this.l=!0,this.Z()},h.Kd=function(e){e&&this.setTimeout(e),this.h&&(this.pa(),this.fa())},h.fa=function(){this.U=D()+this.L,this.mc(this.L)},h.mc=function(e){if(null!=this.h)throw Error("WatchDog timer not null");this.h=et(k(this.Dd,this),e)},h.pa=function(){this.h&&(p.clearTimeout(this.h),this.h=null)},h.Dd=function(){this.h=null;var e=D();0<=e-this.U?this.md():this.mc(this.U-e)},h.md=function(){2!=this.F&&(Xe(3),Je(17)),this.Z(),this.c=2,this.ta()},h.ta=function(){this.g.Tb()||this.l||this.g.Va(this)},h.Z=function(){this.pa();var e=this.B;e&&"function"==typeof e.La&&e.La(),this.B=null,this.T.Na(),this.I.Kb(),this.a&&(e=this.a,this.a=null,e.abort(),e.La())},h.Wa=function(e){try{this.g.bc(this,e),Xe(4)}catch(e){}},(h=pt.prototype).D=function(){this.Ka();for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},h.O=function(){return this.Ka(),this.a.concat()},h.Ra=function(e){return mt(this.b,e)},h.hd=function(){return 0==this.c},h.gd=function(){this.b={},this.c=this.a.length=0},h.Qb=function(e){mt(this.b,e)&&(delete this.b[e],this.c--,this.a.length>2*this.c&&this.Ka())},h.Ka=function(){if(this.c!=this.a.length){for(var e=0,t=0;e<this.a.length;){var n=this.a[e];mt(this.b,n)&&(this.a[t++]=n),e++}this.a.length=t}if(this.c!=this.a.length){var r={};for(t=e=0;e<this.a.length;)mt(r,n=this.a[e])||(r[this.a[t++]=n]=1),e++;this.a.length=t}},h.get=function(e,t){return mt(this.b,e)?this.b[e]:t},h.set=function(e,t){mt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},h.fd=function(e){if(e instanceof pt)for(var t=e.O(),n=0;n<t.length;n++)this.set(t[n],e.get(t[n]));else for(t in e)this.set(t,e[t])},h.forEach=function(e,t){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}},h.Pb=function(){return new pt(this)};var yt=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function gt(e,t){var n;this.c=this.i=this.b="",this.h=null,this.j=this.g="",this.f=this.l=!1,e instanceof gt?(this.f=void 0!==t?t:e.f,this.ma(e.b),this.$a(e.i),this.ka(e.c),this.la(e.h),this.Ba(e.g),this.Za(e.a.Gb()),this.Ya(e.j)):e&&(n=String(e).match(yt))?(this.f=!!t,this.ma(n[1]||"",!0),this.$a(n[2]||"",!0),this.ka(n[3]||"",!0),this.la(n[4]),this.Ba(n[5]||"",!0),this.Za(n[6]||"",!0),this.Ya(n[7]||"",!0)):(this.f=!!t,this.a=new kt(null,this.f))}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function bt(e,t,n){return m(e)?(e=encodeURI(e).replace(t,wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(h=gt.prototype).toString=function(){var e=[],t=this.b;t&&e.push(bt(t,Et,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(bt(t,Et,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.Sa()&&"/"!=n.charAt(0)&&e.push("/"),e.push(bt(n,"/"==n.charAt(0)?Tt:St,!0))),(n=this.Ic())&&e.push("?",n),(n=this.j)&&e.push("#",bt(n,It)),e.join("")},h.resolve=function(e){var t=this.N(),n=e.qd();n?t.ma(e.b):n=e.rd(),n?t.$a(e.i):n=e.Sa(),n?t.ka(e.c):n=e.od();var r=e.g;if(n)t.la(e.h);else if(n=e.Sb()){if("/"!=r.charAt(0))if(this.Sa()&&!this.Sb())r="/"+r;else{var i=t.g.lastIndexOf("/");-1!=i&&(r=t.g.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(U(i,"./")||U(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.Ba(r):n=e.pd(),n?t.Za(e.a.Gb()):n=e.nd(),n&&t.Ya(e.j),t},h.N=function(){return new gt(this)},h.ma=function(e,t){this.M(),(this.b=t?vt(e,!0):e)&&(this.b=this.b.replace(/:$/,""))},h.qd=function(){return!!this.b},h.$a=function(e,t){this.M(),this.i=t?vt(e):e},h.rd=function(){return!!this.i},h.ka=function(e,t){this.M(),this.c=t?vt(e,!0):e},h.Sa=function(){return!!this.c},h.la=function(e){if(this.M(),e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);this.h=e}else this.h=null},h.od=function(){return null!=this.h},h.Ba=function(e,t){this.M(),this.g=t?vt(e,!0):e},h.Sb=function(){return!!this.g},h.pd=function(){return""!==this.a.toString()},h.Za=function(e,t){this.M(),e instanceof kt?(this.a=e,this.a.Oc(this.f)):(t||(e=bt(e,Ct)),this.a=new kt(e,this.f))},h.Ic=function(){return this.a.toString()},h.m=function(e,t){this.M(),this.a.set(e,t)},h.Aa=function(e,t){this.M(),b(t)||(t=[String(t)]),this.a.lc(e,t)},h.Ya=function(e,t){this.M(),this.j=t?vt(e):e},h.nd=function(){return!!this.j},h.za=function(){return this.M(),this.m("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^D()).toString(36)),this},h.M=function(){if(this.l)throw Error("Tried to modify a read-only Uri")};var Et=/[#\/\?@]/g,St=/[#\?:]/g,Tt=/[#\?]/g,Ct=/[#\?@]/g,It=/#/g;function kt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function _t(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Dt(){this.a=this.b=null}function Nt(){this.a=new pt}function At(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[S]||(e[S]=++T)):t.charAt(0)+e}function xt(e,t){this.a=e,this.b=t}function Pt(e){this.g=e||Ot,e=p.PerformanceNavigationTiming?0<(e=p.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(p.Ja&&p.Ja.Vb&&p.Ja.Vb()&&p.Ja.Vb().te),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Nt),this.b=null,this.c=[]}(h=kt.prototype).V=function(){if(!this.a&&(this.a=new pt,this.b=0,this.c)){var e=this;!function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})}},h.add=function(e,t){this.V(),this.ia(),e=this.$(e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},h.Ib=function(e){this.V(),e=this.$(e),this.a.Ra(e)&&(this.ia(),this.b-=this.a.get(e).length,this.a.Qb(e))},h.Hb=function(e){return this.V(),e=this.$(e),this.a.Ra(e)},h.forEach=function(e,t){this.V(),this.a.forEach(function(n,r){P(n,function(n){e.call(t,n,r,this)},this)},this)},h.O=function(){this.V();for(var e=this.a.D(),t=this.a.O(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},h.D=function(e){this.V();var t=[];if(m(e))this.Hb(e)&&(t=O(t,this.a.get(this.$(e))));else{e=this.a.D();for(var n=0;n<e.length;n++)t=O(t,e[n])}return t},h.set=function(e,t){return this.V(),this.ia(),e=this.$(e),this.Hb(e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},h.get=function(e,t){return e&&0<(e=this.D(e)).length?String(e[0]):t},h.lc=function(e,t){this.Ib(e),0<t.length&&(this.ia(),this.a.set(this.$(e),R(t)),this.b+=t.length)},h.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.O(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.D(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},h.ia=function(){this.c=null},h.Gb=function(){var e=new kt;return e.c=this.c,this.a&&(e.a=this.a.Pb(),e.b=this.b),e},h.$=function(e){return e=String(e),this.f&&(e=e.toLowerCase()),e},h.Oc=function(e){e&&!this.f&&(this.V(),this.ia(),this.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(this.Ib(t),this.lc(n,e))},this)),this.f=e},N(function(){},function(){}),(h=_t.prototype).R=null,h.Wc=function(e){this.h=e},h.Vc=function(e){this.i=e,e=this.a.Cb(this.i),Je(3);var t=this.a.H.b;null!=t?(this.f=this.a.Oa(t[0]),this.R=1,this.rb()):(e.Aa("MODE","init"),!this.a.o&&this.a.j&&e.Aa("X-HTTP-Session-Id",this.a.j),this.b=new lt(this,void 0,void 0),this.b.ha(this.h),this.b.bb(e,!1,null),this.R=0)},h.rb=function(){var e=this.a.H.a;if(null!=e)Je(4),e?(Je(10),this.a.na(this,!1)):(Je(11),this.a.na(this,!0));else{this.b=new lt(this,void 0,void 0),this.b.ha(this.h),e=this.a.Bb(this.f,this.i),Je(4),e.Aa("TYPE","xmlhttp");var t=this.a.j,n=this.a.Fa;t&&n&&e.m(t,n),this.b.bb(e,!1,this.f)}},h.sa=function(e){return this.a.sa(e)},h.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},h.Tb=function(){return!1},h.bc=function(e,t){if(this.c=e.o,0==this.R)if(this.Uc(e),t){try{var n=this.a.U.a(t)}catch(e){return void this.a.ab(this)}this.f=this.a.Oa(n[0])}else this.a.ab(this);else 1==this.R&&(this.g?Je(6):"11111"==t?(Je(5),this.g=!0,this.Ac()&&(this.c=200,this.b.cancel(),Je(11),this.a.na(this,!0))):(Je(7),this.g=!1))},h.Va=function(){this.c=this.b.o,this.b.b?0==this.R?(this.R=1,this.rb()):1==this.R&&(this.g?(Je(11),this.a.na(this,!0)):(Je(10),this.a.na(this,!1))):(0==this.R?Je(8):1==this.R&&Je(9),this.a.ab(this))},h.Uc=function(e){if(!this.a.o&&(e=e.a)){var t=e.ga("X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(e=e.ga("X-HTTP-Session-Id"))&&this.a.kc(e)}},h.Da=function(){return this.a.Da()},h.Pa=function(){return this.a.Pa()},h.Ac=function(){return!X||10<=Number(oe)},(h=Nt.prototype).add=function(e){this.a.set(At(e),e)},h.ed=function(e){this.a.Qb(At(e))},h.jd=function(){this.a.gd()},h.Rb=function(){return this.a.hd()},h.Ob=function(e){return this.a.Ra(At(e))},h.D=function(){return this.a.D()};var Ot=10;function Rt(){this.b=this.a=void 0}function Mt(){this.f=new Rt}function Lt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}(h=Pt.prototype).kb=function(e){!this.a&&(U(e,"spdy")||U(e,"quic")||U(e,"h2"))&&(this.f=this.g,this.a=new Nt,this.b&&(this.Ha(this.b),this.b=null))},h.Ub=function(){return!!this.b||!!this.a&&this.a.a.c>=this.f},h.Mc=function(){return this.b?1:this.a?this.a.a.c:0},h.Ta=function(e){return this.b?this.b==e:!!this.a&&this.a.Ob(e)},h.Ha=function(e){this.a?this.a.add(e):this.b=e},h.gc=function(e){this.b&&this.b==e?this.b=null:this.a&&this.a.Ob(e)&&this.a.ed(e)},h.cancel=function(){this.c=this.Xb(),this.b?(this.b.cancel(),this.b=null):this.a&&!this.a.Rb()&&(P(this.a.D(),function(e){e.cancel()}),this.a.jd())},h.Xb=function(){if(null!=this.b)return this.c.concat(this.b.j);if(null==this.a||this.a.Rb())return R(this.c);var e=this.c;return P(this.a.D(),function(t){e=e.concat(t.j)}),e},h.wc=function(e){this.c=this.c.concat(e)},h.Bc=function(){this.c.length=0},Rt.prototype.stringify=function(e){return p.JSON.stringify(e,this.a)},Rt.prototype.parse=function(e){return p.JSON.parse(e,this.b)},Mt.prototype.b=function(e,t,n){var r=n||"";try{dt(e,function(e,n){var i=e;E(e)&&(i=Pe(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}},Mt.prototype.c=function(e,t,n){for(var r=-1;;){var i=["count="+t];-1==r?0<t?(r=e[0].a,i.push("ofs="+r)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<t;a++){var s=e[a].a,u=e[a].b;if((s-=r)<0)r=Math.max(0,e[a].a-100),o=!1;else try{this.b(u,i,"req"+s+"_")}catch(e){n&&n(u)}}if(o)return i.join("&")}},Mt.prototype.a=function(e){return this.f.parse(e)};var Ft=p.JSON.parse;function Ut(e){xe.call(this),this.headers=new pt,this.l=e||null,this.b=!1,this.v=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.o=this.A=!1,this.u=0,this.s=null,this.J=qt,this.H=this.L=this.I=!1}N(Ut,xe);var qt="",Bt=/^https?$/i,Vt=["POST","PUT"];function jt(e){return"content-type"==e.toLowerCase()}function zt(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;var i;if(i="",j(n,function(e,t){i+=t,i+=":",i+=e,i+="\r\n"}),n=i,m(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var o=""}else o=e.substring(r+1,n);n=(e=[e.substr(0,r),o,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return e.m(t,n),e}function Wt(e){this.gb=22,this.g=[],this.H=new Dt,this.da=this.fb=this.C=this.Ea=this.a=this.Fa=this.j=this.ca=this.f=this.J=this.h=null,this.sc=!0,this.zc=this.L=0,this.uc=!!y("internalChannelParams.failFast",e),this.Ga=this.v=this.s=this.l=this.i=this.b=null,this.eb=!0,this.B=this.jb=this.K=-1,this.Y=this.u=this.A=0,this.tc=y("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Fc=y("internalChannelParams.retryDelaySeedMs",e)||1e4,this.pc=y("internalChannelParams.forwardChannelMaxRetries",e)||2,this.ib=y("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.xc=e&&e.ue||void 0,this.F=void 0,this.vc=0,this.T=e&&e.supportsCrossDomainXhr||!1,this.I="",this.c=new Pt(e&&e.concurrentRequestLimit),this.U=new Mt,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.hb=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.se&&(this.eb=!1)}function Kt(){}function Gt(){if(X&&!(10<=Number(oe)))throw Error("Environmental error: no available transport.")}function Ht(e,t){xe.call(this),this.a=new Wt(t),this.g=e,this.o=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.cd(e),e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.tb&&(e?e["X-WebChannel-Client-Profile"]=t.tb:e={"X-WebChannel-Client-Profile":t.tb}),this.a.Pd(e),(e=t&&t.httpHeadersOverwriteParam)&&!M(e)&&this.a.Nd(e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!M(t)&&(this.a.Od(t),null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new $t(this)}function Yt(e){st.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.f=e)?(e=this.f,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Xt(){ut.call(this),this.status=1}function $t(e){this.a=e}(h=Ut.prototype).Sd=function(e){this.I=e},h.xa=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+e);t=t?t.toUpperCase():"GET",this.C=e,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.Ec(),this.v=this.l?this.l.c():ot.c(),this.a.onreadystatechange=k(this.ac,this),this.L&&"onprogress"in this.a&&(this.a.onprogress=k(function(e){this.Zb(e,!0)},this),this.a.upload&&(this.a.upload.onprogress=k(this.Zb,this)));try{this.B=!0,this.a.open(t,String(e),!0),this.B=!1}catch(e){return void this.Ab(e)}e=n||"";var i,o=this.headers.Pb();r&&dt(r,function(e,t){o.set(t,e)}),r=function(e){e:{for(var t=jt,n=e.length,r=m(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:m(e)?e.charAt(t):e[t]}(o.O()),n=p.FormData&&e instanceof p.FormData,!(0<=x(Vt,t))||r||n||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.J&&(this.a.responseType=this.J),"withCredentials"in this.a&&this.a.withCredentials!==this.I&&(this.a.withCredentials=this.I);try{this.sb(),0<this.u&&((this.H=(i=this.a,X&&se(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.u,this.a.ontimeout=k(this.Nb,this)):this.s=ze(this.Nb,this.u,this)),this.o=!0,this.a.send(e),this.o=!1}catch(e){this.Ab(e)}},h.Ec=function(){return this.l?this.l.b():ot.b()},h.Nb=function(){void 0!==d&&this.a&&(this.f="Timed out after "+this.u+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},h.Ab=function(e){this.b=!1,this.a&&(this.g=!0,this.a.abort(),this.g=!1),this.f=e,this.h=5,this.xb(),this.qa()},h.xb=function(){this.A||(this.A=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},h.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.qa())},h.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),this.qa(!0)),Ut.S.G.call(this)},h.ac=function(){this.i||(this.B||this.o||this.g?this.$b():this.Bd())},h.Bd=function(){this.$b()},h.$b=function(){if(this.b&&void 0!==d&&(!this.v[1]||4!=this.W()||2!=this.aa()))if(this.o&&4==this.W())ze(this.ac,0,this);else if(this.dispatchEvent("readystatechange"),this.td()){this.b=!1;try{this.vd()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.h=6,this.f=this.Fb()+" ["+this.aa()+"]",this.xb())}finally{this.qa()}}},h.Zb=function(e,t){this.dispatchEvent(zt(e,"progress")),this.dispatchEvent(zt(e,t?"downloadprogress":"uploadprogress"))},h.qa=function(e){if(this.a){this.sb();var t=this.a,n=this.v[0]?g:null;this.v=this.a=null,e||this.dispatchEvent("ready");try{t.onreadystatechange=n}catch(e){}}},h.sb=function(){this.a&&this.H&&(this.a.ontimeout=null),this.s&&(p.clearTimeout(this.s),this.s=null)},h.td=function(){return 4==this.W()},h.vd=function(){var e=this.aa();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}return t||0===e&&!this.ud()},h.ud=function(){var e=String(this.C).match(yt)[1]||null;return!e&&p.self&&p.self.location&&(e=(e=p.self.location.protocol).substr(0,e.length-1)),Bt.test(e?e.toLowerCase():"")},h.W=function(){return this.a?this.a.readyState:0},h.aa=function(){try{return 2<this.W()?this.a.status:-1}catch(r){return-1}},h.Fb=function(){try{return 2<this.W()?this.a.statusText:""}catch(r){return""}},h.va=function(){try{return this.a?this.a.responseText:""}catch(r){return""}},h.Nc=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ft(t)}},h.ga=function(e){return this.a?this.a.getResponseHeader(e):null},h.Db=function(){return this.h},h.dd=function(){return m(this.f)?this.f:String(this.f)},(h=Wt.prototype).qb=8,h.w=1,h.bd=function(e,t,n){Je(0),this.Ea=t,this.ca=n||{},this.o&&(this.H.b=[],this.H.a=!1),this.Dc(e)},h.Qa=function(){if(this.lb(),3==this.w){var e=this.L++,t=this.C.N();t.m("SID",this.I),t.m("RID",e),t.m("TYPE","terminate"),this.ea(t),new lt(this,e,void 0).Ld(t)}this.Yb()},h.Dc=function(e){this.v=new _t(this),null===this.f&&this.v.Wc(this.h);var t=e;this.f&&this.h&&(t=Qt(e,this.f,this.h)),this.v.Vc(t)},h.Cc=function(){this.C=this.Cb(this.Ea),this.Ma()},h.lb=function(){this.v&&(this.v.abort(),this.v=null),this.a&&(this.a.cancel(),this.a=null),this.l&&(p.clearTimeout(this.l),this.l=null),this.ra(),this.c.cancel(),this.i&&(p.clearTimeout(this.i),this.i=null)},h.cd=function(e){this.h=e},h.Pd=function(e){this.J=e},h.Nd=function(e){this.f=e},h.Od=function(e){this.j=e},h.kc=function(e){this.Fa=e},h.Rd=function(){this.T=!0},h.jc=function(e){this.b=e},h.sd=function(){return!this.Ga},h.Xa=function(e){this.g.push(new xt(this.zc++,e)),3==this.w&&this.Ma()},h.Jc=function(){return this.uc?0:this.pc},h.Tb=function(){return 0==this.w},h.Ma=function(){this.c.Ub()||this.i||(this.i=et(k(this.dc,this),0),this.A=0)},h.xd=function(e){return!(this.c.Mc()>=this.c.f-(this.i?1:0))&&(this.i?(this.g=e.j.concat(this.g),!0):!(1==this.w||2==this.w||this.A>=this.Jc())&&(this.i=et(k(this.dc,this,e),this.Eb(this.A)),this.A++,!0))},h.dc=function(e){this.i=null,this.Xd(e)},h.Xd=function(e){1==this.w?e||(this.Fd(),this.w=2):3==this.w&&(e?this.Wb(e):0==this.g.length||this.c.Ub()||this.Wb())},h.Fd=function(){this.L=Math.floor(1e5*Math.random());var e=this.L++,t=new lt(this,e,void 0),n=this.h;this.J&&(n?W(n=z(n),this.J):n=this.J),null===this.f&&t.ha(n);var r=this.wb(t),i=this.C.N();i.m("RID",e),0<this.gb&&i.m("CVER",this.gb),this.o&&this.j&&i.m("X-HTTP-Session-Id",this.j),this.ea(i),this.f&&n&&Qt(i,this.f,n),this.c.Ha(t),this.hb?(i.m("$req",r),i.m("SID","null"),t.Md(),t.cb(i,null)):t.cb(i,r)},h.Wb=function(e){var t;t=e?e.da:this.L++;var n=this.C.N();n.m("SID",this.I),n.m("RID",t),n.m("AID",this.K),this.ea(n),this.f&&this.h&&Qt(n,this.f,this.h),t=new lt(this,t,this.A+1),null===this.f&&t.ha(this.h),e&&this.Jd(e),e=this.wb(t),t.setTimeout(Math.round(.5*this.ib)+Math.round(.5*this.ib*Math.random())),this.c.Ha(t),t.cb(n,e)},h.ea=function(e){this.b&&dt({},function(t,n){e.m(n,t)})},h.wb=function(e){var t=Math.min(this.g.length,1e3),n=this.b?k(this.b.yc,this.b,this):null;return n=this.U.c(this.g,t,n),e.Qd(this.g.splice(0,t)),n},h.Jd=function(e){this.g=e.j.concat(this.g)},h.zb=function(){if(!this.a&&!this.l){this.Y=1;var e=this.cc;Me||(t=p.Promise.resolve(void 0),Me=function(){t.then(Ve)}),qe||(Me(),qe=!0),Be.add(e,this),this.u=0}var t},h.Ua=function(){return!(this.a||this.l||3<=this.u)&&(this.Y++,this.l=et(k(this.cc,this),this.Eb(this.u)),this.u++,!0)},h.cc=function(){this.l=null,this.Vd()},h.Vd=function(){this.a=new lt(this,"rpc",this.Y),null===this.f&&this.a.ha(this.h),this.a.Xc(this.vc);var e=this.fb.N();e.m("RID","rpc"),e.m("SID",this.I),e.m("CI",this.Ga?"0":"1"),e.m("AID",this.K),this.ea(e),e.m("TYPE","xmlhttp"),this.f&&this.h&&Qt(e,this.f,this.h),this.F&&this.a.setTimeout(this.F),this.a.bb(e,!0,this.da)},h.na=function(e,t){var n=e.l;n&&this.c.kb(n),this.Ga=this.eb&&t,this.B=e.c,this.Cc()},h.ab=function(e){this.B=e.c,this.X(2)},h.bc=function(e,t){if(0!=this.w&&(this.a==e||this.c.Ta(e)))if(this.B=e.o,!e.s&&this.c.Ta(e)&&3==this.w){try{var n=this.U.a(t)}catch(e){n=null}b(n)&&3==n.length?this.ld(n,e):this.X(11)}else(e.s||this.a==e)&&this.ra(),M(t)||(n=this.U.a(t),this.Ad(n,e))},h.ld=function(e,t){0==e[0]?this.kd(t):(this.jb=e[1],0<this.jb-this.K&&this.Ud(e[2])&&!this.s&&(this.s=et(k(this.yd,this),6e3)))},h.kd=function(e){if(!this.l){if(this.a){if(!(this.a.u+3e3<e.u))return;this.ra(),this.a.cancel(),this.a=null}this.Ua(),Je(18)}},h.Ud=function(e){return e<37500&&!this.sd()&&0==this.u},h.Oa=function(e){return this.sc?this.b?this.b.$c(e):e:null},h.yd=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,this.Ua(),Je(19))},h.ra=function(){null!=this.s&&(p.clearTimeout(this.s),this.s=null)},h.Va=function(e){var t=null;if(this.a==e){this.ra(),this.a=null;var n=2}else{if(!this.c.Ta(e))return;t=e.j,this.c.gc(e),n=1}if(this.B=e.o,0!=this.w)if(e.b)1==n?(n=D()-e.u,He.dispatchEvent(new Ze(He,e.i?e.i.length:0,n,this.A)),this.Ma()):this.zb();else{var r=e.c;if(3==r||0==r&&0<this.B||!(1==n&&this.xd(e)||2==n&&this.Ua()))switch(t&&0<t.length&&this.c.wc(t),r){case 1:this.X(5);break;case 4:this.X(10);break;case 3:this.X(6);break;default:this.X(2)}}},h.Eb=function(e){var t=this.tc+Math.floor(Math.random()*this.Fc);return this.Pa()||(t*=2),t*e},h.ad=function(e){if(this.o&&(e=e.a)){var t=e.ga("X-Client-Wire-Protocol");t&&this.c.kb(t),this.j&&(e=e.ga("X-HTTP-Session-Id"))&&(this.kc(e),this.C.m(this.j,e))}},h.Ad=function(e,t){for(var n=this.b&&this.b.Ia?[]:null,r=0;r<e.length;r++){var i=e[r];if(this.K=i[0],i=i[1],2==this.w)if("c"==i[0]){this.I=i[1],this.da=this.Oa(i[2]);var o=i[3];null!=o&&(this.qb=o),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.F=1.5*i),this.ad(t),this.w=3,this.b&&this.b.pb(),this.Wd(t)}else"stop"!=i[0]&&"close"!=i[0]||this.X(7);else 3==this.w&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.b.Ia(this,n),n.length=0),"stop"==i[0]?this.X(7):this.Qa()):"noop"!=i[0]&&(n?n.push(i):this.b&&this.b.ob(i)),this.u=0)}n&&0!=n.length&&this.b.Ia(this,n)},h.Wd=function(e){this.fb=this.Bb(this.da,this.Ea),e.s?(this.c.gc(e),e.Kd(this.F),this.a=e):this.zb()},h.X=function(e){if(2==e){var t=null;this.b&&(t=null);var n=k(this.Zd,this);t||(t=new gt("//www.google.com/images/cleardot.gif"),p.location&&"http"==p.location.protocol||t.ma("https"),t.za()),r=t.toString(),i=n,o=new Ge,(a=new Image).onload=_(Lt,o,a,"TestLoadImage: loaded",!0,i),a.onerror=_(Lt,o,a,"TestLoadImage: error",!1,i),a.onabort=_(Lt,o,a,"TestLoadImage: abort",!1,i),a.ontimeout=_(Lt,o,a,"TestLoadImage: timeout",!1,i),p.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=r}else Je(2);var r,i,o,a;this.zd(e)},h.Zd=function(e){Je(e?2:1)},h.zd=function(e){this.w=0,this.b&&this.b.nb(e),this.Yb(),this.lb()},h.Yb=function(){this.w=0,this.B=-1,this.b&&(0==this.c.Xb().length&&0==this.g.length||(this.c.Bc(),R(this.g),this.g.length=0),this.b.mb())},h.Cb=function(e){return this.ub(null,e)},h.Bb=function(e,t){return this.ub(this.Da()?e:null,t)},h.ub=function(e,t){var n,r,i,o,a,s,u=(n=t)instanceof gt?n.N():new gt(n,void 0);if(""!=u.c)e&&u.ka(e+"."+u.c),u.la(u.h);else{var c,l=p.location;c=e?e+"."+l.hostname:l.hostname,r=l.protocol,i=c,o=+l.port,a=t,s=new gt(null,void 0),r&&s.ma(r),i&&s.ka(i),o&&s.la(o),a&&s.Ba(a),u=s}return this.ca&&j(this.ca,function(e,t){u.m(t,e)}),e=this.j,t=this.Fa,e&&t&&u.m(e,t),u.m("VER",this.qb),this.ea(u),u},h.sa=function(e){if(e&&!this.T)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ut(this.xc)).Sd(this.T),e},h.Pa=function(){return!!this.b&&!0},h.Da=function(){return this.T},(h=Kt.prototype).Ia=null,h.pb=function(){},h.ob=function(){},h.nb=function(){},h.mb=function(){},h.yc=function(){},h.$c=function(e){return e},Gt.prototype.a=function(e,t){return new Ht(e,t)},N(Ht,xe),(h=Ht.prototype).addEventListener=function(e,t,n,r){Ht.S.addEventListener.call(this,e,t,n,r)},h.removeEventListener=function(e,t,n,r){Ht.S.removeEventListener.call(this,e,t,n,r)},h.Yc=function(){this.a.jc(this.f),this.l&&this.a.Rd(),this.a.bd(this.o,this.g,this.b||void 0)},h.close=function(){this.a.Qa()},h.Zc=function(e){if(m(e)){var t={};t.__data__=e,this.a.Xa(t)}else this.h?((t={}).__data__=Pe(e),this.a.Xa(t)):this.a.Xa(e)},h.G=function(){this.a.jc(null),delete this.f,this.a.Qa(),delete this.a,Ht.S.G.call(this)},N(Yt,st),N(Xt,ut),N($t,Kt),$t.prototype.pb=function(){this.a.dispatchEvent("a")},$t.prototype.ob=function(e){this.a.dispatchEvent(new Yt(e))},$t.prototype.nb=function(e){this.a.dispatchEvent(new Xt(e))},$t.prototype.mb=function(){this.a.dispatchEvent("b")};var Jt=_(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},Gt);Gt.prototype.createWebChannel=Gt.prototype.a,Ht.prototype.send=Ht.prototype.Zc,Ht.prototype.open=Ht.prototype.Yc,Ht.prototype.close=Ht.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,nt.COMPLETE="complete",(it.EventType=at).OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",xe.prototype.listen=xe.prototype.Lb,Ut.prototype.listenOnce=Ut.prototype.Mb,Ut.prototype.getLastError=Ut.prototype.dd,Ut.prototype.getLastErrorCode=Ut.prototype.Db,Ut.prototype.getStatus=Ut.prototype.aa,Ut.prototype.getStatusText=Ut.prototype.Fb,Ut.prototype.getResponseJson=Ut.prototype.Nc,Ut.prototype.getResponseText=Ut.prototype.va,Ut.prototype.send=Ut.prototype.xa;var Zt={createWebChannelTransport:Jt,ErrorCode:tt,EventType:nt,WebChannel:it,XhrIo:Ut},en=Zt.createWebChannelTransport,tn=Zt.ErrorCode,nn=Zt.EventType,rn=Zt.WebChannel,on=Zt.XhrIo,an="FirebaseError",sn=Error.captureStackTrace,un=function(e,t){if(this.code=e,this.message=t,sn)sn(this,hn.prototype.create);else try{throw Error.apply(this,arguments)}catch(e){this.name=an,Object.defineProperty(this,"stack",{get:function(){return e.stack}})}};((un.prototype=Object.create(Error.prototype)).constructor=un).prototype.name=an;var cn,ln,hn=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}),n=this.serviceName+": "+n+" ("+i+").";var o=new un(i,n);for(var a in t)t.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=t[a]);return o},e}(),fn=(function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}u(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}(function(){this.blockSize=-1}),t.SDK_VERSION),dn=new a("@firebase/firestore");function pn(){return dn.logLevel===n.DEBUG?cn.DEBUG:dn.logLevel===n.SILENT?cn.SILENT:cn.ERROR}function mn(e){switch(e){case cn.DEBUG:dn.logLevel=n.DEBUG;break;case cn.ERROR:dn.logLevel=n.ERROR;break;case cn.SILENT:dn.logLevel=n.SILENT;break;default:dn.error("Firestore ("+fn+"): Invalid value passed to `setLogLevel`")}}function yn(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(dn.logLevel<=n.DEBUG){var o=r.map(vn);dn.debug.apply(dn,["Firestore ("+fn+") ["+e+"]: "+t].concat(o))}}function gn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(dn.logLevel<=n.ERROR){var i=t.map(vn);dn.error.apply(dn,["Firestore ("+fn+"): "+e].concat(i))}}function vn(e){if("string"==typeof e)return e;var t=En.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function bn(e){var t="FIRESTORE ("+fn+") INTERNAL ASSERTION FAILED: "+e;throw gn(t),new Error(t)}function wn(e,t){e||bn(t)}(ln=cn||(cn={}))[ln.DEBUG=0]="DEBUG",ln[ln.ERROR=1]="ERROR",ln[ln.SILENT=2]="SILENT";var En=function(){function e(){}return e.setPlatform=function(t){e.platform&&bn("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||bn("Platform not set"),e.platform},e}();function Sn(){return En.getPlatform().emptyByteString}var Tn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Cn=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return u(t,e),t}(Error);function In(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new Cn(Tn.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function kn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _n(e,t){return void 0!==e?e:t}function Dn(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function Nn(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function An(e){for(var t in wn(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xn(e,t){if(0!==t.length)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Gn(t.length,"argument")+".")}function Pn(e,t,n){if(t.length!==n)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires "+Gn(n,"argument")+", but was called with "+Gn(t.length,"argument")+".")}function On(e,t,n){if(t.length<n)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Gn(n,"argument")+", but was called with "+Gn(t.length,"argument")+".")}function Rn(e,t,n,r){if(t.length<n||t.length>r)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Gn(t.length,"argument")+".")}function Mn(e,t,n,r){Bn(e,t,Kn(n)+" argument",r)}function Ln(e,t,n,r){void 0!==r&&Mn(e,t,n,r)}function Fn(e,t,n,r){Bn(e,t,n+" option",r)}function Un(e,t,n,r){void 0!==r&&Fn(e,t,n,r)}function qn(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(jn(u))}var c=jn(r);throw new Cn(Tn.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function Bn(e,t,n,r){if(!("object"===t?Vn(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=jn(r);throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function Vn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function jn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":bn("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function zn(e,t,n){if(void 0===n)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Kn(t)+" argument, but it was undefined.")}function Qn(e,t,n){Nn(t,function(t,r){if(n.indexOf(t)<0)throw new Cn(Tn.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function Wn(e,t,n,r){var i=jn(r);return new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires its "+Kn(n)+" argument to be a "+t+", but it was: "+i)}function Kn(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Gn(e,t){return e+" "+t+(1===e?"":"s")}var Hn=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return wn(20===t.length,"Invalid auto ID: "+t),t},e}();function Yn(e,t){return e<t?-1:t<e?1:0}function Xn(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function $n(e){return e+"\0"}function Jn(){if("undefined"==typeof Uint8Array)throw new Cn(Tn.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Zn(){if(!En.getPlatform().base64Available)throw new Cn(Tn.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var er,tr,nr,rr,ir=function(){function e(e){Zn(),this._binaryString=e}return e.fromBase64String=function(t){Pn("Blob.fromBase64String",arguments,1),Mn("Blob.fromBase64String","string",1,t),Zn();try{return new e(En.getPlatform().atob(t))}catch(t){throw new Cn(Tn.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(Pn("Blob.fromUint8Array",arguments,1),Jn(),!(t instanceof Uint8Array))throw Wn("Blob.fromUint8Array","Uint8Array",1,t);return new e(Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join(""))},e.prototype.toBase64=function(){return Pn("Blob.toBase64",arguments,0),Zn(),En.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){Pn("Blob.toUint8Array",arguments,0),Jn();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Yn(this._binaryString,e._binaryString)},e}(),or=In(ir,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ar=function(){function e(e,t){if(Pn("GeoPoint",arguments,2),Mn("GeoPoint","number",1,e),Mn("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new Cn(Tn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new Cn(Tn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Yn(this._lat,e._lat)||Yn(this._long,e._long)},e}(),sr=function(){function e(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new Cn(Tn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new Cn(Tn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Cn(Tn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new Cn(Tn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Yn(this.nanoseconds,e.nanoseconds):Yn(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),ur=function(e,t,n,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r},cr="(default)",lr=function(){function e(e,t){this.projectId=e,this.database=t||cr}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===cr},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Yn(this.projectId,e.projectId)||Yn(this.database,e.database)},e}(),hr="__name__",fr=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&bn("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&bn("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):"string"==typeof t?n.push(t):bn("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,wn(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return wn(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return wn(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return wn(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(0<=e.indexOf("//"))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter(function(e){return 0<e.length}))},t.EMPTY_PATH=new t([]),t}(fr),pr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.isValidIdentifier=function(e){return pr.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===hr},t.keyField=function(){return new t([hr])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Cn(Tn.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Cn(Tn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?a=!a:"."!==s||a?r+=s:o(),i++}if(o(),a)throw new Cn(Tn.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(fr),yr=function(){function e(t){this.path=t,wn(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===dr.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return dr.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new dr(t.slice()))},e.fromPathString=function(t){return new e(dr.fromString(t))},e.EMPTY=new e(new dr([])),e}(),gr=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return yr.comparator(e.key,t.key)},e}(),vr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return u(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):bn("Trying to compare documents on fields that don't exist")},t}(gr),br=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return u(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(gr),wr=function(e){function t(t,n){return e.call(this,t,n)||this}return u(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(gr),Er=function(){function e(e,t){this.comparator=e,this.root=t||Tr.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Tr.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Tr.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Sr(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Sr(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Sr(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Sr(this.root,e,this.comparator,!0)},e}(),Sr=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){wn(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return 0<this.nodeStack.length},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Tr=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw bn("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw bn("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw bn("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Cr=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Tr(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Tr.EMPTY=new Cr,(tr=er||(er={}))[tr.NullValue=0]="NullValue",tr[tr.BooleanValue=1]="BooleanValue",tr[tr.NumberValue=2]="NumberValue",tr[tr.TimestampValue=3]="TimestampValue",tr[tr.StringValue=4]="StringValue",tr[tr.BlobValue=5]="BlobValue",tr[tr.RefValue=6]="RefValue",tr[tr.GeoPointValue=7]="GeoPointValue",tr[tr.ArrayValue=8]="ArrayValue",tr[tr.ObjectValue=9]="ObjectValue",(rr=nr||(nr={}))[rr.Default=0]="Default",rr[rr.Estimate=1]="Estimate",rr[rr.Previous=2]="Previous";var Ir=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(nr.Estimate,n);case"previous":return new e(nr.Previous,n);case"none":case void 0:return new e(nr.Default,n);default:return bn("fromSnapshotOptions() called with invalid options.")}},e}(),kr=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return wn(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Yn(this.typeOrder,e.typeOrder)},e}(),_r=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=er.NullValue,t.internalValue=null,t}return u(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(kr),Dr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.BooleanValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Yn(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(kr),Nr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.NumberValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:r<n?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(kr);function Ar(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var xr=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Ar(this.internalValue,e.internalValue)},t}(Nr),Pr=function(e){function t(t){var n=e.call(this,t)||this;return n.internalValue=t,n}return u(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Ar(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Nr),Or=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.StringValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Yn(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(kr),Rr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.TimestampValue,n}return u(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Mr?-1:this.defaultCompareTo(e)},t}(kr),Mr=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=er.TimestampValue,r}return u(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===nr.Estimate?new Rr(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===nr.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Rr?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(kr),Lr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.BlobValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kr),Fr=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=er.RefValue,r}return u(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:yr.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(kr),Ur=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.GeoPointValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kr),qr=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.ObjectValue,n}return u(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Yn(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Yn(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(wn(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(wn(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){wn(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach(function(e){n=n instanceof t&&n.internalValue.get(e)||void 0}),n},t.prototype.toString=function(){return JSON.stringify(this.value())},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Er(Yn)),t}(kr),Br=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=er.ArrayValue,n}return u(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return Yn(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return JSON.stringify(this.value())},t}(kr),Vr=Number,jr=Vr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),zr=Vr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Qr=Vr.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Wr(e){return null==e}function Kr(e){return Qr(e)&&e<=zr&&jr<=e}var Gr,Hr,Yr=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[ii]:this.memoizedOrderBy=[new ri(e),ii];else{wn(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:ti.ASCENDING;this.memoizedOrderBy.push(a===ti.ASCENDING?ii:oi)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){wn(null==this.getInequalityFilterField()||!(t instanceof Jr)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),wn(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){wn(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";Wr(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),Wr(this.limit)||(e+=", limit: "+this.limit),0<this.explicitOrderBy.length&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return wn(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Wr(this.limit)},e.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof Jr&&n.isInequality())return n.field}return null},e.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find(function(e){return e instanceof Jr&&e.op===$r.ARRAY_CONTAINS})},e.prototype.isDocumentQuery=function(){return yr.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):yr.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){wn(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Xr=function(){function e(){}return e.create=function(e,t,n){if(n.isEqual(_r.INSTANCE)){if(t!==$r.EQUAL)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on null.");return new Zr(e)}if(n.isEqual(Pr.NAN)){if(t!==$r.EQUAL)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You can only perform equals comparisons on NaN.");return new ei(e)}return new Jr(e,t,n)},e}(),$r=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return bn("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),Jr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return u(t,e),t.prototype.matches=function(e){if(this.field.isKeyField()){wn(this.value instanceof Fr,"Comparing on key, but filter value not a RefValue"),wn(this.op!==$r.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=this.value,n=yr.comparator(e.key,t.key);return this.matchesComparison(n)}var r=e.field(this.field);return void 0!==r&&this.matchesValue(r)},t.prototype.matchesValue=function(e){var t=this;return this.op===$r.ARRAY_CONTAINS?e instanceof Br&&void 0!==e.internalValue.find(function(e){return e.isEqual(t.value)}):this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case $r.LESS_THAN:return e<0;case $r.LESS_THAN_OR_EQUAL:return e<=0;case $r.EQUAL:return 0===e;case $r.GREATER_THAN:return 0<e;case $r.GREATER_THAN_OR_EQUAL:return 0<=e;default:return bn("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==$r.EQUAL&&this.op!==$r.ARRAY_CONTAINS},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Xr),Zr=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return u(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Xr),ei=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return u(t,e),t.prototype.matches=function(e){var t=e.field(this.field),n=t&&t.value();return"number"==typeof n&&isNaN(n)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Xr),ti=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),ni=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){wn(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())wn(o instanceof Fr,"Bound has a non-key value where the key path is being used."),n=yr.comparator(o.key,t.key);else{var a=t.field(i.field);wn(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===ti.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];return n.isEqual(r)}return!0},e}(),ri=function(){function e(e,t){this.field=e,void 0===t&&(t=ti.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?vr.compareByKey(e,t):vr.compareByField(this.field,e,t);switch(this.dir){case ti.ASCENDING:return n;case ti.DESCENDING:return-1*n;default:return bn("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),ii=new ri(mr.keyField(),ti.ASCENDING),oi=new ri(mr.keyField(),ti.DESCENDING),ai=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new sr(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new sr(0,0)),e}();(Hr=Gr||(Gr={}))[Hr.Listen=0]="Listen",Hr[Hr.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",Hr[Hr.LimboResolution=2]="LimboResolution";var si,ui,ci=function(){function e(e,t,n,r,i,o){void 0===i&&(i=ai.MIN),void 0===o&&(o=Sn()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),li=function(){function e(e){this.comparator=e,this.data=new Er(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach(function(e){n=n.add(e)}),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new hi(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new hi(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),hi=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),fi=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new li(mr.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.applyTo=function(e){var t=qr.EMPTY;return this.fields.forEach(function(n){if(n.isEmpty())return e;var r=e.field(n);void 0!==r&&(t=t.set(n,r))}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),di=function(){function e(e,t){this.field=e,this.transform=t}return Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),pi=function(e,t){this.version=e,this.transformResults=t};(ui=si||(si={}))[ui.Set=0]="Set",ui[ui.Patch=1]="Patch",ui[ui.Transform=2]="Transform",ui[ui.Delete=3]="Delete";var mi=function(){function e(e,t){this.updateTime=e,this.exists=t,wn(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof vr&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof vr:(wn(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),yi=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&wn(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof vr?e.version:ai.MIN},e}(),gi=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=si.Set,i}return u(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),wn(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new vr(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=yi.getPostMutationVersion(e);return new vr(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(yi),vi=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=si.Patch,o}return u(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),wn(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new wr(this.key,t.version);var n=this.patchDocument(e);return new vr(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=yi.getPostMutationVersion(e),i=this.patchDocument(e);return new vr(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof vr?e.data:qr.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e=void 0!==r?e.set(n,r):e.delete(n)}}),e},t}(yi),bi=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=si.Transform,r.precondition=mi.exists(!0),r}return u(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),wn(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new wr(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new vr(this.key,i,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,t),o=this.transformObject(r.data,i);return new vr(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){for(var e=0,t=this.fieldTransforms;e<t.length;e++)if(!t[e].isIdempotent)return!1;return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){var e=new li(mr.comparator);return this.fieldTransforms.forEach(function(t){return e=e.add(t.field)}),new fi(e)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&Xn(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){wn(e instanceof vr,"Unknown MaybeDocument type "+e);var t=e;return wn(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];wn(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof vr&&(a=e.field(i.field)||null),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;t instanceof vr&&(s=t.field(o.field)||null),n.push(a.applyToLocalView(s,e))}return n},t.prototype.transformObject=function(e,t){wn(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(yi),wi=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=si.Delete,r}return u(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),wn(null==t.transformResults,"Transform results received by DeleteMutation."),new br(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&wn(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new br(this.key,ai.forDeletedDoc())):e},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t}(yi),Ei=function(){function e(){this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return new Mr(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),Si=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Ii(e),n=function(e){t.find(function(t){return t.isEqual(e)})||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Br(t)},e.prototype.isEqual=function(t){return t instanceof e&&Xn(t.elements,this.elements)},e}(),Ti=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Ii(e),n=function(e){t=t.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Br(t)},e.prototype.isEqual=function(t){return t instanceof e&&Xn(t.elements,this.elements)},e}(),Ci=function(){function e(e){this.operand=e,this.isIdempotent=!1}return e.prototype.applyToLocalView=function(e,t){if(e instanceof xr&&this.operand instanceof xr){var n=e.internalValue+this.operand.internalValue;return new xr(n)}return e instanceof Nr?(n=e.internalValue+this.operand.internalValue,new Pr(n)):this.operand},e.prototype.applyToRemoteDocument=function(e,t){return wn(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function Ii(e){return e instanceof Br?e.internalValue.slice():[]}var ki,_i,Di=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}();function Ni(e){switch(e){case Tn.OK:return bn("Treated status OK as error");case Tn.CANCELLED:case Tn.UNKNOWN:case Tn.DEADLINE_EXCEEDED:case Tn.RESOURCE_EXHAUSTED:case Tn.INTERNAL:case Tn.UNAVAILABLE:case Tn.UNAUTHENTICATED:return!1;case Tn.INVALID_ARGUMENT:case Tn.NOT_FOUND:case Tn.ALREADY_EXISTS:case Tn.PERMISSION_DENIED:case Tn.FAILED_PRECONDITION:case Tn.ABORTED:case Tn.OUT_OF_RANGE:case Tn.UNIMPLEMENTED:case Tn.DATA_LOSS:return!0;default:return bn("Unknown status code: "+e)}}function Ai(e){if(void 0===e)return gn("GRPC error has no .code"),Tn.UNKNOWN;switch(e){case ki.OK:return Tn.OK;case ki.CANCELLED:return Tn.CANCELLED;case ki.UNKNOWN:return Tn.UNKNOWN;case ki.DEADLINE_EXCEEDED:return Tn.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return Tn.RESOURCE_EXHAUSTED;case ki.INTERNAL:return Tn.INTERNAL;case ki.UNAVAILABLE:return Tn.UNAVAILABLE;case ki.UNAUTHENTICATED:return Tn.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return Tn.INVALID_ARGUMENT;case ki.NOT_FOUND:return Tn.NOT_FOUND;case ki.ALREADY_EXISTS:return Tn.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return Tn.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return Tn.FAILED_PRECONDITION;case ki.ABORTED:return Tn.ABORTED;case ki.OUT_OF_RANGE:return Tn.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return Tn.UNIMPLEMENTED;case ki.DATA_LOSS:return Tn.DATA_LOSS;default:return bn("Unknown status code: "+e)}}(_i=ki||(ki={}))[_i.OK=0]="OK",_i[_i.CANCELLED=1]="CANCELLED",_i[_i.UNKNOWN=2]="UNKNOWN",_i[_i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_i[_i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_i[_i.NOT_FOUND=5]="NOT_FOUND",_i[_i.ALREADY_EXISTS=6]="ALREADY_EXISTS",_i[_i.PERMISSION_DENIED=7]="PERMISSION_DENIED",_i[_i.UNAUTHENTICATED=16]="UNAUTHENTICATED",_i[_i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_i[_i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_i[_i.ABORTED=10]="ABORTED",_i[_i.OUT_OF_RANGE=11]="OUT_OF_RANGE",_i[_i.UNIMPLEMENTED=12]="UNIMPLEMENTED",_i[_i.INTERNAL=13]="INTERNAL",_i[_i.UNAVAILABLE=14]="UNAVAILABLE",_i[_i.DATA_LOSS=15]="DATA_LOSS";var xi=new Er(yr.comparator);function Pi(){return xi}function Oi(){return Pi()}var Ri=new Er(yr.comparator);function Mi(){return Ri}var Li=new Er(yr.comparator);function Fi(){return Li}var Ui=new li(yr.comparator);function qi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ui,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Bi=new li(Yn);function Vi(){return Bi}var ji,zi,Qi,Wi,Ki=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||yr.comparator(t.key,n.key)}:function(e,t){return yr.comparator(e.key,t.key)},this.keyedMap=Mi(),this.sortedSet=new Er(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();(zi=ji||(ji={}))[zi.Added=0]="Added",zi[zi.Removed=1]="Removed",zi[zi.Modified=2]="Modified",zi[zi.Metadata=3]="Metadata",(Wi=Qi||(Qi={}))[Wi.Local=0]="Local",Wi[Wi.Synced=1]="Synced";var Gi,Hi,Yi=function(){function e(){this.changeMap=new Er(yr.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==ji.Added&&n.type===ji.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===ji.Metadata&&n.type!==ji.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===ji.Modified&&n.type===ji.Modified?this.changeMap=this.changeMap.insert(t,{type:ji.Modified,doc:e.doc}):e.type===ji.Modified&&n.type===ji.Added?this.changeMap=this.changeMap.insert(t,{type:ji.Added,doc:e.doc}):e.type===ji.Removed&&n.type===ji.Added?this.changeMap=this.changeMap.remove(t):e.type===ji.Removed&&n.type===ji.Modified?this.changeMap=this.changeMap.insert(t,{type:ji.Removed,doc:n.doc}):e.type===ji.Added&&n.type===ji.Removed?this.changeMap=this.changeMap.insert(t,{type:ji.Modified,doc:e.doc}):bn("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Xi=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:ji.Added,doc:e})}),new e(t,n,Ki.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),$i=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Ji.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(ai.MIN,i,Vi(),Pi(),qi())},e}(),Ji=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(Sn(),n,qi(),qi(),qi())},e}(),Zi=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},eo=function(e,t){this.targetId=e,this.existenceFilter=t};(Hi=Gi||(Gi={}))[Hi.NoChange=0]="NoChange",Hi[Hi.Added=1]="Added",Hi[Hi.Removed=2]="Removed",Hi[Hi.Current=3]="Current",Hi[Hi.Reset=4]="Reset";var to=function(e,t,n,r){void 0===n&&(n=Sn()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},no=function(){function e(){this.pendingResponses=0,this.documentChanges=oo(),this._resumeToken=Sn(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=qi(),t=qi(),n=qi();return this.documentChanges.forEach(function(r,i){switch(i){case ji.Added:e=e.add(r);break;case ji.Modified:t=t.add(r);break;case ji.Removed:n=n.add(r);break;default:bn("Encountered invalid change type: "+i)}}),new Ji(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=oo()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),ro=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Pi(),this.pendingDocumentTargetMapping=io(),this.pendingTargetResets=new li(Yn)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof vr?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof br&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case Gi.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Gi.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Gi.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),wn(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Gi.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Gi.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:bn("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):Dn(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new yr(i.path);this.removeDocumentFromTarget(t,o,new br(o,ai.forDeletedDoc()))}else wn(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};Dn(this.targetStates,function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new yr(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new br(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}});var r=qi();this.pendingDocumentTargetMapping.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===Gr.LimboResolution||(i=!1)}),i&&(r=r.add(e))});var i=new $i(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Pi(),this.pendingDocumentTargetMapping=io(),this.pendingTargetResets=new li(Yn),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?ji.Modified:ji.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,ji.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new no),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new li(Yn),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;wn(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new no,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function io(){return new Er(yr.comparator)}function oo(){return new Er(yr.comparator)}var ao,so,uo=((ao={})[ti.ASCENDING.name]="ASCENDING",ao[ti.DESCENDING.name]="DESCENDING",ao),co=((so={})[$r.LESS_THAN.name]="LESS_THAN",so[$r.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",so[$r.GREATER_THAN.name]="GREATER_THAN",so[$r.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",so[$r.EQUAL.name]="EQUAL",so[$r.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",so),lo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(e,t){wn(!Wr(e),t+" is missing")}function fo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):bn("can't parse "+e)}var po=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?Tn.UNKNOWN:Ai(e.code);return new Cn(t,e.message||"")},e.prototype.toInt32Value=function(e){return Wr(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Wr(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);wn(!!e,"Cannot deserialize null or undefined timestamp.");var t=fo(e.seconds||"0"),n=e.nanos||0;return new sr(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=lo.exec(e);if(wn(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new sr(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(wn(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ir.fromBase64String(e)):(wn(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),ir.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return wn(!!e,"Trying to deserialize version that isn't set"),ai.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=dr.fromString(e);return wn(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return wn(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),wn(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new yr(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?dr.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new dr(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new dr(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return wn(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof _r)return{nullValue:"NULL_VALUE"};if(e instanceof Dr)return{booleanValue:e.value()};if(e instanceof xr)return{integerValue:""+e.value()};if(e instanceof Pr){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Or?{stringValue:e.value()}:e instanceof qr?{mapValue:this.toMapValue(e)}:e instanceof Br?{arrayValue:this.toArrayValue(e)}:e instanceof Rr?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Ur?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Lr?{bytesValue:this.toBytes(e.value())}:e instanceof Fr?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:bn("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this,n=e.value_type;if(mo(e,n,"nullValue"))return _r.INSTANCE;if(mo(e,n,"booleanValue"))return Dr.of(e.booleanValue);if(mo(e,n,"integerValue"))return new xr(fo(e.integerValue));if(mo(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Pr.NAN;if("Infinity"===e.doubleValue)return Pr.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Pr.NEGATIVE_INFINITY}return new Pr(e.doubleValue)}if(mo(e,n,"stringValue"))return new Or(e.stringValue);if(mo(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(mo(e,n,"arrayValue")){ho(e.arrayValue,"arrayValue");var r=e.arrayValue.values||[];return new Br(r.map(function(e){return t.fromValue(e)}))}if(mo(e,n,"timestampValue"))return ho(e.timestampValue,"timestampValue"),new Rr(this.fromTimestamp(e.timestampValue));if(mo(e,n,"geoPointValue")){ho(e.geoPointValue,"geoPointValue");var i=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new Ur(new ar(i,o))}if(mo(e,n,"bytesValue")){ho(e.bytesValue,"bytesValue");var a=this.fromBlob(e.bytesValue);return new Lr(a)}if(mo(e,n,"referenceValue")){ho(e.referenceValue,"referenceValue");var s=this.fromResourceName(e.referenceValue),u=new lr(s.get(1),s.get(3)),c=new yr(this.extractLocalPathFromResourceName(s));return new Fr(u,c)}return bn("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return wn(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new vr(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(e){var t=this,n=e,r=qr.EMPTY;return Nn(n,function(e,n){r=r.set(new mr([e]),t.fromValue(n))}),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){wn(!!e.found,"Tried to deserialize a found document from a missing document."),ho(e.found.name,"doc.found.name"),ho(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new vr(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){wn(!!e.missing,"Tried to deserialize a missing document from a found document."),wn(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new br(t,n)},e.prototype.fromMaybeDocument=function(e){var t=e.result;return mo(e,t,"found")?this.fromFound(e):mo(e,t,"missing")?this.fromMissing(e):bn("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Gi.Added:return"ADD";case Gi.Current:return"CURRENT";case Gi.NoChange:return"NO_CHANGE";case Gi.Removed:return"REMOVE";case Gi.Reset:return"RESET";default:return bn("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof eo)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Zi){if(e.newDoc instanceof vr){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof br)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof to){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return ki.OK;switch(e){case Tn.OK:return ki.OK;case Tn.CANCELLED:return ki.CANCELLED;case Tn.UNKNOWN:return ki.UNKNOWN;case Tn.DEADLINE_EXCEEDED:return ki.DEADLINE_EXCEEDED;case Tn.RESOURCE_EXHAUSTED:return ki.RESOURCE_EXHAUSTED;case Tn.INTERNAL:return ki.INTERNAL;case Tn.UNAVAILABLE:return ki.UNAVAILABLE;case Tn.UNAUTHENTICATED:return ki.UNAUTHENTICATED;case Tn.INVALID_ARGUMENT:return ki.INVALID_ARGUMENT;case Tn.NOT_FOUND:return ki.NOT_FOUND;case Tn.ALREADY_EXISTS:return ki.ALREADY_EXISTS;case Tn.PERMISSION_DENIED:return ki.PERMISSION_DENIED;case Tn.FAILED_PRECONDITION:return ki.FAILED_PRECONDITION;case Tn.ABORTED:return ki.ABORTED;case Tn.OUT_OF_RANGE:return ki.OUT_OF_RANGE;case Tn.UNIMPLEMENTED:return ki.UNIMPLEMENTED;case Tn.DATA_LOSS:return ki.DATA_LOSS;default:return bn("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return bn("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(mo(e,n,"targetChange")){ho(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new to(r,i,o,s||null)}else if(mo(e,n,"documentChange")){ho(e.documentChange,"documentChange"),ho(e.documentChange.document,"documentChange.name"),ho(e.documentChange.document.name,"documentChange.document.name"),ho(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),f=new vr(c,l,h,{},u.document),d=u.targetIds||[],p=u.removedTargetIds||[];t=new Zi(d,p,f.key,f)}else if(mo(e,n,"documentDelete")){ho(e.documentDelete,"documentDelete"),ho(e.documentDelete.document,"documentDelete.document");var m=e.documentDelete;c=this.fromName(m.document),l=m.readTime?this.fromVersion(m.readTime):ai.forDeletedDoc(),f=new br(c,l),p=m.removedTargetIds||[],t=new Zi([],p,f.key,f)}else if(mo(e,n,"documentRemove")){ho(e.documentRemove,"documentRemove"),ho(e.documentRemove.document,"documentRemove");var y=e.documentRemove;c=this.fromName(y.document),p=y.removedTargetIds||[],t=new Zi([],p,c,null)}else{if(!mo(e,n,"filter"))return bn("Unknown change type "+JSON.stringify(e));ho(e.filter,"filter"),ho(e.filter.targetId,"filter.targetId");var g=e.filter,v=g.count||0,b=new Di(v),w=g.targetId;t=new eo(w,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Gi.NoChange:"ADD"===e?Gi.Added:"REMOVE"===e?Gi.Removed:"CURRENT"===e?Gi.Current:"RESET"===e?Gi.Reset:bn("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!mo(e,e.response_type,"targetChange"))return ai.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?ai.MIN:t.readTime?this.fromVersion(t.readTime):ai.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof gi)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof wi)t={delete:this.toName(e.key)};else if(e instanceof vi)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof bi))return bn("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):mi.NONE;if(e.update){ho(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new vi(r,i,o,n)}return new gi(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new wi(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return wn(!0===n.exists,'Transforms only support precondition "exists == true"'),new bi(r,a)}return bn("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return wn(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:bn("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?mi.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?mi.exists(e.exists):mi.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new pi(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(wn(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof Ei)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Si)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Ti)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Ci)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw bn("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=e.transform_type,r=null;if(mo(e,n,"setToServerValue"))wn("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),r=Ei.instance;else if(mo(e,n,"appendMissingElements")){var i=e.appendMissingElements.values||[];r=new Si(i.map(function(e){return t.fromValue(e)}))}else if(mo(e,n,"removeAllFromArray"))i=e.removeAllFromArray.values||[],r=new Ti(i.map(function(e){return t.fromValue(e)}));else if(mo(e,n,"increment")){var o=this.fromValue(e.increment);wn(o instanceof Nr,"NUMERIC_ADD transform requires a NumberValue"),r=new Ci(o)}else bn("Unknown transform proto: "+JSON.stringify(e));var a=mr.fromServerFormat(e.fieldPath);return new di(a,r)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;wn(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Yr.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(wn(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(wn(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){wn(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Yr(t,i,s,a,u,c,l)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case Gr.Listen:return null;case Gr.ExistenceFilterMismatch:return"existence-filter-mismatch";case Gr.LimboResolution:return"limbo-document";default:return bn("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof Jr?t.toRelationFilter(e):t.toUnaryFilter(e)});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):bn("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new ni(r,n)},e.prototype.toDirection=function(e){return uo[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return ti.ASCENDING;case"DESCENDING":return ti.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return co[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return $r.EQUAL;case"GREATER_THAN":return $r.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return $r.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return $r.LESS_THAN;case"LESS_THAN_OR_EQUAL":return $r.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return $r.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return bn("Unspecified relation");default:return bn("Unknown relation")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return mr.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new ri(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof Jr?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:bn("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new Jr(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof ei?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof Zr?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:bn("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new ei(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new Zr(n);case"OPERATOR_UNSPECIFIED":return bn("Unspecified filter");default:return bn("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return mr.fromServerFormat(e)});return fi.fromArray(t)},e}();function mo(e,t,n){return t===n||!t&&n in e}var yo=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){wn(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){wn(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){wn(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){wn(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){wn(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){wn(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),go="Connection",vo={BatchGetDocuments:"batchGet",Commit:"commit"},bo="gl-js/ fire/"+fn,wo=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=bo},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise(function(o,a){var s=new on;s.listenOnce(nn.COMPLETE,function(){try{switch(s.getLastErrorCode()){case tn.NO_ERROR:var t=s.getResponseJson();yn(go,"XHR received:",JSON.stringify(t)),o(t);break;case tn.TIMEOUT:yn(go,'RPC "'+e+'" timed out'),a(new Cn(Tn.DEADLINE_EXCEEDED,"Request time out"));break;case tn.HTTP_ERROR:var n=s.getStatus();yn(go,'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),0<n?a(new Cn(function(e){switch(e){case 200:return Tn.OK;case 400:return Tn.INVALID_ARGUMENT;case 401:return Tn.UNAUTHENTICATED;case 403:return Tn.PERMISSION_DENIED;case 404:return Tn.NOT_FOUND;case 409:return Tn.ABORTED;case 416:return Tn.OUT_OF_RANGE;case 429:return Tn.RESOURCE_EXHAUSTED;case 499:return Tn.CANCELLED;case 500:return Tn.UNKNOWN;case 501:return Tn.UNIMPLEMENTED;case 503:return Tn.UNAVAILABLE;case 504:return Tn.DEADLINE_EXCEEDED;default:return 200<=e&&e<300?Tn.OK:400<=e&&e<500?Tn.FAILED_PRECONDITION:500<=e&&e<600?Tn.INTERNAL:Tn.UNKNOWN}}(n),"Server responded with status "+s.getStatusText())):(yn(go,'RPC "'+e+'" failed'),a(new Cn(Tn.UNAVAILABLE,"Connection failed.")));break;default:bn('RPC "'+e+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{yn(go,'RPC "'+e+'" completed.')}});var u=JSON.stringify(t);yn(go,"XHR sending: ",i+" "+u);var c={"Content-Type":"text/plain"};r.modifyHeadersForRequest(c,n),s.send(i,"POST",u,c,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=en(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0};this.modifyHeadersForRequest(i.initMessageHeaders,t),"object"==typeof navigator&&"ReactNative"===navigator.product||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");yn(go,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,u=!1,c=new yo({sendFn:function(e){u?yn(go,"Not sending because WebChannel is closed:",e):(s||(yn(go,"Opening WebChannel transport."),a.open(),s=!0),yn(go,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),l=function(e,t){a.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})};return l(rn.EventType.OPEN,function(){u||yn(go,"WebChannel transport opened.")}),l(rn.EventType.CLOSE,function(){u||(u=!0,yn(go,"WebChannel transport closed"),c.callOnClose())}),l(rn.EventType.ERROR,function(e){u||(u=!0,yn(go,"WebChannel transport errored:",e),c.callOnClose(new Cn(Tn.UNAVAILABLE,"The operation could not be completed")))}),l(rn.EventType.MESSAGE,function(e){if(!u){var t=e.data[0];wn(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){yn(go,"WebChannel received error:",n);var r=n.status,i=function(e){var t=ki[e];if(void 0!==t)return Ai(t)}(r),o=n.message;void 0===i&&(i=Tn.INTERNAL,o="Unknown error status: "+r+" with message "+n.message),u=!0,c.callOnClose(new Cn(i,o)),a.close()}else yn(go,"WebChannel received:",t),c.callOnMessage(t)}}),setTimeout(function(){c.callOnOpen()},0),c},e.prototype.makeUrl=function(e){var t=vo[e];wn(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),Eo=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new wo(e))},e.prototype.newSerializer=function(e){return new po(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();En.setPlatform(new Eo);var So,To,Co=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),Io=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};(To=So||(So={})).All="all",To.ListenStreamIdle="listen_stream_idle",To.ListenStreamConnectionBackoff="listen_stream_connection_backoff",To.WriteStreamIdle="write_stream_idle",To.WriteStreamConnectionBackoff="write_stream_connection_backoff",To.OnlineStateTimeout="online_state_timeout",To.ClientMetadataRefresh="client_metadata_refresh",To.LruGarbageCollection="lru_garbage_collection";var ko=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Cn(Tn.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),_o=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw gn("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),wn(0<=t,"Attempted to schedule an operation with a negative delay of "+t),wn(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=ko.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&bn("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){wn(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){wn(e===So.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==So.All&&i.timerId===e)break}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);wn(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),Do="\x01",No="\x01",Ao="\x10",xo="\x11";function Po(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=Ro(t)),t=Oo(e.get(n),t);return Ro(t)}function Oo(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Do+Ao;break;case Do:n+=Do+xo;break;default:n+=o}}return n}function Ro(e){return e+Do+No}function Mo(e){var t=e.length;if(wn(2<=t,"Invalid path "+e),2===t)return wn(e.charAt(0)===Do&&e.charAt(1)===No,"Non-empty path "+e+" had length 2"),dr.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Do,o);switch((a<0||n<a)&&bn('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case No:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case Ao:i+=e.substring(o,a),i+="\0";break;case xo:i+=e.substring(o,a+1);break;default:bn('Invalid encoded resource path: "'+e+'"')}o=a+2}return new dr(r)}var Lo,Fo,Uo=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,wn(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&wn(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;wn(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&wn(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},qi())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Xn(this.mutations,e.mutations)&&Xn(this.baseMutations,e.baseMutations)},e}(),qo=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){wn(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Fi(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Bo=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&bn("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next(function(n){return n?e.resolve(n):t()})},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)},e}(),Vo=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return wn(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wo(e).iterate({index:Ta.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Qo(n),Go(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=Qo(t),Go(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Ko(e),a=Wo(e);return a.add({}).next(function(s){wn("number"==typeof s,"Auto-generated key is not a number");var u=new Uo(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,f=r;h<f.length;h++){var d=f[h],p=Ca.key(i.userId,d.key.path,s);l.push(a.put(c)),l.push(o.put(p,Ca.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,d.key.path.popLast()))}return Bo.waitFor(l).next(function(){return u})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Wo(e).get(t).next(function(e){return e?(wn(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Bo.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this;return this.getMutationQueueMetadata(e).next(function(r){var i=t+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return Wo(e).iterate({index:Ta.userMutationsIndex,range:o},function(e,t,r){t.userId===n.userId&&(wn(t.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(t)),r.done()}).next(function(){return a})})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wo(e).loadAll(Ta.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Ca.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ko(e).iterate({range:i},function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Mo(u);if(s===n.userId&&t.path.isEqual(l))return Wo(e).get(c).next(function(e){if(!e)throw bn("Dangling document-mutation reference found: "+r+" which points to "+c);wn(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))});a.done()}).next(function(){return o})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new li(Yn),i=[];return t.forEach(function(t){var o=Ca.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Ko(e).iterate({range:a},function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Mo(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()});i.push(s)}),Bo.waitFor(i).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;wn(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),wn(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=Ca.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new li(Yn);return Ko(e).iterate({range:a},function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Mo(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()}).next(function(){return n.lookupMutationBatches(e,s)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Wo(e).get(t).next(function(e){if(null===e)throw bn("Dangling document-mutation reference found, which points to "+t);wn(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Bo.waitFor(i).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return zo(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Bo.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Bo.resolve();var r=IDBKeyRange.lowerBound(Ca.prefixForUser(t.userId)),i=[];return Ko(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var o=Mo(e[1]);i.push(o)}else r.done()}).next(function(){wn(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return jo(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return Go(e).get(this.userId).next(function(e){return e||new Sa(t.userId,-1,"")})},e}();function jo(e,t,n){var r=Ca.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ko(e).iterate({range:o,keysOnly:!0},function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()}).next(function(){return a})}function zo(e,t,n){var r=e.store(Ta.store),i=e.store(Ca.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){wn(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Ca.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Bo.waitFor(o).next(function(){return c})}function Qo(e){return e instanceof Uint8Array?(wn("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/schach-app-web-firebase"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Wo(e){return Xa.getStore(e,Ta.store)}function Ko(e){return Xa.getStore(e,Ca.store)}function Go(e){return Xa.getStore(e,Sa.store)}(Fo=Lo||(Lo={}))[Fo.QueryCache=0]="QueryCache",Fo[Fo.SyncEngine=1]="SyncEngine";var Ho=function(){function e(e,t){wn((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){wn((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(Lo.QueryCache,2)},e.forSyncEngine=function(){return new e(Lo.SyncEngine)},e}(),Yo="SimpleDb",Xo=function(){function e(e){this.db=e}return e.openOrCreate=function(t,n,r){return wn(e.isAvailable(),"IndexedDB not supported in current environment."),yn(Yo,"Opening database:",t),new Bo(function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onblocked=function(){o(new Cn(Tn.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new Cn(Tn.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(e){yn(Yo,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new Jo(a.transaction);r.createOrUpgrade(n,i,e.oldVersion,va).next(function(){yn(Yo,"Database upgrade to version "+va+" complete")})}}).toPromise()},e.delete=function(e){return yn(Yo,"Removing database:",e),ea(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/schach-app-web-firebase"}).USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/"))},e.getStore=function(e,t){return e.store(t)},e.prototype.runTransaction=function(e,t,n){var r=Jo.open(this.db,e,t),i=n(r).catch(function(e){return r.abort(e),Bo.reject(e)}).toPromise();return i.catch(function(){}),r.completionPromise.then(function(){return i})},e.prototype.close=function(){this.db.close()},e}(),$o=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return ea(this.dbCursor.delete())},e}(),Jo=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Io,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){t.completionDeferred.reject(e.target.error)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(yn(Yo,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return wn(!!t,"Object store not part of transaction: "+e),new Zo(t)},e}(),Zo=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){return ea(void 0!==t?(yn(Yo,"PUT",this.store.name,e,t),this.store.put(t,e)):(yn(Yo,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},e.prototype.add=function(e){return yn(Yo,"ADD",this.store.name,e,e),ea(this.store.add(e))},e.prototype.get=function(e){var t=this;return ea(this.store.get(e)).next(function(n){return void 0===n&&(n=null),yn(Yo,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return yn(Yo,"DELETE",this.store.name,e),ea(this.store.delete(e))},e.prototype.count=function(){return yn(Yo,"COUNT",this.store.name),ea(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},e.prototype.deleteAll=function(e,t){yn(Yo,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Bo(function(n,r){t.onerror=function(e){r(e.target.error)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Bo(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new $o(i),a=t(i.primaryKey,i.value,o);if(a instanceof Bo){var s=a.catch(function(e){return o.done(),Bo.reject(e)});n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}}).next(function(){return Bo.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(wn(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function ea(e){return new Bo(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){n(e.target.error)}})}var ta=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=Ho.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return ai.fromTimestamp(new sr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return ia(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return na(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return wn(0<t.targetCount,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return na(e).iterate(function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))}).next(function(){return Bo.waitFor(o)}).next(function(){return i})},e.prototype.forEachTarget=function(e,t){var n=this;return na(e).iterate(function(e,r){var i=n.serializer.fromDbTarget(r);t(i)})},e.prototype.retrieveMetadata=function(e){return ra(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Xa.getStore(n,xa.store)).put(xa.key,t);var n},e.prototype.saveQueryData=function(e,t){return na(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return na(e).iterate({range:i,index:Na.queryTargetsIndexName},function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())}).next(function(){return o})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=oa(e);return t.forEach(function(t){var a=Po(t.path);i.push(o.put(new Aa(n,a))),i.push(r.referenceDelegate.addReference(e,t))}),Bo.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=oa(e);return Bo.forEach(t,function(t){var o=Po(t.path);return Bo.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=oa(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=oa(e),i=qi();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=Mo(e[1]),o=new yr(r);i=i.add(o)}).next(function(){return i})},e.prototype.containsKey=function(e,t){var n=Po(t.path),r=IDBKeyRange.bound([n],[$n(n)],!1,!0),i=0;return oa(e).iterate({index:Aa.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return na(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function na(e){return Xa.getStore(e,Na.store)}function ra(e){return Xo.getStore(e,xa.store).get(xa.key).next(function(e){return wn(null!==e,"Missing metadata row."),e})}function ia(e){return ra(e).next(function(e){return e.highestListenSequenceNumber})}function oa(e){return Xa.getStore(e,Aa.store)}var aa=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Nn(this.inner,function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}})},e.prototype.isEmpty=function(){return An(this.inner)},e}(),sa=function(){function e(){this.changes=Pi(),this.documentSizes=new aa(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges().get(t);return r?Bo.resolve(r):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return wn(null!==this.changes,"Changes have already been applied."),this.changes},e}(),ua="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",ca=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Xo.getStore(e,Ra.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(0<t.length){for(var i=fa(e),o=qi(),a=0,s=t;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(pa(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(e,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(da(e).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(e,n))}return Bo.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=fa(e),r=pa(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return ma(e)}):Bo.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return fa(e).get(pa(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return fa(e).get(pa(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:ma(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=Oi();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oi(),i=new Er(yr.comparator);return this.forEachDbEntry(e,t,function(e,t){i=t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i.insert(e,ma(t))):(r=r.insert(e,null),i.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:i}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Bo.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return fa(e).iterate({range:r},function(e,t,r){for(var a=yr.fromSegments(e);o&&yr.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;wn(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=Mi(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return fa(e).iterate({range:a},function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof vr&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;wn(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=qi(),r=Pi(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=da(e);return a.iterate({range:i},function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next(function(){return Bo.reject(new Cn(Tn.DATA_LOSS,ua))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var i=[];return n.forEach(function(n){i.push(t.getEntry(e,n).next(function(e){var t=e||new br(n,ai.forDeletedDoc());r=r.insert(n,t)}))}),Bo.waitFor(i)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return da(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new ha(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return la(e).get(Da.key).next(function(e){return wn(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return la(e).put(Da.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e}();function la(e){return Xa.getStore(e,Da.store)}var ha=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return u(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentCache.serializer.toDbRemoteDocument(n),a=t.documentSizes.get(e);wn(void 0!==a,"Attempting to change document "+e.toString()+" without having read it first");var s=ma(o);r+=s-a,i.push({key:e,doc:o})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(sa);function fa(e){return Xa.getStore(e,_a.store)}function da(e){return Xa.getStore(e,Ra.store)}function pa(e){return e.path.toArray()}function ma(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw bn("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var ya=function(){function e(){this.collectionParentIndex=new ga}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Bo.resolve()},e.prototype.getCollectionParents=function(e,t){return Bo.resolve(this.collectionParentIndex.getEntries(t))},e}(),ga=function(){function e(){this.index={}}return e.prototype.add=function(e){wn(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new li(dr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new li(dr.comparator)).toArray()},e}(),va=8,ba=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i,o=this;wn(n<r&&0<=n&&r<=va,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&1<=r&&(e.createObjectStore(Ea.store),(i=e).createObjectStore(Sa.store,{keyPath:Sa.keyPath}),i.createObjectStore(Ta.store,{keyPath:Ta.keyPath,autoIncrement:!0}).createIndex(Ta.userMutationsIndex,Ta.userMutationsKeyPath,{unique:!0}),i.createObjectStore(Ca.store),Oa(e),e.createObjectStore(_a.store));var a,s=Bo.resolve();return n<3&&3<=r&&(0!==n&&((a=e).deleteObjectStore(Aa.store),a.deleteObjectStore(Na.store),a.deleteObjectStore(xa.store),Oa(e)),s=s.next(function(){return e=t.store(xa.store),n=new xa(0,0,ai.MIN.toTimestamp(),0),e.put(xa.key,n);var e,n})),n<4&&4<=r&&(0!==n&&(s=s.next(function(){return n=e,(r=t).store(Ta.store).loadAll().next(function(e){n.deleteObjectStore(Ta.store);var t=n.createObjectStore(Ta.store,{keyPath:Ta.keyPath,autoIncrement:!0});t.createIndex(Ta.userMutationsIndex,Ta.userMutationsKeyPath,{unique:!0});var i=r.store(Ta.store),o=e.map(function(e){return i.put(e)});return Bo.waitFor(o)});var n,r})),s=s.next(function(){e.createObjectStore(Ma.store,{keyPath:Ma.keyPath}),e.createObjectStore(Ra.store,{keyPath:"id",autoIncrement:!0})})),n<5&&5<=r&&(s=s.next(function(){return o.removeAcknowledgedMutations(t)})),n<6&&6<=r&&(s=s.next(function(){return e.createObjectStore(Da.store),o.addDocumentGlobal(t)})),n<7&&7<=r&&(s=s.next(function(){return o.ensureSequenceNumbers(t)})),n<8&&8<=r&&(s=s.next(function(){return o.createCollectionParentIndex(e,t)})),s},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(_a.store).iterate(function(e,n){t+=ma(n)}).next(function(){var n=new Da(t);return e.store(Da.store).put(Da.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Sa.store),r=e.store(Ta.store);return n.loadAll().next(function(n){return Bo.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Ta.userMutationsIndex,i).next(function(r){return Bo.forEach(r,function(r){wn(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return zo(e,n.userId,i).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Aa.store),n=e.store(_a.store);return ia(e).next(function(e){var r=[];return n.iterate(function(n,i){var o=new dr(n),a=[0,Po(o)];r.push(t.get(a).next(function(n){return n?Bo.resolve():(r=o,t.put(new Aa(0,Po(r),e)));var r}))}).next(function(){return Bo.waitFor(r)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(Pa.store,{keyPath:Pa.keyPath});var n=t.store(Pa.store),r=new ga,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Po(i)})}};return t.store(_a.store).iterate({keysOnly:!0},function(e,t){var n=new dr(e);return i(n.popLast())}).next(function(){return t.store(Ca.store).iterate({keysOnly:!0},function(e,t){e[0];var n=e[1],r=(e[2],Mo(n));return i(r.popLast())})})},e}(),wa=function(e,t){this.seconds=e,this.nanoseconds=t},Ea=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),Sa=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),Ta=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),Ca=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Po(t)]},e.key=function(e,t,n){return[e,Po(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),Ia=function(e,t){this.path=e,this.readTime=t},ka=function(e,t){this.path=e,this.version=t},_a=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),Da=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),Na=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Aa=function(){function e(e,t,n){this.targetId=e,this.path=t,wn(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),xa=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),Pa=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function Oa(e){e.createObjectStore(Aa.store,{keyPath:Aa.keyPath}).createIndex(Aa.documentTargetsIndex,Aa.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Na.store,{keyPath:Na.keyPath}).createIndex(Na.queryTargetsIndexName,Na.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(xa.store)}var Ra=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),Ma=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}(),La=[Sa.store,Ta.store,Ca.store,_a.store,Na.store,Ea.store,xa.store,Aa.store].concat([Ma.store,Ra.store]).concat([Da.store]).concat([Pa.store]),Fa=function(){function e(){this.collectionParentsCache=new ga}return e.prototype.addToCollectionParentIndex=function(e,t){if(wn(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){wn(1<=t.length,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return Ua(e).put({collectionId:n,parent:Po(r)})}return Bo.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[$n(t),""],!1,!0);return Ua(e).loadAll(r).next(function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Mo(o.parent))}return n})},e}();function Ua(e){return Xa.getStore(e,Pa.store)}var qa=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=yr.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new br(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=yr.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new wr(t,n)):bn("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof vr){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new _a(null,null,t,n)}if(e instanceof br){var r=e.key.path.toArray(),i=this.toDbTimestamp(e.version);return n=e.hasCommittedMutations,new _a(null,new Ia(r,i),null,n)}return e instanceof wr?(r=e.key.path.toArray(),i=this.toDbTimestamp(e.version),new _a(new ka(r,i),null,null,!0)):bn("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new wa(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new sr(e.seconds,e.nanoseconds);return ai.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Ta(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=sr.fromMillis(e.localWriteTimeMs);return new Uo(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Po(e.path))}),t},e.prototype.fromDbResourcePaths=function(e){for(var t=qi(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new yr(Mo(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new ci(t,e.targetId,Gr.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){wn(Gr.Listen===e.purpose,"Only queries with purpose "+Gr.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),n=e.resumeToken instanceof Uint8Array?(wn("YES"===Object({NODE_ENV:"production",PUBLIC_URL:"/schach-app-web-firebase"}).USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new Na(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function Ba(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Yn(n,i);return 0===a?Yn(r,o):a}var Va=function(){function e(e){this.maxElements=e,this.buffer=new li(Ba),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ba(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),ja={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},za=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Qa=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}return e.prototype.start=function(){wn(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==za.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;wn(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;yn("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(So.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch($a)})},e}(),Wa=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Bo.resolve(Co.INVALID);var r=new Va(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===za.COLLECTION_DISABLED?(yn("LruGarbageCollector","Garbage collection skipped; disabled"),Bo.resolve(ja)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(yn("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ja):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c,l=this;return o=Date.now(),this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return r=t>l.params.maximumSequenceNumbersToCollect?(yn("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),l.params.maximumSequenceNumbersToCollect):t,a=Date.now(),l.nthSequenceNumber(e,r)}).next(function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)}).next(function(e){return c=Date.now(),pn()<=cn.DEBUG&&yn("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-o)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-o)+"ms"),Bo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})},e}(),Ka="IndexedDbPersistence",Ga="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ha="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Ya=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return u(t,e),t}(function(){}),Xa=function(){function e(t,n,r,i,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new Cn(Tn.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new es(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new qa(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new ta(this.referenceDelegate,this.serializer),this.indexManager=new Fa,this.remoteDocumentCache=new ca(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new Cn(Tn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Ya)return Xo.getStore(e.simpleDbTransaction,t);throw bn("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,o,a){return c(this,void 0,void 0,function(){var s;return l(this,function(u){switch(u.label){case 0:return[4,(s=new e(t,n,r,i,o,a)).start()];case 1:return u.sent(),[2,s]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,o,a,s){return c(this,void 0,void 0,function(){var u;return l(this,function(c){switch(c.label){case 0:return[4,(u=new e(t,n,r,i,o,a,s)).start()];case 1:return c.sent(),[2,u]}})})},e.prototype.start=function(){var e=this;return wn(!this.started,"IndexedDbPersistence double-started!"),wn(null!==this.window,"Expected 'window' to be defined"),Xo.openOrCreate(this.dbName,va,new ba(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[xa.store],function(t){return ia(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new Co(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",La,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return c(t,void 0,void 0,function(){return l(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return c(t,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",La,function(t){return Za(t).put(new Ma(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return Ja(e).get(Ea.key).next(function(e){return Bo.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Za(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return c(this,void 0,void 0,function(){var t,n,r=this;return l(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(i){var o=e.getStore(i,Ma.store);return o.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return Bo.forEach(n,function(e){return o.delete(e.clientId)})}).next(function(){if(0<(t=t.filter(function(e){return e.clientId!==r.clientId})).length){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}})})]);case 1:i.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),i.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(So.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Ja(e).get(Ea.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new Cn(Tn.FAILED_PRECONDITION,Ha);return!1}}return!(!t.networkEnabled||!t.inForeground)||Za(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&yn(Ka,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(e){return c(this,void 0,void 0,function(){var t=this;return l(this,function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[Ea.store,Ma.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),e?[4,Xo.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[Ma.store],function(t){return Za(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return wn(this.started,"Cannot initialize MutationQueue before persistence is started."),Vo.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return wn(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return wn(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return wn(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return yn(Ka,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",La,function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next(function(t){if(!t)throw gn("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new Cn(Tn.FAILED_PRECONDITION,Ga);return n(new Ya(i,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(i).next(function(){return e})}):r.verifyAllowTabSynchronization(i).next(function(){return n(new Ya(i,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Ja(e).get(Ea.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new Cn(Tn.FAILED_PRECONDITION,Ha)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Ea(this.clientId,this.allowTabSynchronization,Date.now());return Ja(e).put(Ea.key,t)},e.isAvailable=function(){return Xo.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Ja(e);return n.get(Ea.key).next(function(e){return t.isLocalClient(e)?(yn(Ka,"Releasing primary lease."),n.delete(Ea.key)):Bo.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(n<e)||(gn("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(wn(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(wn("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return yn(Ka,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return gn(Ka,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(r){gn("Failed to set zombie client id.",r)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(r){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function $a(e){return c(this,void 0,void 0,function(){return l(this,function(t){if((n=e).code!==Tn.FAILED_PRECONDITION||n.message!==Ga)throw e;var n;return yn(Ka,"Unexpectedly lost primary lease"),[2]})})}function Ja(e){return e.store(Ea.store)}function Za(e){return e.store(Ma.store)}var es=function(){function e(e,t){this.db=e,this.garbageCollector=new Wa(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return ts(e,t)},e.prototype.removeReference=function(e,t){return ts(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return ts(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Bo.resolve(!0):(r=t,i=!1,Go(n=e).iterateSerial(function(e){return jo(n,e,r).next(function(e){return e&&(i=!0),Bo.resolve(!e)})}).next(function(){return i}));var n,r,i},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(e,function(a,s){if(s<=t){var u=n.isPinned(e,a).next(function(t){if(!t)return r++,n.removeOrphanedDocument(e,a).next(function(e){i+=e})});o.push(u)}}).next(function(){return Bo.waitFor(o)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-i)}).next(function(){return r})},e.prototype.removeOrphanedDocument=function(e,t){var n,r=0,i=this.db.getRemoteDocumentCache();return Bo.waitFor([oa(e).delete((n=t,[0,Po(n.path)])),i.removeEntry(e,t).next(function(e){r+=e})]).next(function(){return r})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ts(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=oa(e),i=Co.INVALID;return r.iterate({index:Aa.documentTargetsIndex},function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==Co.INVALID&&t(new yr(Mo(n)),i),i=s,n=a):i=Co.INVALID}).next(function(){i!==Co.INVALID&&t(new yr(Mo(n)),i)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ts(e,t){return oa(e).put((n=t,r=e.currentSequenceNumber,new Aa(0,Po(n.path),r)));var n,r}var ns,rs,is=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Oi();return t.forEach(function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Pi();return i.forEach(function(e,t){t||(t=new br(e,ai.forDeletedDoc())),o=o.insert(e,t)}),o})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new yr(t)).next(function(e){var t=Mi();return e instanceof vr&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;wn(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=Mi();return this.indexManager.getCollectionParents(e,r).next(function(o){return Bo.forEach(o,function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next(function(e){e.forEach(function(e,t){i=i.insert(e,t)})})}).next(function(){return i})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(e){for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(t.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof vr?n.insert(c,h):n.remove(c)}}}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e}(),os=function(){function e(){this.refsByKey=new li(as.compareByKey),this.refsByTarget=new li(as.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new as(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new as(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=yr.EMPTY,r=new as(n,e),i=new as(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=yr.EMPTY,n=new as(t,e),r=new as(t,e+1),i=qi();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},e.prototype.containsKey=function(e){var t=new as(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),as=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return yr.comparator(e.key,t.key)||Yn(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Yn(e.targetOrBatchId,t.targetOrBatchId)||yr.comparator(e.key,t.key)},e}(),ss=function(){function e(e,t){this.persistence=e,this.localViewReferences=new os,this.queryDataByTarget={},wn(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new is(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new is(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var i=[],o=[],a=qi(),s=0,u=r;s<u.length;s++){var c=u[s];i.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d],o.push(c.batchId);for(var m=0,y=c.mutations;m<y.length;m++)f=y[m],a=a.add(f.key)}return t.localDocuments.getDocuments(n,a).next(function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}})})})},e.prototype.localWrite=function(e){var t=this,n=sr.now(),r=e.reduce(function(e,t){return e.add(t.key)},qi());return this.persistence.runTransaction("Locally write mutations","readwrite",function(i){return t.localDocuments.getDocuments(i,r).next(function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var l=u.fieldMask;if(l){var h=c instanceof vr?l.applyTo(c.data):qr.EMPTY;o.push(new vi(u.key,h,l,mi.exists(!0)))}}}return t.mutationQueue.addMutationBatch(i,n,o,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Bo.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,i)}).next(function(){return i.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return wn(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(i){var o=[],a=qi();Dn(t.targetChanges,function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach(function(e){a=a.add(e)}),s.modifiedDocuments.forEach(function(e){a=a.add(e)}),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)}));var c=s.resumeToken;if(0<c.length){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=u,e.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}});var s=Pi(),u=qi();t.documentUpdates.forEach(function(e,t){u=u.add(e)}),o.push(r.getEntries(i,u).next(function(e){t.documentUpdates.forEach(function(u,c){var l=e.get(u);null==l||c.version.isEqual(ai.MIN)||a.has(c.key)&&!l.hasPendingWrites||0<=c.version.compareTo(l.version)?(r.addEntry(c),s=s.insert(u,c)):yn("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))})}));var c=t.snapshotVersion;if(!c.isEqual(ai.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next(function(e){return wn(0<=c.compareTo(e),"Watch stream reverted to previous snapshot?? "+c+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)});o.push(l)}return Bo.waitFor(o).next(function(){return r.apply(i)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(i,s)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size)},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Bo.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Bo.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(i){return i?(r=i,Bo.resolve()):t.queryCache.allocateTargetId(n).next(function(i){return r=new ci(e,i,Gr.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return wn(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(i){wn(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?Bo.resolve():Bo.forEach(s,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,a)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Bo.resolve();return o.forEach(function(r){a=a.next(function(){return n.getEntry(e,r)}).next(function(e){var o=e,a=t.docVersions.get(r);wn(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):wn(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))})}),a.next(function(){return r.mutationQueue.removeMutationBatch(e,i)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),us=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=Sn(),this.batchesByDocumentKey=new li(as.compareByKey)}return e.prototype.checkEmpty=function(e){return Bo.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");wn(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return wn(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Bo.resolve()},e.prototype.getLastStreamToken=function(e){return Bo.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Bo.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){wn(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&wn(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Uo(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new as(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Bo.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Bo.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return wn(null!=n,"Failed to find local mutation batch."),Bo.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Bo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getAllMutationBatches=function(e){return Bo.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new as(t,0),i=new as(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(e){wn(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);wn(null!==r,"Batches in the index must exist in the main table"),o.push(r)}),Bo.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new li(Yn);return t.forEach(function(e){var t=new as(e,0),i=new as(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],function(t){wn(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Bo.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){wn(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;yr.isDocumentKey(i)||(i=i.child(""));var o=new as(new yr(i),0),a=new li(Yn);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),Bo.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;wn(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Bo.forEach(t.mutations,function(i){var o=new as(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new as(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Bo.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&wn(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Bo.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return wn(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return wn(n.batchId===e,"If found batch must match"),n},e}(),cs=function(){function e(e){this.persistence=e,this.queries=new aa(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=ai.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new os,this.targetCount=0,this.targetIdGenerator=Ho.forQueryCache()}return e.prototype.getTargetCount=function(e){return Bo.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Bo.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Bo.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Bo.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Bo.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Bo.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return wn(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Bo.resolve()},e.prototype.updateQueryData=function(e,t){return wn(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Bo.resolve()},e.prototype.removeQueryData=function(e,t){return wn(0<this.targetCount,"Removing a target from an empty cache"),wn(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Bo.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach(function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),Bo.waitFor(o).next(function(){return i})},e.prototype.getQueryCount=function(e){return Bo.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Bo.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return bn("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),Bo.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),Bo.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Bo.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Bo.resolve(n)},e.prototype.containsKey=function(e,t){return Bo.resolve(this.references.containsKey(t))},e}(),ls=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Er(yr.comparator),this.newDocumentChanges=qi(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(e,s.path.popLast()))}return this.size+=n,Bo.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,Bo.resolve(n.size)):Bo.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Bo.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return Bo.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,r=Oi();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Bo.resolve(r)},e.prototype.getSizedEntries=function(e,t){var n=this,r=Oi(),i=new Er(yr.comparator);return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),i=i.insert(e,t?t.size:0)}),Bo.resolve({maybeDocuments:r,sizeMap:i})},e.prototype.getDocumentsMatchingQuery=function(e,t){wn(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=Mi(),r=new yr(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.key,s=o.value.maybeDocument;if(!t.path.isPrefixOf(a.path))break;s instanceof vr&&t.matches(s)&&(n=n.insert(s.key,s))}return Bo.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Bo.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=Pi();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new br(e,ai.forDeletedDoc());n=n.insert(e,i)}),this.newDocumentChanges=qi(),Bo.resolve(n)},e.prototype.newChangeBuffer=function(){return new hs(this.sizer,this)},e.prototype.getSize=function(e){return Bo.resolve(this.size)},e}(),hs=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return u(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach(function(e,n){var o=t.documentSizes.get(e);wn(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=t.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})}),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(sa),fs=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new Co(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new cs(this),this.indexManager=new ya,this.remoteDocumentCache=new ls(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,r){return new e(t,function(e){return new ms(e,new qa(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(e){return new ps(e)})},e.prototype.shutdown=function(e){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return c(this,void 0,void 0,function(){return l(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new us(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;yn("MemoryPersistence","Starting transaction:",e);var i=new ds(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Bo.or((n=this.mutationQueues,r=[],Nn(n,function(e,t){return r.push(t)}),r).map(function(n){return function(){return n.containsKey(e,t)}}));var n,r},e}(),ds=function(e){this.currentSequenceNumber=e},ps=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Bo.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Bo.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Bo.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return Bo.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(t){return t?Bo.resolve():n.removeEntry(e,r).next(function(){})})})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Bo.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Bo.resolve(n.inMemoryPins.containsKey(t))}])},e}(),ms=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new aa(function(e){return Po(e.path)}),this.garbageCollector=new Wa(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Bo.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Bo.forEach(this.orphanedSequenceNumbers,function(r,i){return n.isPinned(e,r,i).next(function(e){return e?Bo.resolve():t(i)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(e,function(o){return n.isPinned(e,o,t).next(function(t){return t?Bo.resolve():(r++,i.removeEntry(e,o).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Bo.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Bo.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Bo.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Bo.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw bn("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Bo.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Bo.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Bo.resolve(void 0!==e&&n<e)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),ys=function(){function e(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&yn("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),gs="PersistentStream";(rs=ns||(ns={}))[rs.Initial=0]="Initial",rs[rs.Starting=1]="Starting",rs[rs.Open=2]="Open",rs[rs.Error=3]="Error",rs[rs.Backoff=4]="Backoff";var vs,bs,ws,Es,Ss=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ns.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new ys(e,t,1e3,1.5,6e4)}return e.prototype.isStarted=function(){return this.state===ns.Starting||this.state===ns.Open||this.state===ns.Backoff},e.prototype.isOpen=function(){return this.state===ns.Open},e.prototype.start=function(){this.state!==ns.Error?(wn(this.state===ns.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(ns.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){wn(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ns.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return c(this,void 0,void 0,function(){return l(this,function(e){return this.isOpen()?[2,this.close(ns.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return c(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return wn(this.isStarted(),"Only started streams should be closed."),wn(e===ns.Error||Wr(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==ns.Error?this.backoff.reset():t&&t.code===Tn.RESOURCE_EXHAUSTED?(gn(t.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===Tn.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;wn(this.state===ns.Initial,"Must be in initial state to auth"),this.state=ns.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new Cn(Tn.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;wn(this.state===ns.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return wn(t.state===ns.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=ns.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;wn(this.state===ns.Error,"Should only perform backoff when in Error state"),this.state=ns.Backoff,this.backoff.backoffAndRun(function(){return c(e,void 0,void 0,function(){return l(this,function(e){return wn(this.state===ns.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ns.Initial,this.start(),wn(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return wn(this.isStarted(),"Can't handle server close on non-started stream"),yn(gs,"close with error: "+e),this.stream=null,this.close(ns.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(yn(gs,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),Ts=function(e){function t(t,n,r,i,o){var a=e.call(this,t,So.ListenStreamConnectionBackoff,So.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return u(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Ss),Cs=function(e){function t(t,n,r,i,o){var a=e.call(this,t,So.WriteStreamConnectionBackoff,So.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return u(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(wn(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return wn(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){wn(this.isOpen(),"Writing handshake requires an opened stream"),wn(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;wn(this.isOpen(),"Writing mutations requires an opened stream"),wn(this.handshakeComplete_,"Handshake must be complete before writing mutations"),wn(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Ss),Is=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Cs(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Ts(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Pi();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var i=[];return e.forEach(function(e){var t=r.get(e);wn(!!t,"Missing entity in write response for "+e),i.push(t)}),i})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===Tn.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===Tn.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),ks=function(){function e(e){this.datastore=e,this.readVersions=Fi(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t;if(e instanceof vr)t=e.version;else{if(!(e instanceof br))throw bn("Document in a transaction was a "+e.constructor.name);t=ai.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new Cn(Tn.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):0<this.mutations.length?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then(function(e){return e.forEach(function(e){e instanceof br||e instanceof vr?t.recordVersion(e):bn("Document in a transaction was a "+e.constructor.name)}),e})},e.prototype.write=function(e){if(this.committed)throw new Cn(Tn.FAILED_PRECONDITION,"Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?mi.updateTime(t):mi.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(ai.forDeletedDoc()))throw new Cn(Tn.FAILED_PRECONDITION,"Can't update a document that doesn't exist.");return t?mi.updateTime(t):mi.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},e.prototype.delete=function(e){this.write([new wi(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,ai.forDeletedDoc())},e.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach(function(e){t=t.remove(e.key)}),t.isEmpty()?this.datastore.commit(this.mutations).then(function(){e.committed=!0}):Promise.reject(Error("Every document read in a transaction must also be written."))},e}();(bs=vs||(vs={}))[bs.Unknown=0]="Unknown",bs[bs.Online=1]="Online",bs[bs.Offline=2]="Offline",(Es=ws||(ws={}))[Es.RemoteStore=0]="RemoteStore",Es[Es.SharedClientState=1]="SharedClientState";var _s=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=vs.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(vs.Unknown),wn(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(So.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,wn(e.state===vs.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(vs.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===vs.Online?(this.setAndBroadcast(vs.Unknown),wn(0===this.watchStreamFailures,"watchStreamFailures must be 0"),wn(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(vs.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===vs.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(gn(t),this.shouldWarnClientIsOffline=!1):yn("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),Ds="RemoteStore",Ns=function(){function e(e,t,n,r){this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new _s(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return c(this,void 0,void 0,function(){var e;return l(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(vs.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(vs.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(yn(Ds,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return yn(Ds,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(vs.Unknown),[2]}})})},e.prototype.listen=function(e){wn(!kn(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){wn(kn(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),An(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(vs.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){wn(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new ro(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!An(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return c(this,void 0,void 0,function(){var e=this;return l(this,function(t){return Dn(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return c(this,void 0,void 0,function(){return l(this,function(t){return void 0===e&&wn(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(vs.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return c(this,void 0,void 0,function(){var n;return l(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(vs.Online),e instanceof to&&e.state===Gi.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Zi?this.watchChangeAggregator.handleDocumentChange(e):e instanceof eo?this.watchChangeAggregator.handleExistenceFilter(e):(wn(e instanceof to,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(ai.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),0<=t.compareTo(n)?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;wn(!e.isEqual(ai.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return Dn(n.targetChanges,function(n,r){if(0<r.resumeToken.length){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:Sn()}),t.sendUnwatchRequest(e);var r=new ci(n.query,e,Gr.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;wn(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return c(t,void 0,void 0,function(){return l(this,function(t){return kn(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return c(this,void 0,void 0,function(){var e,t;return l(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){wn(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},e.prototype.startWriteStream=function(){wn(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return c(this,void 0,void 0,function(){return l(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch($a)},e.prototype.onMutationResult=function(e,t){var n=this;wn(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=qo.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return c(this,void 0,void 0,function(){var t=this;return l(this,function(n){return void 0===e&&wn(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},e.prototype.handleHandshakeError=function(e){return c(this,void 0,void 0,function(){return l(this,function(t){return Ni(e.code)?(yn(Ds,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=Sn(),[2,this.localStore.setLastStreamToken(Sn()).catch($a)]):[2]})})},e.prototype.handleWriteError=function(e){return c(this,void 0,void 0,function(){var t,n=this;return l(this,function(r){return Ni(i=e.code)&&i!==Tn.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var i})})},e.prototype.createTransaction=function(){return new ks(this.datastore)},e.prototype.handleCredentialChange=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(yn(Ds,"RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return e.sent(),this.onlineStateTracker.set(vs.Unknown),[4,this.enableNetwork()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.applyPrimaryState=function(e){return c(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(vs.Unknown),t.label=4;case 4:return[2]}})})},e}(),As=function(){this.listeners=[]},xs=function(){function e(e){this.syncEngine=e,this.queries=new aa(function(e){return e.canonicalId()}),this.onlineState=vs.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new As,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return c(this,void 0,void 0,function(){var t,n,r,i;return l(this,function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(e))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=r.query,o=this.queries.get(i);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].onViewSnapshot(r);o.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(e)})},e}(),Ps=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=vs.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(wn(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==ji.Metadata&&t.push(i)}e=new Xi(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(wn(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==vs.Offline;return this.options.waitForSyncWhenOnline&&n?(wn(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===vs.Offline},e.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){wn(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Os=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=qi(),i=qi(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case ji.Added:r=r.add(s.doc.key);break;case ji.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),Rs=function(e){this.key=e},Ms=function(e){this.key=e},Ls=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=qi(),this.mutatedKeys=qi(),this.documentSet=new Ki(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Yi,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal(function(e,t){var c=i.get(e),l=t instanceof vr?t:null;l&&(wn(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),f=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;c&&l?c.data.isEqual(l.data)?h!==f&&(r.track({type:ji.Metadata,doc:l}),d=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:ji.Modified,doc:l}),d=!0,u&&0<n.query.docComparator(l,u)&&(s=!0)):!c&&l?(r.track({type:ji.Added,doc:l}),d=!0):c&&!l&&(r.track({type:ji.Removed,doc:c}),d=!0,u&&(s=!0)),d&&(o=l?(a=a.add(l),f?o.add(e):o.delete(e)):(a=a.delete(e),o.delete(e)))}),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:ji.Removed,doc:c})}return wn(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;wn(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case ji.Added:return 1;case ji.Modified:case ji.Metadata:return 2;case ji.Removed:return 0;default:return bn("Unknown ChangeType: "+e)}})(n)-o(i)||r.query.docComparator(e.doc,t.doc);var n,i,o}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Qi.Synced:Qi.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Xi(this.query,e.documentSet,i,o,e.mutatedKeys,s===Qi.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===vs.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Yi,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return wn(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=qi(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new Ms(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new Rs(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=qi();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Xi.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Qi.Local)},e}(),Fs="SyncEngine",Us=function(e,t,n){this.query=e,this.targetId=t,this.view=n},qs=function(e){this.key=e},Bs=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new aa(function(e){return e.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Er(yr.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new os,this.mutationUserCallbacks={},this.limboTargetIdGenerator=Ho.forSyncEngine(),this.isPrimary=void 0,this.onlineState=vs.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){wn(null!==e,"SyncEngine listener cannot be null"),wn(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return c(this,void 0,void 0,function(){var t,n,r,i,o;return l(this,function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){var n=this,r=e.query;return this.localStore.executeQuery(r).then(function(i){return n.localStore.remoteDocumentKeys(e.targetId).then(function(o){var a=new Ls(r,o),s=a.computeDocChanges(i),u=Ji.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&n.onlineState!==vs.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);wn(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),wn(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new Us(r,e.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[e.targetId]=l,c.snapshot})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){var t=this;return this.localStore.executeQuery(e.query).then(function(n){return t.localStore.remoteDocumentKeys(e.targetId).then(function(r){return c(t,void 0,void 0,function(){var t;return l(this,function(i){return t=e.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(e.targetId,t.limboChanges),[2,t]})})})})},e.prototype.unlisten=function(e){return c(this,void 0,void 0,function(){var t,n=this;return l(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),wn(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch($a)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then(function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)}).then(function(){return n.remoteStore.fillWritePipeline()})},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),wn(0<=t,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var t=e(r);return!Wr(t)&&t.catch&&t.then?t.catch(function(e){return Promise.reject(n.wrapUpdateFunctionError(e))}):Promise.reject(Error("Transaction callback must return a Promise"))}catch(t){return Promise.reject(n.wrapUpdateFunctionError(t))}}().then(function(i){return r.commit().then(function(){return i}).catch(function(r){return 0===t?Promise.reject(r):n.runTransaction(e,t-1)})})},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then(function(n){return Nn(e.targetChanges,function(e,n){var r=t.limboResolutionsByTarget[e];r&&(wn(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<n.addedDocuments.size?r.receivedDocument=!0:0<n.modifiedDocuments.size?wn(r.receivedDocument,"Received change for limbo target document without add."):0<n.removedDocuments.size&&(wn(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),t.emitNewSnapsAndNotifyLocalStore(n,e)}).catch($a)},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===ws.RemoteStore||!this.isPrimary&&t===ws.SharedClientState){var n=[];this.queryViewsByQuery.forEach(function(t,r){var i=r.view.applyOnlineStateChange(e);wn(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o,a,s,u=this;return l(this,function(c){switch(c.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Er(yr.comparator)).insert(r,new br(r,ai.forDeletedDoc())),o=qi().add(r),a=new $i(ai.MIN,{},new li(Yn),i,o),[2,this.applyRemoteEvent(a)]):[3,1];case 1:return wn(!!(s=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(s.query,!1).then(function(){return u.removeAndCleanupQuery(s)}).catch($a)];case 2:c.sent(),this.syncEngineListener.onWatchError(s.query,t),c.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return c(this,void 0,void 0,function(){var r;return l(this,function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(yn(Fs,"Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):bn("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then(function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)}).catch($a)},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then(function(r){return n.sharedClientState.updateMutationState(e,"rejected",t),n.emitNewSnapsAndNotifyLocalStore(r)}).catch($a)},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Er(Yn)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(wn(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Rs?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Ms?(yn(Fs,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):bn("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){yn(Fs,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Yr.atPath(t.path);this.limboResolutionsByTarget[n]=new qs(t),this.remoteStore.listen(new ci(r,n,Gr.LimboResolution,Co.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o=this;return l(this,function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach(function(a,s){i.push(Promise.resolve().then(function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then(function(e){return s.view.computeDocChanges(e,t)}):t}).then(function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=Os.fromSnapshot(s.targetId,a.snapshot);r.push(u)}}))}),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){wn(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return c(this,void 0,void 0,function(){var t,n;return l(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return c(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return l(this,function(c){switch(c.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return c.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),Dn(this.queryViewsByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.unlisten(t.query)}),u.remoteStore.unlisten(t.targetId)}),[4,s]);case 4:return c.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return c.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;Dn(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Er(yr.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){for(var t=this,n=Promise.resolve(),r=[],i=[],o=function(e){n=n.then(function(){return c(t,void 0,void 0,function(){var t,n,o,a;return l(this,function(s){switch(s.label){case 0:return(n=this.queryViewsByTarget[e])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return s.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=s.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=s.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return wn(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(e)];case 5:return wn(!!(a=s.sent()),"Query data for target "+e+" not found"),[4,this.localStore.allocateQuery(a)];case 6:return t=s.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:s.sent(),s.label=8;case 8:return r.push(t),[2]}})})})},a=0,s=e;a<s.length;a++)o(s[a]);return n.then(function(){return t.syncEngineListener.onWatchChange(i),r})},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return c(this,void 0,void 0,function(){var r,i=this;return l(this,function(o){switch(o.label){case 0:if(this.isPrimary)return yn(Fs,"Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,5];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then(function(n){return c(i,void 0,void 0,function(){var r;return l(this,function(i){switch(i.label){case 0:return r=$i.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}})})},function(e){return c(i,void 0,void 0,function(){var t;return l(this,function(n){switch(n.label){case 0:return(r=e).code!==Tn.DATA_LOSS||r.message!==ua?[3,2]:(t=[],Dn(this.queryViewsByTarget,function(e){return t.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]);case 1:return n.sent(),[3,3];case 2:throw e;case 3:return[2]}var r})})})];case 2:return r=this.queryViewsByTarget[e],this.removeAndCleanupQuery(r),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:bn("Unexpected target state: "+t),o.label=5;case 5:return[2]}})})},e.prototype.applyActiveTargetsChange=function(e,t){return c(this,void 0,void 0,function(){var n,r,i,o,a,s,u,c,h,f=this;return l(this,function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],wn(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return wn(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:a=function(e){var t;return l(this,function(n){switch(n.label){case 0:return(t=s.queryViewsByTarget[e])?[4,s.localStore.releaseQuery(t.query,!1).then(function(){f.remoteStore.unlisten(e),f.removeAndCleanupQuery(t)}).catch($a)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},s=this,u=0,c=t,d.label=7;case 7:return u<c.length?(h=c[u],[5,a(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?qi().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:qi()},e}(),Vs=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),js="SharedClientState",zs="firestore_clients",Qs="firestore_mutations",Ws="firestore_targets",Ks=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,wn(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new Cn(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(gn(js,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Gs=function(){function e(e,t,n){this.targetId=e,this.state=t,wn(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Cn(r.error.code,r.error.message)),i?new e(t,r.state,o):(gn(js,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Hs=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Vi(),a=0;i&&a<r.activeTargetIds.length;++a)i=Kr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(gn(js,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Ys=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&void 0!==vs[n.onlineState]&&"string"==typeof n.clientId?new e(n.clientId,vs[n.onlineState]):(gn(js,"Failed to parse online state: "+t),null)},e}(),Xs=function(){function e(){this.activeTargetIds=Vi()}return e.prototype.addQueryTarget=function(e){wn(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),$s=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new Cn(Tn.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+r,this.activeClients[this.localClientId]=new Xs,this.clientStateKeyRe=new RegExp("^"+zs+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Qs+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ws+"_"+a+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return c(this,void 0,void 0,function(){var e,t,n,r,i,o,a,s,u,c,h,f=this;return l(this,function(l){switch(l.label){case 0:return wn(!this.started,"WebStorageSharedClientState already started"),wn(null!==this.syncEngine,"syncEngine property must be set before calling start()"),wn(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=l.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Hs.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(a=this.storage.getItem(this.onlineStateKey))&&(s=this.fromWebStorageOnlineState(a))&&this.handleOnlineStateEvent(s),u=0,c=this.earlyEvents;u<c.length;u++)h=c[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Vi();return Nn(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Gs.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return yn(js,"READ",e,t),t},e.prototype.setItem=function(e,t){yn(js,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){yn(js,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(yn(js,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void gn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return c(t,void 0,void 0,function(){var t,n,r,i,o,a;return l(this,function(s){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(wn(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=Co.INVALID;if(null!=e)try{var n=JSON.parse(e);wn("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){gn(js,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==Co.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Ks(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:vs[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new Gs(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return wn(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),zs+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Ws+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Qs+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return wn(null!==n,"Cannot parse client state key '"+e+"'"),Hs.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);wn(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ks.fromWebStorageEntry(new Vs(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);wn(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Gs.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Ys.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return c(this,void 0,void 0,function(){return l(this,function(t){return e.user.uid!==this.currentUser.uid?(yn(js,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(e){return c(n,void 0,void 0,function(){return l(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return c(n,void 0,void 0,function(){return l(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Js=function(){function e(){this.localState=new Xs,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Xs,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Zs="FirestoreClient",eu=function(){function e(e,t){this.cacheSizeBytes=e,this.experimentalTabSynchronization=t}return e.prototype.lruParams=function(){return za.withCacheSize(this.cacheSizeBytes)},e}(),tu=function(){},nu=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=Hn.newId()}return e.prototype.start=function(e){var t=this,n=new Io,r=new Io,i=!1;return this.credentials.setChangeListener(function(o){i?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(o)}):(i=!0,t.initializePersistence(e,r,o).then(function(e){return t.initializeRest(o,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof eu?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof Cn?e.code===Tn.FAILED_PRECONDITION||e.code===Tn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Xa.buildStoragePrefix(this.databaseInfo),i=new po(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return c(n,void 0,void 0,function(){var n,o;return l(this,function(a){switch(a.label){case 0:if(t.experimentalTabSynchronization&&!$s.isAvailable(this.platform))throw new Cn(Tn.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.experimentalTabSynchronization?(this.sharedClientState=new $s(this.asyncQueue,this.platform,r,this.clientId,e),[4,Xa.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Js,[4,Xa.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return[2,(this.persistence=n).referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=fs.createEagerPersistence(this.clientId),this.sharedClientState=new Js,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return yn(Zs,"Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return c(n,void 0,void 0,function(){var n,i,o,a,s=this;return l(this,function(u){switch(u.label){case 0:return this.localStore=new ss(this.persistence,e),t&&(this.lruScheduler=new Qa(t,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new Is(this.asyncQueue,r,this.credentials,n),o=function(e){return s.syncEngine.applyOnlineStateChange(e,ws.RemoteStore)},a=function(e){return s.syncEngine.applyOnlineStateChange(e,ws.SharedClientState)},this.remoteStore=new Ns(this.localStore,i,this.asyncQueue,o),this.syncEngine=new Bs(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new xs(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return c(s,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return u.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),yn(Zs,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(e){var t=this;return this.asyncQueue.enqueue(function(){return c(t,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown(e&&e.purgePersistenceWithDataLoss)];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.listen=function(e,t,n){var r=this,i=new Ps(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},e.prototype.unlisten=function(e){var t=this;this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof vr)return e;if(e instanceof br)return null;throw new Cn(Tn.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=qi(),r=new Ls(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot})},e.prototype.write=function(e){var t=this,n=new Io;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.transaction=function(e){var t=this;return this.asyncQueue.enqueue(function(){return c(t,void 0,void 0,function(){return l(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),ru=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),iu=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<1)throw new Cn(Tn.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Gn(1,"element")+".")}(0,e);for(var n=0;n<e.length;++n)if(Mn("FieldPath","string",n,e[n]),0===e[n].length)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Wn("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(mr.keyField().canonicalString()),e}(),ou=new RegExp("[~\\*/\\[\\]]"),au=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},su=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){wn(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(Vs.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){wn(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),uu=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;wn(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new Cn(Tn.ABORTED,"getToken aborted due to token change.");return n?(wn("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new au(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){wn(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){wn(null!=this.tokenListener,"removeChangeListener() called twice"),wn(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return wn(null===e||"string"==typeof e,"Received invalid UID: "+e),new Vs(e)},e}(),cu=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=Vs.FIRST_PARTY,wn(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),e}(),lu=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,wn(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return e.prototype.getToken=function(){return Promise.resolve(new cu(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(Vs.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function hu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var fu,du,pu=function(){function e(e){this._methodName=e}return e.delete=function(){return xn("FieldValue.delete",arguments),mu.instance},e.serverTimestamp=function(){return xn("FieldValue.serverTimestamp",arguments),yu.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return On("FieldValue.arrayUnion",arguments,1),new gu(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return On("FieldValue.arrayRemove",arguments,1),new vu(e)},e.increment=function(e){return Mn("FieldValue.increment","number",1,e),Pn("FieldValue.increment",arguments,1),new bu(e)},e.prototype.isEqual=function(e){return this===e},e}(),mu=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return u(t,e),t.instance=new t,t}(pu),yu=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return u(t,e),t.instance=new t,t}(pu),gu=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return u(t,e),t}(pu),vu=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return u(t,e),t}(pu),bu=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return u(t,e),t}(pu),wu=In(pu,"Use FieldValue.<field>() instead."),Eu=/^__.*__$/,Su=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new vi(e,this.data,this.fieldMask,t)):n.push(new gi(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new bi(e,this.fieldTransforms)),n},e}(),Tu=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new vi(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new bi(e,this.fieldTransforms)),n},e}();function Cu(e){switch(e){case fu.Set:case fu.MergeSet:case fu.Update:return!0;case fu.Argument:return!1;default:throw bn("Unexpected case for UserDataSource: "+e)}}(du=fu||(fu={}))[du.Set=0]="Set",du[du.Update=1]="Update",du[du.MergeSet=2]="MergeSet",du[du.Argument=3]="Argument";var Iu=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new Cn(Tn.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(Cu(this.dataSource)&&Eu.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),ku=function(e,t){this.databaseId=e,this.key=t},_u=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Iu(fu.Set,e,mr.EMPTY_PATH);Nu("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Su(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Iu(fu.MergeSet,e,mr.EMPTY_PATH);Nu("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new li(mr.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof iu)h=l._internalPath;else{if("string"!=typeof l)throw bn("Expected stringOrFieldPath to be a string or a FieldPath");h=xu(e,l)}if(!r.contains(h))throw new Cn(Tn.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=fi.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=fi.fromArray(r.fieldMask),o=r.fieldTransforms;return new Su(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Iu(fu.Update,e,mr.EMPTY_PATH);Nu("Data must be an object, but it was:",r,t);var i=new li(mr.comparator),o=qr.EMPTY;Nn(t,function(t,a){var s=xu(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof mu)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}});var a=fi.fromSet(i);return new Tu(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Iu(fu.Update,e,mr.EMPTY_PATH),o=[Au(e,t)],a=[n];if(r.length%2!=0)throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Au(e,r[s])),a.push(r[s+1]);var u=new li(mr.comparator),c=qr.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof mu)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=fi.fromSet(u);return new Tu(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new Iu(fu.Argument,e,mr.EMPTY_PATH),r=this.parseData(t,n);return wn(null!=r,"Parsed data should not be null."),wn(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Pu(e);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(Du(e=this.runPreConverter(e,t)))return Nu("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof pu)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Er(Yn);return An(e)?t.path&&0<t.path.length&&t.fieldMask.push(t.path):Nn(e,function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))}),new qr(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=_r.INSTANCE),n.push(s),r++}return new Br(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Cu(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof mu){if(t.dataSource!==fu.MergeSet)throw t.dataSource===fu.Update?(wn(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof yu)t.fieldTransforms.push(new di(t.path,Ei.instance));else if(e instanceof gu){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Si(n);t.fieldTransforms.push(new di(t.path,r))}else if(e instanceof vu){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new Ti(n);t.fieldTransforms.push(new di(t.path,i))}else if(e instanceof bu){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new Ci(o);t.fieldTransforms.push(new di(t.path,a))}else bn("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return _r.INSTANCE;if("number"==typeof e)return Kr(e)?new xr(e):new Pr(e);if("boolean"==typeof e)return Dr.of(e);if("string"==typeof e)return new Or(e);if(e instanceof Date)return new Rr(sr.fromDate(e));if(e instanceof sr)return new Rr(new sr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ar)return new Ur(e);if(e instanceof ir)return new Lr(e);if(e instanceof ku)return new Fr(e.databaseId,e.key);throw t.createError("Unsupported field value: "+jn(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(t,r){var i=new Iu(fu.Argument,e,mr.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))})},e}();function Du(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof sr||e instanceof ar||e instanceof ir||e instanceof ku||e instanceof pu)}function Nu(e,t,n){if(!Du(n)||!Vn(n)){var r=jn(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Au(e,t){if(t instanceof iu)return t._internalPath;if("string"==typeof t)return xu(e,t);throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function xu(e,t){try{return function(e){if(0<=e.search(ou))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(iu.bind.apply(iu,[void 0].concat(e.split("."))))}catch(t){throw new Cn(Tn.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(t){var n=Pu(t);throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Pu(e){return e instanceof Error?e.message:e.toString()}var Ou=za.COLLECTION_DISABLED,Ru=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new Cn(Tn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Fn("settings","non-empty string","host",e.host),this.host=e.host,Un("settings","boolean","ssl",e.ssl),this.ssl=_n(e.ssl,!0);if(Qn("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),Un("settings","object","credentials",e.credentials),this.credentials=e.credentials,Un("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?gn("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&gn("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=_n(e.timestampsInSnapshots,!0),Un("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=za.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Ou&&e.cacheSizeBytes<za.MINIMUM_CACHE_SIZE_BYTES)throw new Cn(Tn.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+za.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes},e}(),Mu=function(){},Lu=function(){function e(t){var n=this;this._queue=new _o,this.INTERNAL={delete:function(e){return c(n,void 0,void 0,function(){return l(this,function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown(e)]:[2]})})}};var r=new Mu;if("object"==typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new uu(i)}else{var o=t;if(!o.projectId)throw new Cn(Tn.INVALID_ARGUMENT,"Must provide projectId");r.databaseId=new lr(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new su}r.settings=new Ru({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(Pn("Firestore.settings",arguments,1),Mn("Firestore.settings","object",1,e),kn(e,"persistence"))throw new Cn(Tn.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Ru(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new Cn(Tn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._config.settings=t).credentials&&(this._config.credentials=function(e){if(!e)return new su;switch(e.type){case"gapi":return new lu(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new Cn(Tn.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new Cn(Tn.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new eu(this._config.settings.cacheSizeBytes,void 0!==e&&_n(e.experimentalTabSynchronization,!1)))},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new tu),this._firestoreClient},e.prototype.configureClient=function(e){var t=this;wn(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),wn(!this._firestoreClient,"configureClient() called multiple times");var n=new ur(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new _u(function(e){if(e instanceof qu){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.isEqual(n))throw new Cn(Tn.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new ku(t._config.databaseId,e._key)}return e}),this._firestoreClient=new nu(En.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!kn(t,"projectId"))throw new Cn(Tn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new Cn(Tn.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new lr(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new Cn(Tn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return Pn("Firestore.collection",arguments,1),Mn("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Wu(dr.fromString(e),this)},e.prototype.doc=function(e){return Pn("Firestore.doc",arguments,1),Mn("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),qu.forPath(dr.fromString(e),this)},e.prototype._collectionGroup=function(e){if(Pn("Firestore.collectionGroup",arguments,1),Mn("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new zu(new Yr(dr.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return Pn("Firestore.runTransaction",arguments,1),Mn("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Fu(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Uu(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(pn()){case cn.DEBUG:return"debug";case cn.ERROR:return"error";case cn.SILENT:return"silent";default:return bn("Unknown log level: "+pn())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(Pn("Firestore.setLogLevel",arguments,1),Mn("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":mn(cn.DEBUG);break;case"error":mn(cn.ERROR);break;case"silent":mn(cn.SILENT);break;default:throw new Cn(Tn.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),Fu=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;Pn("Transaction.get",arguments,1);var n=Yu("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return bn("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof br)return new Vu(t._firestore,n._key,null,!1,!1);if(r instanceof vr)return new Vu(t._firestore,n._key,r,!1,!1);throw bn("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){Rn("Transaction.set",arguments,2,3);var r=Yu("Transaction.set",e,this._firestore),i=(n=Ku("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof iu?(On("Transaction.update",arguments,3),r=Yu("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(Pn("Transaction.update",arguments,2),r=Yu("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){Pn("Transaction.delete",arguments,1);var t=Yu("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Uu=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){Rn("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Yu("WriteBatch.set",e,this._firestore),i=(n=Ku("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,mi.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof iu?(On("WriteBatch.update",arguments,3),r=Yu("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(Pn("WriteBatch.update",arguments,2),r=Yu("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,mi.exists(!0))),this},e.prototype.delete=function(e){Pn("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Yu("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new wi(t._key,mi.NONE)),this},e.prototype.commit=function(){return c(this,void 0,void 0,function(){return l(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new Cn(Tn.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),qu=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new yr(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Wu(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(Pn("DocumentReference.collection",arguments,1),Mn("DocumentReference.collection","non-empty string",1,e),!e)throw new Cn(Tn.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=dr.fromString(e);return new Wu(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Wn("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){Rn("DocumentReference.set",arguments,1,2);var n=(t=Ku("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,mi.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof iu?(On("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(Pn("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,mi.exists(!0)))},e.prototype.delete=function(){return Pn("DocumentReference.delete",arguments,0),this._firestoreClient.write([new wi(this._key,mi.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Rn("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||hu(e[i])||(Qn("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),Un("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=hu(e[i])?e[i]:(Mn("DocumentReference.onSnapshot","function",i,e[i]),Ln("DocumentReference.onSnapshot","function",i+1,e[i+1]),Ln("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ru({next:function(e){if(t.next){wn(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Vu(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Yr.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return Rn("DocumentReference.get",arguments,0,1),Hu("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Vu(t.firestore,t._key,e,!0,e instanceof vr&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new Cn(Tn.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new Cn(Tn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),Bu=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Vu=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return Rn("DocumentSnapshot.data",arguments,0,1),e=Gu("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Ir.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(Rn("DocumentSnapshot.get",arguments,1,2),t=Gu("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(Au("DocumentSnapshot.get",e));if(void 0!==n)return this.convertValue(n,Ir.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new qu(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Bu(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Wn("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach(function(e,i){r[e]=n.convertValue(i,t)}),r},e.prototype.convertValue=function(e,t){if(e instanceof qr)return this.convertObject(e,t);if(e instanceof Br)return this.convertArray(e,t);if(e instanceof Fr){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||gn("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new qu(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.convertValue(e,t)})},e}(),ju=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return u(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return wn("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(Vu),zu=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){var i;Pn("Query.where",arguments,3),Mn("Query.where","non-empty string",2,n),zn("Query.where",3,r);var o=Au("Query.where",t),a=$r.fromString(n);if(o.isKeyField()){if(a===$r.ARRAY_CONTAINS)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(""===r)throw new Cn(Tn.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(dr.fromString(r));if(!yr.isDocumentKey(s))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new Fr(this.firestore._databaseId,new yr(s))}else{if(!(r instanceof qu))throw new Cn(Tn.INVALID_ARGUMENT,"Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+jn(r)+".");var u=r;i=new Fr(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Xr.create(o,a,i);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(Rn("Query.orderBy",arguments,1,2),Ln("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=ti.ASCENDING;else{if("desc"!==n)throw new Cn(Tn.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=ti.DESCENDING}if(null!==this._query.startAt)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=Au("Query.orderBy",t),o=new ri(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(Pn("Query.limit",arguments,1),Mn("Query.limit","number",1,t),t<=0)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];On("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];On("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];On("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];On("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Wn("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(zn(e,1,t),t instanceof Vu){if(0<n.length)throw new Cn(Tn.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new Cn(Tn.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Fr(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Mr)throw new Cn(Tn.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new ni(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new Cn(Tn.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(dr.fromString(a));if(!yr.isDocumentKey(s))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new yr(s);i.push(new Fr(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new ni(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Rn("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||hu(e[i])||(Qn("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),Un("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=hu(e[i])?e[i]:(Mn("Query.onSnapshot","function",i,e[i]),Ln("Query.onSnapshot","function",i+1,e[i+1]),Ln("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new ru({next:function(e){t.next&&t.next(new Qu(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return Rn("Query.get",arguments,0,1),Hu("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Qu(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new Cn(Tn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.validateNewFilter=function(e){if(e instanceof Jr)if(e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(e.field))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}else if(e.op===$r.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. Queries only support a single array-contains filter.")},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new Cn(Tn.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Qu=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Bu(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;Rn("QuerySnapshot.forEach",arguments,1,2),Mn("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new zu(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(Qn("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),Un("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new Cn(Tn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map(function(t){var o=new ju(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return wn(t.type===ji.Added,"Invalid event type for first snapshot"),wn(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}})}var o=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==ji.Metadata}).map(function(t){var r=new ju(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==ji.Added&&(wn(0<=(i=o.indexOf(t.doc.key)),"Index for document not found"),o=o.delete(t.doc.key)),t.type!==ji.Removed&&(o=o.add(t.doc),a=o.indexOf(t.doc.key)),{type:function(e){switch(e){case ji.Added:return"added";case ji.Modified:case ji.Metadata:return"modified";case ji.Removed:return"removed";default:return bn("Unknown change type: "+e)}}(t.type),doc:r,oldIndex:i,newIndex:a}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Wn("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new ju(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Qu.prototype.docChanges,e,{get:function(){return function(){throw new Cn(Tn.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Wu=function(e){function t(t,n){var r=e.call(this,Yr.atPath(t),n)||this;if(t.length%2!=1)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return u(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new qu(new yr(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(Rn("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=Hn.newId()),Mn("CollectionReference.doc","non-empty string",1,e),""===e)throw new Cn(Tn.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=dr.fromString(e);return qu.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){Pn("CollectionReference.add",arguments,1),Mn("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(zu);function Ku(e,t){if(void 0===t)return{merge:!1};if(Qn(e,t,["merge","mergeFields"]),Un(e,"boolean","merge",t.merge),function(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+jn(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Cn(Tn.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+jn(r[o]))}(e,t,n,r,i)}(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof iu}),void 0!==t.mergeFields&&void 0!==t.merge)throw new Cn(Tn.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Gu(e,t){return void 0===t?{}:(Qn(e,t,["serverTimestamps"]),qn(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Hu(e,t){Ln(e,"object",1,t),t&&(Qn(e,t,["source"]),qn(e,0,"source",t.source,["default","server","cache"]))}function Yu(e,t,n){if(t instanceof qu){if(t.firestore!==n)throw new Cn(Tn.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Wn(e,"DocumentReference",1,t)}var Xu=In(Lu,"Use firebase.firestore() instead."),$u=In(Fu,"Use firebase.firestore().runTransaction() instead."),Ju=In(Uu,"Use firebase.firestore().batch() instead."),Zu=In(qu,"Use firebase.firestore().doc() instead."),ec=In(Vu),tc=In(ju),nc=In(zu),rc=In(Qu),ic=In(Wu,"Use firebase.firestore().collection() instead."),oc={Firestore:Xu,GeoPoint:ar,Timestamp:sr,Blob:or,Transaction:$u,WriteBatch:Ju,DocumentReference:Zu,DocumentSnapshot:ec,Query:nc,QueryDocumentSnapshot:tc,QuerySnapshot:rc,CollectionReference:ic,FieldPath:iu,FieldValue:wu,setLogLevel:Lu.setLogLevel,CACHE_SIZE_UNLIMITED:Ou};!function(e){e.INTERNAL.registerService("firestore",function(e){return new Lu(e)},function(e){wn(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(oc))}(t)}).apply(this,arguments)}catch(n){throw console.error(n),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}}(n(53))}).call(this,n(13))}]]);
//# sourceMappingURL=2.ac4622c4.chunk.js.map